<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>5m10v3&#39;s blog</title>
  
  
  <link href="https://5m10v3.github.io/atom.xml" rel="self"/>
  
  <link href="https://5m10v3.github.io/"/>
  <updated>2024-06-10T02:23:50.179Z</updated>
  <id>https://5m10v3.github.io/</id>
  
  <author>
    <name>5m10v3</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç™½ç›’AESç®—æ³•å­¦ä¹ </title>
    <link href="https://5m10v3.github.io/2024/06/09/%E7%99%BD%E7%9B%92AES%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
    <id>https://5m10v3.github.io/2024/06/09/%E7%99%BD%E7%9B%92AES%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/</id>
    <published>2024-06-08T16:00:00.000Z</published>
    <updated>2024-06-10T02:23:50.179Z</updated>
    
    <content type="html"><![CDATA[<p>ç¨å¾®å…ˆæ°´ä¸€ä¸‹åšå®¢å§,æ˜å¤©å­¦ä¹ ä¸€ä¸‹ç™½ç›’AESç®—æ³•,å…¶å®ç™½ç›’ç®—æ³•è¿˜æœ‰å¾ˆå¤š,ç™½ç›’SM4â€¦â€¦å…ˆå­¦ä¹ ç™½ç›’AES</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç¨å¾®å…ˆæ°´ä¸€ä¸‹åšå®¢å§,æ˜å¤©å­¦ä¹ ä¸€ä¸‹ç™½ç›’AESç®—æ³•,å…¶å®ç™½ç›’ç®—æ³•è¿˜æœ‰å¾ˆå¤š,ç™½ç›’SM4â€¦â€¦å…ˆå­¦ä¹ ç™½ç›’AES&lt;/p&gt;
</summary>
      
    
    
    
    <category term="CTF" scheme="https://5m10v3.github.io/categories/CTF/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>RCTF-Noval_cpythonå¤ç°åŠæ€è€ƒ</title>
    <link href="https://5m10v3.github.io/2024/06/08/RCTF-Noval_cython%E5%A4%8D%E7%8E%B0%E5%8F%8A%E6%80%9D%E8%80%83/"/>
    <id>https://5m10v3.github.io/2024/06/08/RCTF-Noval_cython%E5%A4%8D%E7%8E%B0%E5%8F%8A%E6%80%9D%E8%80%83/</id>
    <published>2024-06-07T16:00:00.000Z</published>
    <updated>2024-06-10T01:57:04.204Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥ä¸‹ä¸ºé™„ä»¶é“¾æ¥ï¼Œä¾›å„ä½å¸ˆå‚…ä¸‹è½½ç»ƒä¹ <br><a href="https://wwb.lanzout.com/i7mkm21aeegd">https://wwb.lanzout.com/i7mkm21aeegd</a></p><p>è¶çƒ­æ‰“é“ï¼Œå‰ä¸€é˜µå­æ‰“å›½èµ›é‡åˆ°äº†cpythonçš„é¢˜ï¼Œä½†æ˜¯å›½èµ›é‚£é“cpythonå’Œè¿™ä¸ªç›¸æ¯”ç®€ç›´å°±æ˜¯â€å…³å…¬é¢å‰è€å¤§åˆ€â€œã€‚</p><p>åœ¨æ­¤ä¹Ÿéå¸¸æ„Ÿè°¢<strong>z221x</strong>å¸ˆå‚…çš„åšå®¢</p><p><a href="http://z221x.cc/index.php/2024/05/29/rctf%e9%80%86%e5%90%91%e5%a4%8d%e7%8e%b0/">http://z221x.cc/index.php/2024/05/29/rctf%e9%80%86%e5%90%91%e5%a4%8d%e7%8e%b0/</a></p><p>ä¸ºæˆ‘æä¾›äº†ä¸€äº›å¾ˆå¥½çš„æ€è·¯</p><h2 id="Noval-cpython"><a href="#Noval-cpython" class="headerlink" title="Noval_cpython"></a>Noval_cpython</h2><p>æˆ‘ä»¬å¯ä»¥å…ˆç”¨helpå‡½æ•°çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰ä»€ä¹ˆæ¯”è¾ƒæœ‰ç”¨çš„ä¿¡æ¯</p><p>è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œå®ƒæ˜¯ç”¨python3.10ç›´æ¥ç¼–è¯‘çš„ï¼Œæˆ‘è°ƒäº†å¾ˆå¤šéï¼Œå‘ç°å¦‚æœè·Ÿç‰ˆæœ¬ä¸ä¸€æ ·çš„è¯ä¼šå¯¼è‡´å¯¼å…¥ä¸äº†è¿™ä¸ªæ¨¡å—</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨helpæŸ¥çœ‹ä¸€ä¸‹ï¼Œå¯ä»¥å¾—åˆ°å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯</p><p><img src="/../image/734.png" class="lazyload" data-srcset="/../image/734.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="734"></p><p>æˆ‘ä»¬æ³¨æ„åˆ°äº†checkå’Œencryptå‡½æ•°ï¼Œåœ¨main.pyä¸­å®ƒä½¿ç”¨çš„å°±æ˜¯check()å‡½æ•°</p><p><img src="/../image/735.png" class="lazyload" data-srcset="/../image/735.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="735"></p><p>ç„¶åæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°DATAé‚£é‡Œæœ‰å¾ˆå¤šå¯ç–‘çš„æ•°æ®ï¼Œæˆ‘ä»¬å…ˆç»§ç»­è¿›è¡Œåˆ†æ</p><p>é¦–å…ˆç¬¬ä¸€æ­¥è¿˜æ˜¯æ‰¾åˆ°æ¨¡å—å¤„ç†çš„åœ°æ–¹</p><p><img src="/../image/736.png" class="lazyload" data-srcset="/../image/736.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="736"></p><p>æˆ‘ä»¬è¦ä»check_secretæ¨¡å—å¼€å§‹çœ‹</p><p><img src="/../image/737.png" class="lazyload" data-srcset="/../image/737.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="737"></p><p>æˆ‘ä»¬å‘ç°é‡Œé¢æœ‰å¾ˆå¤šå¯¹è±¡ï¼Œè¿™è®©æˆ‘æƒ³åˆ°ä¹‹å‰å­¦ä¹ é©±åŠ¨çš„æ—¶å€™ï¼Œâ€œé©±åŠ¨ä¹‹å†…ä¸€åˆ‡çš†å¯¹è±¡â€ï¼Œå…¶å®cpythonåœ¨åˆ›å»ºæ¨¡å—ä¹Ÿéœ€è¦å¾ˆå¤šå¯¹è±¡</p><p><img src="/../image/738.png" class="lazyload" data-srcset="/../image/738.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="738"></p><p><img src="/../image/739.png" class="lazyload" data-srcset="/../image/739.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="739"></p><p>æˆ‘ä»¬å‘ç°è¿™é‡Œåˆ›å»ºäº†å¾ˆå¤šå¯¹è±¡ï¼Œè¿™é‡Œçš„æ“ä½œç›¸å½“äº</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯å¯†æ–‡çš„åˆå§‹åŒ–</p><p><img src="/../image/740.png" class="lazyload" data-srcset="/../image/740.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="740"></p><p>ä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™ä¸ªè·Ÿä¸Šé¢çš„helpçš„æƒ…å†µä¸å¤ªä¸€æ ·ï¼Œæ²¡æœ‰å…³ç³»æˆ‘ä»¬ç»§ç»­å¾€ä¸‹é¢çœ‹</p><p>è¿™é‡Œé‡æ–°æ‰“åŒ…äº†å¾ˆå¤šä¸œè¥¿</p><p><img src="/../image/741.png" class="lazyload" data-srcset="/../image/741.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="741"></p><p>ä½†æ˜¯æˆ‘ä»¬åœ¨ä¼ªä»£ç å±‚é¢çœ‹ä¸å‡ºæ¥å®ƒçš„é€»è¾‘</p><p>æ±‡ç¼–å±‚é¢:</p><p><img src="/../image/742.png" class="lazyload" data-srcset="/../image/742.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="742"></p><p>æˆ‘ä»¬å‘ç°å®ƒæ˜¯å®šä¹‰algorithm1ï¼Œalgorithm2ï¼Œalgorithm3â€¦â€¦.è¿™äº›å‡½æ•°</p><p><img src="/../image/743.png" class="lazyload" data-srcset="/../image/743.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="743"></p><p>ç„¶åæœ€åçš„æ—¶å€™è¿˜æœ‰ä¸ªåŠ å¯†å‡½æ•°ï¼Œè¿™ä¸ªåŠ å¯†å‡½æ•°æœ‰ä¸ƒä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å‘ç°æœ‰ä¸€ä¸ªdeltaçš„å‚æ•°ï¼Œåœ¨è¿™é‡Œå…ˆçŒœæµ‹å®ƒå¯èƒ½æ˜¯teaåŠ å¯†</p><p>ç»§ç»­å¾€ä¸‹é¢åˆ†æ</p><p>è¿™é‡Œä¸ºå®šä¹‰ä¸€ä¸ªxixiå˜é‡</p><p><img src="/../image/744.png" class="lazyload" data-srcset="/../image/744.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="744"></p><p>è¿™é‡Œæˆ‘ä»¬å‘ç°å®šä¹‰äº†ä¸€ä¸ªsboxå˜é‡</p><p><img src="/../image/745.png" class="lazyload" data-srcset="/../image/745.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="745"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å°±æ˜¯è¿™æ ·çš„ä½œç”¨</span></span><br><span class="line">s_box=[<span class="number">12</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">27</span>,<span class="number">31</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">21</span>,<span class="number">24</span>,<span class="number">1</span>,<span class="number">26</span>,<span class="number">22</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">25</span>,<span class="number">29</span>,<span class="number">19</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">30</span>,<span class="number">4</span>,<span class="number">23</span>,<span class="number">2</span>,<span class="number">28</span>,<span class="number">20</span>]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå®šä¹‰hahaè¿™ä¸ªå˜é‡</p><p><img src="/../image/746.png" class="lazyload" data-srcset="/../image/746.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="746"></p><p>å†å¾€ä¸‹é¢å°±æ˜¯å®šä¹‰äº†æ‰“åŒ…çš„å‡½æ•°æ¨¡å—</p><p>è¿™é‡Œå°±æ˜¯çœŸæ­£å®šä¹‰å¯†æ–‡çš„åœ°æ–¹</p><p><img src="/../image/747.png" class="lazyload" data-srcset="/../image/747.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="747"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enc=[<span class="number">1386864498</span>,<span class="number">2877138732</span>,<span class="number">1628978326</span>,<span class="number">881564191</span>,<span class="number">1437614165</span>,<span class="number">4227562200</span>,<span class="number">1606883458</span>,<span class="number">3679355295</span>]</span><br></pre></td></tr></table></figure><p><img src="/../image/748.png" class="lazyload" data-srcset="/../image/748.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="748"></p><p><img src="/../image/749.png" class="lazyload" data-srcset="/../image/749.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="749"></p><p><img src="/../image/750.png" class="lazyload" data-srcset="/../image/750.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="750"></p><p><img src="/../image/751.png" class="lazyload" data-srcset="/../image/751.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="751"></p><p><img src="/../image/752.png" class="lazyload" data-srcset="/../image/752.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="752"></p><p><img src="/../image/753.png" class="lazyload" data-srcset="/../image/753.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="753"></p><p><img src="/../image/754.png" class="lazyload" data-srcset="/../image/754.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="754"></p><p><img src="/../image/755.png" class="lazyload" data-srcset="/../image/755.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="755"></p><p>æ€»ç»“ä¸€ä¸‹ä¸Šé¢å…«ä¸ªå‡½æ•°ä»¥åŠå‰é¢æ‰“åŒ…å‡½æ•°çš„æ—¶å€™çš„ä¸¤ä¸ªå‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">algorithm1   --------&gt;  add</span></span><br><span class="line"><span class="string">algorithm2   --------&gt;  sub   </span></span><br><span class="line"><span class="string">algorithm3   --------&gt;  mul</span></span><br><span class="line"><span class="string">algorithm4   --------&gt;  div</span></span><br><span class="line"><span class="string">algorithm5   --------&gt;  mod</span></span><br><span class="line"><span class="string">algorithm6   --------&gt;  rsl</span></span><br><span class="line"><span class="string">algorithm7   --------&gt;  rsr</span></span><br><span class="line"><span class="string">algorithm8   --------&gt;  xor</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">algorithm1</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">algorithm2</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a-b</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">algorithm3</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a*b</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">algorithm4</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a/b</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">algorithm5</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a%b</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">algorithm6</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a&lt;&lt;b</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">algorithm7</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a^b</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå®šä¹‰ä¸€ä¸ªmapå‡½æ•°</p><p><img src="/../image/766.png" class="lazyload" data-srcset="/../image/766.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="766"></p><p>åé¢å°±æ˜¯å®šä¹‰encryptå‡½æ•°ï¼Œstructå‡½æ•°å’Œcheckå‡½æ•°</p><p><img src="/../image/767.png" class="lazyload" data-srcset="/../image/767.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="767"></p><p>è‡³æ­¤æˆ‘ä»¬å¯¹äºcheck_secretè¿™ä¸ªæ¨¡å—åˆ†æå®Œäº†ï¼Œè¿™ä¸ªæ¨¡å—å…¨éƒ½æ˜¯åˆå§‹åŒ–çš„ä¸€äº›ä¸œè¥¿ï¼Œç„¶è€Œæˆ‘ä»¬åœ¨main.pyè°ƒç”¨çš„æ˜¯checkå‡½æ•°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æcheckå‡½æ•°</p><p>æˆ‘ä»¬ä»ä¸Šå¾€ä¸‹è¿›è¡Œåˆ†æ</p><p>å‘ç°è¿™é‡Œè°ƒç”¨äº†rangeå‡½æ•°</p><p><img src="/../image/769.png" class="lazyload" data-srcset="/../image/769.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="769"></p><p>ç„¶åè¿™é‡Œè°ƒç”¨äº†s_box</p><p><img src="/../image/770.png" class="lazyload" data-srcset="/../image/770.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="770"></p><p>æ¢³ç†ä¸€ä¸‹é€»è¾‘</p><p>å®ç°äº†ä¸€ä¸ªæ›¿æ¢çš„åŠŸèƒ½</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">change</span>(<span class="params">s_box,your_input</span>):</span><br><span class="line">    change_input=[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(your_input)):</span><br><span class="line">        chage_input[i]=your_input[s_box[i]]</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å®ç°äº†ä¸€ä¸ªstructå‡½æ•°</p><p><img src="/../image/771.png" class="lazyload" data-srcset="/../image/771.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="771"></p><p><img src="/../image/772.png" class="lazyload" data-srcset="/../image/772.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="772"></p><p><img src="/../image/773.png" class="lazyload" data-srcset="/../image/773.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="773"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®ç°ä»¥ä¸‹è¿™ä¸ªæ“ä½œ</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(change_input)\\<span class="number">4</span>)</span><br><span class="line">     enc[i]=struct.unpack(<span class="string">&#x27;&lt;I&#x27;</span>,change[<span class="number">4</span>*i:<span class="number">4</span>*i+<span class="number">4</span>])[<span class="number">0</span>]</span><br><span class="line"><span class="comment">#è¿™ä¸ªæ“ä½œæ˜¯ä¸ºäº†ç”Ÿæˆ32ä½çš„ç»“æœ</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¸‹é¢å¼€å§‹åŠ å¯†</p><p><img src="/../image/774.png" class="lazyload" data-srcset="/../image/774.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="774"></p><p>å‘ç°å®ƒè¿˜è°ƒç”¨äº†ä¸‹é¢çš„xixiï¼Œå†å¾€ä¸‹åˆ†æ</p><p>è¿™é‡Œæœ‰ä¸ª+2æ“ä½œ</p><p><img src="/../image/775.png" class="lazyload" data-srcset="/../image/775.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="775"></p><p>åé¢åˆè°ƒç”¨äº†ä¸€æ¬¡åŠ å¯†å‡½æ•°ï¼Œä½†æ˜¯è°ƒç”¨çš„æ˜¯haha</p><p><img src="/../image/776.png" class="lazyload" data-srcset="/../image/776.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="776"></p><p>ç„¶ååé¢è¿˜æœ‰ä¸€ä¸ª+2æ“ä½œï¼Œä½†æ˜¯åˆ°è¿™é‡Œæˆ‘ä»¬è¿˜æ— æ³•ç¡®è®¤å®ƒçœŸæ­£çš„åŠ å¯†é€»è¾‘æ˜¯ä»€ä¹ˆï¼Œç„¶åæˆ‘ä»¬å»çœ‹encryptå‡½æ•°</p><p>çœŸæ­£çš„åŠ å¯†åœ¨_pyx_pf_12check_secret_16encrypté‡Œé¢</p><p>ç°åœ¨å¼€å§‹æ‰æ˜¯çœŸæ­£çš„é€†å‘ğŸˆšï¼Œä¸€å…±æœ‰5000å¤šè¡Œï¼Œé€†å‘—è°èƒ½é€†è¿‡ä½ å•Š</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…‰å®šä¹‰å˜é‡éƒ½æœ‰500å¤šè¡Œäº†</p><p><img src="/../image/777.png" class="lazyload" data-srcset="/../image/777.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="777"></p><p>æˆ‘ä»¬å‘ç°è¿™ä¸ªåŠ å¯†å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°</p><p><img src="/../image/778.png" class="lazyload" data-srcset="/../image/778.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="778"></p><p>å…¶å®æˆ‘ä»¬è¿˜å¯ä»¥å¤§èƒ†å†™ä¸€ä¸‹é‚£ä¸ªåŠ å¯†çš„é€»è¾‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(enc),<span class="number">2</span>):</span><br><span class="line">    encrypt(enc[i:i+<span class="number">2</span>],xixi)</span><br><span class="line">    encrypt(enc[i:i+<span class="number">2</span>],haha)</span><br></pre></td></tr></table></figure><p>çœ‹èµ·æ¥å¾ˆåƒteaåŠ å¯†</p><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªuint32çš„å˜é‡</p><p><img src="/../image/779.png" class="lazyload" data-srcset="/../image/779.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="779"></p><p>ä»ä¸Šå¾€ä¸‹åˆ†æï¼Œæˆ‘ä»¬å‘ç°è¿˜å®šä¹‰äº†å¦ä¸€ä¸ªuint32çš„å˜é‡</p><p>ç„¶åæˆ‘ä»¬æœ‰æ³¨æ„åˆ°äº†ä¸€ä¸ªå˜é‡</p><p><img src="/../image/780.png" class="lazyload" data-srcset="/../image/780.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="780"></p><p>å®ƒåªæœ‰ä¸¤å¤„å¼•ç”¨ï¼Œå¯ä»¥çŒœæµ‹ä¸€ä¸‹å®ƒç»è¿‡äº†32æ¬¡å¾ªç¯â€˜</p><p><img src="/../image/781.png" class="lazyload" data-srcset="/../image/781.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="781"></p><p><img src="/../image/782.png" class="lazyload" data-srcset="/../image/782.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="782"></p><p><img src="/../image/783.png" class="lazyload" data-srcset="/../image/783.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="783"></p><p><img src="/../image/784.png" class="lazyload" data-srcset="/../image/784.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="784"></p><p>â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦..åé¢çš„å›¾å¾ˆå¤šï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°å®ƒç»å†äº†å¥½å¤šæ¬¡é‡å¤çš„æ“ä½œï¼Œç„¶åè¿˜è°ƒç”¨äº†å¤§é‡çš„map</p><p>æ¢³ç†ä¸€ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(addï¼Œ<span class="built_in">map</span>(xorï¼Œ<span class="built_in">map</span>(xorï¼Œ<span class="built_in">map</span>(addï¼Œ<span class="built_in">map</span>(rsl <span class="number">4</span>ï¼Œ<span class="built_in">map</span>(addï¼Œ<span class="built_in">map</span>(rsr <span class="number">5</span>ï¼Œ<span class="built_in">map</span>ï¼ˆadd</span><br><span class="line"></span><br><span class="line"><span class="built_in">map</span>(add <span class="number">0x12345678</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">map</span>(addï¼Œ<span class="built_in">map</span>(xorï¼Œ<span class="built_in">map</span>(xorï¼Œ<span class="built_in">map</span>(addï¼Œ<span class="built_in">map</span>(rsl <span class="number">4</span>ï¼Œ<span class="built_in">map</span>(addï¼Œ<span class="built_in">map</span>(rsr <span class="number">5</span>ï¼Œ<span class="built_in">map</span>(add</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">map=&#123;</span></span><br><span class="line"><span class="string">&#x27;add&#x27;:&lt;built-in function algorithm1&gt;,</span></span><br><span class="line"><span class="string">&#x27;sub&#x27;:&lt;built-in function algorithm2&gt;,  </span></span><br><span class="line"><span class="string">&#x27;mul&#x27;:&lt;built-in function algorithm3&gt;,</span></span><br><span class="line"><span class="string">&#x27;div&#x27;:&lt;built-in function algorithm4&gt;,</span></span><br><span class="line"><span class="string">&#x27;mod&#x27;:&lt;built-in function algorithm5&gt;,</span></span><br><span class="line"><span class="string">&#x27;rsl&#x27;:&lt;built-in function algorithm6&gt;,</span></span><br><span class="line"><span class="string">&#x27;rsr&#x27;:&lt;built-in function algorithm7&gt;,</span></span><br><span class="line"><span class="string">&#x27;xor&#x27;:&lt;built-in function algorithm8&gt;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç¡®å®šè¿™å°±æ˜¯ä¸ªteaåŠ å¯†</p><p>ç„¶åArr3stY0uæˆ˜é˜Ÿçš„å¸ˆå‚…ä»¬æä¾›äº†å¦ä¸€ä¸ªæ€è·¯</p><p><a href="https://mp.weixin.qq.com/s/IwKxtqDd-5v0xhg9UzKe-g">https://mp.weixin.qq.com/s/IwKxtqDd-5v0xhg9UzKe-g</a></p><p>å› ä¸ºè¿™ä¸ªåŠ¨æ€é“¾æ¥åº“æ˜¯å·²ç»æ‰“åŒ…å¥½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨é‡Œé¢çš„å‡½æ•°ç„¶åï¼Œå†æ‰“å°å‡ºæ¥ä»–ä»¬çš„æ“ä½œ(ç›¸å½“äºå°±æ˜¯hookæ“ä½œ)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> check_secret</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hook_add</span>(<span class="params">a,b</span>):</span><br><span class="line">    res=check_secret.algorithm1(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;0x<span class="subst">&#123;res:08x&#125;</span> = 0x<span class="subst">&#123;a:08x&#125;</span> + 0x<span class="subst">&#123;b:08x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hook_sud</span>(<span class="params">a,b</span>):</span><br><span class="line">    res=check_secret.algorithm1(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;0x<span class="subst">&#123;res:08x&#125;</span> = 0x<span class="subst">&#123;a:08x&#125;</span> - 0x<span class="subst">&#123;b:08x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hook_mul</span>(<span class="params">a,b</span>):</span><br><span class="line">    res=check_secret.algorithm1(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;0x<span class="subst">&#123;res:08x&#125;</span> = 0x<span class="subst">&#123;a:08x&#125;</span> * 0x<span class="subst">&#123;b:08x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hook_div</span>(<span class="params">a,b</span>):</span><br><span class="line">    res=check_secret.algorithm1(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;0x<span class="subst">&#123;res:08x&#125;</span> = 0x<span class="subst">&#123;a:08x&#125;</span> / 0x<span class="subst">&#123;b:08x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hook_mod</span>(<span class="params">a,b</span>):</span><br><span class="line">    res=check_secret.algorithm1(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;0x<span class="subst">&#123;res:08x&#125;</span> = 0x<span class="subst">&#123;a:08x&#125;</span> % 0x<span class="subst">&#123;b:08x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hook_rsl</span>(<span class="params">a,b</span>):</span><br><span class="line">    res=check_secret.algorithm1(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;0x<span class="subst">&#123;res:08x&#125;</span> = 0x<span class="subst">&#123;a:08x&#125;</span> &lt;&lt; 0x<span class="subst">&#123;b:08x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hook_rsr</span>(<span class="params">a,b</span>):</span><br><span class="line">    res=check_secret.algorithm1(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;0x<span class="subst">&#123;res:08x&#125;</span> = 0x<span class="subst">&#123;a:08x&#125;</span> &gt;&gt; 0x<span class="subst">&#123;b:08x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hook_xor</span>(<span class="params">a,b</span>):</span><br><span class="line">    res=check_secret.algorithm1(a,b)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;0x<span class="subst">&#123;res:08x&#125;</span> = 0x<span class="subst">&#123;a:08x&#125;</span> ^ 0x<span class="subst">&#123;b:08x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">check_secret.<span class="built_in">map</span>[<span class="string">&#x27;add&#x27;</span>] = hook_add</span><br><span class="line">check_secret.<span class="built_in">map</span>[<span class="string">&#x27;sub&#x27;</span>] = hook_sub</span><br><span class="line">check_secret.<span class="built_in">map</span>[<span class="string">&#x27;mul&#x27;</span>] = hook_mul</span><br><span class="line">check_secret.<span class="built_in">map</span>[<span class="string">&#x27;div&#x27;</span>] = hook_div</span><br><span class="line">check_secret.<span class="built_in">map</span>[<span class="string">&#x27;mod&#x27;</span>] = hook_mod</span><br><span class="line">check_secret.<span class="built_in">map</span>[<span class="string">&#x27;rsl&#x27;</span>] = hook_rsl</span><br><span class="line">check_secret.<span class="built_in">map</span>[<span class="string">&#x27;rsr&#x27;</span>] = hook_rsr</span><br><span class="line">check_secret.<span class="built_in">map</span>[<span class="string">&#x27;xor&#x27;</span>] = hook_xor</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(check_secret.encrypt([<span class="number">0x11111111</span>,<span class="number">0x2222222</span>]),check_secret.xixi)</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åŠ å¯†çš„è¿‡ç¨‹</p><p><img src="/../image/785.png" class="lazyload" data-srcset="/../image/785.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="785"></p><h2 id="exp"><a href="#exp" class="headerlink" title="exp"></a>exp</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">decipher</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> num_rounds, <span class="type">uint32_t</span> v[<span class="number">2</span>], <span class="type">uint32_t</span> <span class="type">const</span> key[<span class="number">4</span>])</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> i;</span><br><span class="line">    <span class="type">uint32_t</span> v0 = v[<span class="number">0</span>], v1 = v[<span class="number">1</span>], delta = <span class="number">0x12345678</span>, sum = delta * num_rounds;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; num_rounds; i++) &#123;</span><br><span class="line">        v1 -= ((v0 &lt;&lt; <span class="number">4</span>) + key[<span class="number">2</span>]) ^ (v0 + sum) ^ ((v0 &gt;&gt; <span class="number">5</span>) + key[<span class="number">3</span>]);</span><br><span class="line">        sum -= delta;</span><br><span class="line">        v0 -= ((v1 &lt;&lt; <span class="number">4</span>) + key[<span class="number">0</span>]) ^ (v1 + sum) ^ ((v1 &gt;&gt; <span class="number">5</span>) + key[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    v[<span class="number">0</span>] = v0; v[<span class="number">1</span>] = v1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> xixi[] = &#123; <span class="number">3540658286</span>,<span class="number">3391361277</span>,<span class="number">1321275334</span>,<span class="number">3918321625</span> &#125;;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> haha[] = &#123; <span class="number">1272471749</span>,<span class="number">2262110437</span>,<span class="number">697301573</span>,<span class="number">1088211398</span> &#125;;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> enc[] = &#123; <span class="number">1386864498</span>,<span class="number">2877138732</span>,<span class="number">1628978326</span>,<span class="number">881564191</span>,<span class="number">1437614165</span>,<span class="number">4227562200</span>,<span class="number">1606883458</span>,<span class="number">3679355295</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i += <span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line">decipher(<span class="number">32</span>,enc + i, haha);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i += <span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line">decipher(<span class="number">32</span>,enc + i, xixi);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> sbox[] = &#123; <span class="number">12</span>, <span class="number">17</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">27</span>, <span class="number">31</span>, <span class="number">15</span>, <span class="number">11</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">1</span>, <span class="number">26</span>, <span class="number">22</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">18</span>,</span><br><span class="line"><span class="number">25</span>, <span class="number">29</span>, <span class="number">19</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">14</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">23</span>, <span class="number">2</span>, <span class="number">28</span>, <span class="number">20</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">32</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (sbox[j] == i)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, *((<span class="type">unsigned</span> <span class="type">char</span>*)enc + j));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»¥ä¸‹ä¸ºé™„ä»¶é“¾æ¥ï¼Œä¾›å„ä½å¸ˆå‚…ä¸‹è½½ç»ƒä¹ &lt;br&gt;&lt;a href=&quot;https://wwb.lanzout.com/i7mkm21aeegd&quot;&gt;https://wwb.lanzout.com/i7mkm21aeegd&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¶çƒ­æ‰“é“ï¼Œå‰ä¸€é˜µå­æ‰“å›½èµ›é‡åˆ°äº†cpytho</summary>
      
    
    
    
    <category term="CTF" scheme="https://5m10v3.github.io/categories/CTF/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºçˆ†ç ´è¿·å®«è·¯å¾„çš„ä¸€ç³»åˆ—æ€è€ƒ</title>
    <link href="https://5m10v3.github.io/2024/06/07/%E5%85%B3%E4%BA%8E%E7%88%86%E7%A0%B4%E8%BF%B7%E5%AE%AB%E8%B7%AF%E5%BE%84%E7%9A%84%E4%B8%80%E7%B3%BB%E5%88%97%E6%80%9D%E8%80%83/"/>
    <id>https://5m10v3.github.io/2024/06/07/%E5%85%B3%E4%BA%8E%E7%88%86%E7%A0%B4%E8%BF%B7%E5%AE%AB%E8%B7%AF%E5%BE%84%E7%9A%84%E4%B8%80%E7%B3%BB%E5%88%97%E6%80%9D%E8%80%83/</id>
    <published>2024-06-06T16:00:00.000Z</published>
    <updated>2024-06-09T09:10:00.642Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜ç›®é“¾æ¥åœ¨æ­¤ï¼Œä¾›å„ä½å¸ˆå‚…ä¸‹è½½ç»ƒä¹ </p><p><a href="https://wwb.lanzout.com/iWuvC216lmqj">https://wwb.lanzout.com/iWuvC216lmqj</a></p><p>å‰å‡ å¤©å­¦é•¿ç»™äº†ä¸€é“mazeçš„é¢˜ï¼ŒåŠ¨æ€è°ƒè¯•è¿‡ç¨‹å¯è°“éå¸¸è‰°éš¾(å¯¹æˆ‘ç°åœ¨çš„æ°´å¹³è€Œè¨€)ï¼Œäºæ˜¯å­¦é•¿æä¾›äº†ä¸€ç§ç”¨subprocessçš„æ–¹æ³•</p><h2 id="ç¨‹åºåˆ†æ"><a href="#ç¨‹åºåˆ†æ" class="headerlink" title="ç¨‹åºåˆ†æ"></a>ç¨‹åºåˆ†æ</h2><p><img src="/../image/726.png" class="lazyload" data-srcset="/../image/726.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="726"></p><p>é¦–å…ˆé€šè¿‡å­—ç¬¦ä¸²å®šä½åˆ°ä¸»å‡½æ•°é‚£é‡Œï¼Œæˆ‘ä»¬å‘ç°cmpé‚£é‡Œå…¶å®æ˜¯ä¸€ä¸ªé•¿åº¦æ ¡éªŒï¼Œåˆ¤æ–­è·¯å¾„çš„é•¿åº¦æ˜¯ä¸æ˜¯ä¸º140</p><p><img src="/../image/727.png" class="lazyload" data-srcset="/../image/727.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="727"></p><p>è¿™é‡Œä¸ºåˆ¤æ–­è·¯å¾„æ–¹å‘</p><p><img src="/../image/728.png" class="lazyload" data-srcset="/../image/728.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="728"></p><p>ä¸­é—´è¿‡ç¨‹å¤ªå¤æ‚ï¼Œæˆ‘ä»¬ç›´æ¥è·³åˆ°åé¢ï¼Œæˆ‘ä»¬å‘ç°ä»–åˆ¤æ–­æ‰€å¤„ä½ç½®æ˜¯ä¸æ˜¯ä¸º0ï¼Œè¿˜æœ‰åˆ¤æ–­æœ€ååˆ°è¾¾ä½ç½®å¯¹ä¸å¯¹çš„</p><p>ç»è¿‡è¿™ä¸ªåˆ†ææˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿·å®«åœ¨å“ªï¼Œå› æ­¤æˆ‘ä»¬æ‰è¦å°è¯•çˆ†ç ´çš„æ–¹æ³•ã€‚</p><h2 id="çˆ†ç ´å¤„ç†"><a href="#çˆ†ç ´å¤„ç†" class="headerlink" title="çˆ†ç ´å¤„ç†"></a>çˆ†ç ´å¤„ç†</h2><p>é¦–å…ˆç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦æŠŠé•¿åº¦æ ¡éªŒç»™patchæ‰</p><p><img src="/../image/729.png" class="lazyload" data-srcset="/../image/729.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="729"></p><p>é‡ç‚¹çš„patchåœ¨åé¢ï¼Œæˆ‘ä»¬ä¸ºäº†ä¸€æ­¥ä¸€æ­¥è¿›è¡Œçˆ†ç ´ï¼Œæˆ‘ä»¬è¦å¯¹æ¯ä¸€æ­¥è¿›è¡Œçˆ†ç ´</p><p>ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåé¢ä¸ç®¡èµ°ä¸èµ°å¯¹éƒ½ä¼šè¾“å‡º</p><p>æˆ‘ä»¬å¯ä»¥å…ˆå†™ä¸€ä¸ªç®€å•çš„è¯•éªŒä¸€ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">printable=[<span class="string">&#x27;w&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(printable)):</span><br><span class="line">    sh=subprocess.Popen(<span class="string">&quot;./mapmap&quot;</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE, stdin=subprocess.PIPE)</span><br><span class="line">    sh.stdin.write((printable[i]+<span class="string">&#x27;\n&#x27;</span>).encode())</span><br><span class="line">    sh.stdin.flush()</span><br><span class="line">    output ,_ =sh.communicate()</span><br><span class="line">    <span class="built_in">print</span>(output)</span><br></pre></td></tr></table></figure><p><img src="/../image/730.png" class="lazyload" data-srcset="/../image/730.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="730"></p><p>æˆ‘ä»¬å‘ç°æ ¹æœ¬æ— æ³•åˆ¤æ–­æ˜¯ä¸æ˜¯èµ°å¯¹äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†patchä¸€ä¸‹</p><p><img src="/../image/728.png" class="lazyload" data-srcset="/../image/728.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="728"></p><p><img src="/../image/731.png" class="lazyload" data-srcset="/../image/731.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="731"></p><p>æŠŠä¸‹é¢é‚£ä¸ªæŒ‡å‘wrongçš„åœ°å€æ”¹ä¸ºæŒ‡å‘â€™   what()â€™çš„åœ°å€</p><p>æˆ‘ä»¬è¿™ä¸ªæ—¶å€™å¯ä»¥å†çœ‹ä¸€ä¸‹</p><p><img src="/../image/732.png" class="lazyload" data-srcset="/../image/732.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="732"></p><p>å‘ç°æœ‰ä¸ä¸€æ ·çš„å›æ˜¾äº†ï¼Œæˆ‘ä»¬æ ¹æ®è¿™ä¸ªå¯ä»¥å†™ä¸€ä¸ªè„šæœ¬ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒåœ¨ç¨‹åºé‡Œé¢æ¯èµ°ä¸€æ­¥ä¸ä¼šæŠŠèµ°è¿‡çš„ç»™æ ‡è®°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—è‡ªå·±æ ‡è®°ä¸€ä¸‹ï¼Œç”±äºæ²¡æœ‰å†™è¿™ä¸ªæ ‡è®°ï¼Œå¯¼è‡´è„šæœ¬è·‘äº†å¥½ä¹…ä¹Ÿæ²¡è·‘å‡ºæ¥ã€‚</p><h2 id="Exp"><a href="#Exp" class="headerlink" title="Exp"></a>Exp</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">path, n, x_location, y_location, count, try_direction, visited_paths, coordinates</span>):</span><br><span class="line">    <span class="keyword">if</span> n &lt; count:</span><br><span class="line">        <span class="keyword">for</span> direction <span class="keyword">in</span> try_direction:</span><br><span class="line">            process = subprocess.Popen(<span class="string">&quot;./mapmap&quot;</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE, stdin=subprocess.PIPE)</span><br><span class="line">            next_path = path + direction</span><br><span class="line">            process.stdin.write((next_path + <span class="string">&#x27;\n&#x27;</span>).encode())</span><br><span class="line">            process.stdin.flush()</span><br><span class="line">            output, _ = process.communicate()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="string">b&#x27;wrong\n&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> output:</span><br><span class="line">                new_x_location, new_y_location = x_location, y_location</span><br><span class="line">                <span class="keyword">if</span> direction == <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                    new_x_location += <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> direction == <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">                    new_x_location -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> direction == <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                    new_y_location -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> direction == <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                    new_y_location += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> (new_x_location, new_y_location) <span class="keyword">not</span> <span class="keyword">in</span> coordinates:</span><br><span class="line">                    <span class="built_in">print</span>(path)</span><br><span class="line">                    coordinates[(new_x_location, new_y_location)] = next_path</span><br><span class="line">                    dfs(next_path, <span class="built_in">len</span>(next_path), new_x_location, new_y_location, count, try_direction, visited_paths, coordinates)</span><br><span class="line">    <span class="keyword">elif</span> n == count:</span><br><span class="line">            visited_paths.append(path)</span><br><span class="line">            coordinates[(x_location, y_location)] = path</span><br><span class="line"></span><br><span class="line"><span class="comment"># DFS start</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start_path = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    try_direction = [<span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;a&#x27;</span>]</span><br><span class="line">    count = <span class="number">140</span> </span><br><span class="line">    visited_paths = []</span><br><span class="line">    coordinates = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    x_location = <span class="number">0</span></span><br><span class="line">    y_location = <span class="number">0</span></span><br><span class="line">    coordinates[(x_location, y_location)] = start_path</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\nVisit paths:&quot;</span>)</span><br><span class="line">    dfs(start_path, <span class="built_in">len</span>(start_path), x_location, y_location, count, try_direction, visited_paths, coordinates)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\nFinal paths:&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> path <span class="keyword">in</span> visited_paths:</span><br><span class="line">        process = subprocess.Popen(<span class="string">&quot;./mapmap&quot;</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE, stdin=subprocess.PIPE)</span><br><span class="line">        process.stdin.write((path + <span class="string">&#x27;\n&#x27;</span>).encode())</span><br><span class="line">        process.stdin.flush()</span><br><span class="line">        output, _ = process.communicate()</span><br><span class="line">        <span class="keyword">if</span> <span class="string">b&#x27;flag&#123;md5(your input)&#125;\n&#x27;</span> <span class="keyword">in</span> output:</span><br><span class="line">            <span class="built_in">print</span>(path)</span><br></pre></td></tr></table></figure><p><img src="/../image/733.png" class="lazyload" data-srcset="/../image/733.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="733"></p><p>å·®ä¸å¤šäºŒåç§’çš„æ—¶é—´è·‘å‡ºæ¥</p><p>æˆ‘è‡ªå·±çš„è™šæ‹Ÿç¯å¢ƒæ˜¯kali 2023.3 å†…å­˜ 4G å¤„ç†å™¨2x2</p><p>å¦‚æœå¸ˆå‚…ä»¬æœ‰æ›´å¥½çš„æ€è·¯æ¬¢è¿æ¥äº¤æµğŸ˜ğŸ˜ğŸ˜ğŸ˜</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://docs.python.org/zh-cn/3/library/subprocess.html#using-the-subprocess-module">https://docs.python.org/zh-cn/3/library/subprocess.html#using-the-subprocess-module</a></p><p><a href="https://www.cnblogs.com/lordtianqiyi/articles/16588649.html">https://www.cnblogs.com/lordtianqiyi/articles/16588649.html</a></p><p><a href="https://bbs.kanxue.com/thread-281796.html">https://bbs.kanxue.com/thread-281796.html</a></p><p><a href="http://z221x.cc/index.php/2024/01/06/nctf-ezvm%e6%8f%92%e6%a1%a9%e7%88%86%e7%a0%b4%e7%9a%84%e5%a4%8d%e7%8e%b0/">http://z221x.cc/index.php/2024/01/06/nctf-ezvm%e6%8f%92%e6%a1%a9%e7%88%86%e7%a0%b4%e7%9a%84%e5%a4%8d%e7%8e%b0/</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é¢˜ç›®é“¾æ¥åœ¨æ­¤ï¼Œä¾›å„ä½å¸ˆå‚…ä¸‹è½½ç»ƒä¹ &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://wwb.lanzout.com/iWuvC216lmqj&quot;&gt;https://wwb.lanzout.com/iWuvC216lmqj&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å‰å‡ å¤©å­¦é•¿ç»™äº†ä¸€é“mazeçš„é¢˜ï¼ŒåŠ¨æ€</summary>
      
    
    
    
    <category term="CTF" scheme="https://5m10v3.github.io/categories/CTF/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥è®°(25)</title>
    <link href="https://5m10v3.github.io/2024/06/04/%E6%97%A5%E8%AE%B0(25)/"/>
    <id>https://5m10v3.github.io/2024/06/04/%E6%97%A5%E8%AE%B0(25)/</id>
    <published>2024-06-03T16:00:00.000Z</published>
    <updated>2024-06-09T09:14:14.878Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ç ”ç©¶ä¸€äº›èƒ½å¤Ÿæ’æ¡©çˆ†ç ´çš„æ–¹æ³•ï¼Œç›®å‰è¿˜åœ¨æ€»ç»“ï¼Œå¯èƒ½è¦è¿‡å‡ å¤©æ‰èƒ½å½»åº•æ€»ç»“å‡ºæ¥ã€‚<br>æ­£åœ¨åŠªåŠ›èµ¶åˆ¶</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ€è¿‘åœ¨ç ”ç©¶ä¸€äº›èƒ½å¤Ÿæ’æ¡©çˆ†ç ´çš„æ–¹æ³•ï¼Œç›®å‰è¿˜åœ¨æ€»ç»“ï¼Œå¯èƒ½è¦è¿‡å‡ å¤©æ‰èƒ½å½»åº•æ€»ç»“å‡ºæ¥ã€‚&lt;br&gt;æ­£åœ¨åŠªåŠ›èµ¶åˆ¶&lt;/p&gt;
</summary>
      
    
    
    
    <category term="æ—¥è®°" scheme="https://5m10v3.github.io/categories/%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥è®°(24)</title>
    <link href="https://5m10v3.github.io/2024/06/01/%E6%97%A5%E8%AE%B0(24)/"/>
    <id>https://5m10v3.github.io/2024/06/01/%E6%97%A5%E8%AE%B0(24)/</id>
    <published>2024-05-31T16:00:00.000Z</published>
    <updated>2024-06-09T09:14:06.765Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸€æ¬¡å†™æ—¥è®°å·²ç»æ˜¯åŠä¸ªå¤šæœˆå‰äº†ï¼Œè¿™åŠä¸ªå¤šæœˆå¤ªå¿™äº†ï¼Œè¿˜å‡ºå»äº†ä¸€å‘¨çš„æ—¶é—´ã€‚<br>å›æ¥è¿™å‡ å¤©å‹‰å¼ºæŠŠçŠ¶æ€è°ƒæ•´äº†å›æ¥ï¼Œä»Šå¤©æ‰“äº†ä¸€ä¸ªæ¯”èµ›ï¼Œåšäº†ä¸€ä¸ªè¿·å®«é¢˜ï¼Œä½†ä¸æ˜¯ä¼ ç»Ÿçš„é‚£ç§è¿·å®«é¢˜ï¼Œè¿™ä¸ªæ¯”èµ›çš„æ—¶é—´ä¹ŸçŸ­ï¼Œæœ€åå°±å·®ä¸€åˆ†é’Ÿï¼ä¸€åˆ†é’Ÿï¼ï¼Œå°±èƒ½æŠŠè¿™ä¸ªflagç»™äº¤ä¸Šå»äº†ğŸ˜”ğŸ˜”ğŸ˜”</p><p>æ€»çš„æ¥è¯´è‡ªå·±å¯¹è¿™ç±»é¢˜çš„æŒæ¡ç¨‹åº¦è¿˜æ˜¯ä¸è¶³ï¼Œä»Šå¤©å­¦é•¿åˆç»™äº†ä¸€é“è¿·å®«çš„é¢˜ï¼Œæ¯”è¾ƒéš¾è°ƒï¼Œæ˜¯ä¸€ä¸ªç±»ä¼¼æ ‘çŠ¶çš„</p><p>è¿‘æœŸè§„åˆ’:</p><ul><li>å¤šå¤ç°ä¸€äº›å¤§æ¯”èµ›çš„é¢˜ç›®</li><li>åŒæ—¶åŸºæœ¬åŠŸä¹Ÿä¸èƒ½è½ä¸‹</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸Šä¸€æ¬¡å†™æ—¥è®°å·²ç»æ˜¯åŠä¸ªå¤šæœˆå‰äº†ï¼Œè¿™åŠä¸ªå¤šæœˆå¤ªå¿™äº†ï¼Œè¿˜å‡ºå»äº†ä¸€å‘¨çš„æ—¶é—´ã€‚&lt;br&gt;å›æ¥è¿™å‡ å¤©å‹‰å¼ºæŠŠçŠ¶æ€è°ƒæ•´äº†å›æ¥ï¼Œä»Šå¤©æ‰“äº†ä¸€ä¸ªæ¯”èµ›ï¼Œåšäº†ä¸€ä¸ªè¿·å®«é¢˜ï¼Œä½†ä¸æ˜¯ä¼ ç»Ÿçš„é‚£ç§è¿·å®«é¢˜ï¼Œè¿™ä¸ªæ¯”èµ›çš„æ—¶é—´ä¹ŸçŸ­ï¼Œæœ€åå°±å·®ä¸€åˆ†é’Ÿï¼ä¸€åˆ†é’Ÿï¼ï¼Œå°±èƒ½æŠŠè¿™ä¸ªflagç»™äº¤ä¸Šå»äº†ğŸ˜”ğŸ˜”ğŸ˜”&lt;/p&gt;
&lt;p&gt;æ€»çš„</summary>
      
    
    
    
    <category term="æ—¥è®°" scheme="https://5m10v3.github.io/categories/%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>é€†å‘ç»ƒä¹ (äºŒ)</title>
    <link href="https://5m10v3.github.io/2024/06/01/%E9%80%86%E5%90%91%E7%BB%83%E4%B9%A0(%E4%BA%8C)/"/>
    <id>https://5m10v3.github.io/2024/06/01/%E9%80%86%E5%90%91%E7%BB%83%E4%B9%A0(%E4%BA%8C)/</id>
    <published>2024-05-31T16:00:00.000Z</published>
    <updated>2024-06-09T09:10:49.082Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥ç»ƒä¹ ä¸€é¢˜ä¹‹maze</p><p>é¢˜ç›®é“¾æ¥å¦‚ä¸‹ï¼Œä¾›å„ä½å¸ˆå‚…ä¸‹è½½</p><p><a href="https://wwb.lanzout.com/iH49D20nej0j">https://wwb.lanzout.com/iH49D20nej0j</a></p><p>ç›´æ¥å­—ç¬¦ä¸²å®šä½åˆ°mainå‡½æ•°</p><p>åç¼–è¯‘ä¹‹åæˆ‘ä»¬å‘ç°çœ‹ä¸æ‡‚ï¼Œé‚£äº›èµ°è¿·å®«çš„æ“ä½œæˆ‘ä»¬ä¹Ÿçœ‹ä¸åˆ°</p><p>æˆ‘ä»¬ç›´æ¥çœ‹å®ƒçš„CFG</p><p><img src="/../image/721.png" class="lazyload" data-srcset="/../image/721.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="721"></p><p>ç¬¬ä¸€ä¸ªcallæŒ‡ä»¤çš„è¿™ä¸ªå‡½æ•°ä¸ºè¾“å…¥å‡½æ•°ï¼Œä½†æ˜¯æ¯æ¬¡åªèƒ½è¾“å…¥ä¸€ä¸ªå­—ç¬¦</p><p>ç„¶åå¯¹ä½ è¾“å…¥çš„å­—ç¬¦å¤„ç†çš„åœ°æ–¹æ˜¯è¿™é‡Œ</p><p><img src="/../image/722.png" class="lazyload" data-srcset="/../image/722.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="722"></p><p>ç¬¬ä¸€æ­¥æˆ‘ä»¬åº”è¯¥å…ˆæ‰¾åˆ°è¿·å®«åœ¨å“ªé‡Œï¼Œç»è¿‡è°ƒè¯•</p><p><img src="/../image/723.png" class="lazyload" data-srcset="/../image/723.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="723"></p><p>r13è¿™é‡Œæ˜¯æˆ‘ä»¬çš„è¿·å®«ï¼Œç”±äºå®ƒæ¯æ¬¡åªå–rsi*4åœ°å€å¤„çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠè¿™ä¸ªç»™æ•´ç†å‡ºæ¥</p><p><img src="/../image/724.png" class="lazyload" data-srcset="/../image/724.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="724"></p><p>å¾—åˆ°è¿·å®«å›¾ä¹‹åæˆ‘ä»¬å°±è¦å¾—åˆ°å®ƒçš„æ–¹å‘æŒ‡ä»¤äº†ï¼Œç”±äºç¬¬ä¸€ä¸ªæˆ‘ä»¬æµ‹å‡ºæ¥çš„æ˜¯<strong>2</strong>ï¼Œè¿™ä¸ª<strong>2</strong>ä¹Ÿä¸æ˜¯æ²¡æœ‰æ ¹æ®çš„ï¼Œæˆ‘ä»¬å›åˆ°CFGé‚£é‡Œ</p><p><img src="/../image/722.png" class="lazyload" data-srcset="/../image/722.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="722"></p><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒå°†ä½ è¾“å…¥çš„å­—ç¬¦ä¸0x32è¿›è¡Œå¼‚æˆ–,ç„¶åå’Œ9è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ä¸ªä¸é‡è¦,é‡è¦çš„æ˜¯åé¢æœ‰ä¸‰ä¸ªcmpï¼Œè¿™ä¸‰ä¸ªcmpå¯¹åº”ä¸åŒçš„æŒ‡ä»¤ï¼Œè¦æ³¨æ„åˆ°åé¢è¿˜æœ‰ä¸ªæŒ‡ä»¤  <strong>add    rsi,rcx</strong>ï¼Œè€Œè¿™ä¸ªrsiåˆæŒ‡å‘æˆ‘ä»¬è·¯å¾„åæ ‡å¯¹åº”çš„åœ°å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">test eax,eax ;å¦‚æœç›¸ç­‰å¯¹åº”åé¢ rsi+=6  ç›¸å½“äºå°±æ˜¯å¾€ä¸Šèµ°ï¼Œç„¶åè¿™ä¸ªå¯ä»¥å¾—å‡ºæ¥è¾“å…¥çš„ç»“æœ:0x0^0x32=0x32--&gt;&#x27;2&#x27;</span><br><span class="line">cmp  eax, 6  ;å¦‚æœç›¸ç­‰å¯¹åº”åé¢ rsi-=1  ç›¸å½“äºå°±æ˜¯å¾€å·¦èµ°ï¼Œç„¶åè¿™ä¸ªå¯ä»¥å¾—å‡ºæ¥è¾“å…¥çš„ç»“æœ:0x6^0x32=0x34--&gt;&#x27;4&#x27;</span><br><span class="line">cmp  eax, 0Ah;å¦‚æœç›¸ç­‰å¯¹åº”åé¢ rsi-=6  ç›¸å½“äºå°±æ˜¯å¾€ä¸Šèµ°ï¼Œç„¶åè¿™ä¸ªå¯ä»¥å¾—å‡ºæ¥è¾“å…¥çš„ç»“æœ:0xA^0x32=0x38--&gt;&#x27;8&#x27; </span><br><span class="line">cmp  eax, 5Eh;å¦‚æœç›¸ç­‰å¯¹åº”åé¢ rsi+=1  ç›¸å½“äºå°±æ˜¯å¾€å·¦èµ°ï¼Œç„¶åè¿™ä¸ªå¯ä»¥å¾—å‡ºæ¥è¾“å…¥çš„ç»“æœ:0x5E^0x32=0x6c--&gt;&#x27;l&#x27;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¾—å‡ºè·¯å¾„</p><p><img src="/../image/725.png" class="lazyload" data-srcset="/../image/725.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="725"></p><p>å¾—åˆ°æˆ‘ä»¬çš„flag</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥ç»ƒä¹ ä¸€é¢˜ä¹‹maze&lt;/p&gt;
&lt;p&gt;é¢˜ç›®é“¾æ¥å¦‚ä¸‹ï¼Œä¾›å„ä½å¸ˆå‚…ä¸‹è½½&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://wwb.lanzout.com/iH49D20nej0j&quot;&gt;https://wwb.lanzout.com/iH49D20nej0j&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç›´</summary>
      
    
    
    
    <category term="é€†å‘" scheme="https://5m10v3.github.io/categories/%E9%80%86%E5%90%91/"/>
    
    
    <category term="ctfå­¦ä¹ " scheme="https://5m10v3.github.io/tags/ctf%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>2024CISCN(åˆèµ›)è§£é¢˜æ€è·¯åŠå¤ç°</title>
    <link href="https://5m10v3.github.io/2024/05/31/2024CISCN(%E5%88%9D%E8%B5%9B)%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF%E5%8F%8A%E5%A4%8D%E7%8E%B0/"/>
    <id>https://5m10v3.github.io/2024/05/31/2024CISCN(%E5%88%9D%E8%B5%9B)%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF%E5%8F%8A%E5%A4%8D%E7%8E%B0/</id>
    <published>2024-05-30T16:00:00.000Z</published>
    <updated>2024-06-09T14:07:06.451Z</updated>
    
    <content type="html"><![CDATA[<h2 id="asm-re"><a href="#asm-re" class="headerlink" title="asm_re"></a>asm_re</h2><p>ç›´æ¥æ‰‹æ’•æ±‡ç¼–</p><p><img src="/../image/688.png" class="lazyload" data-srcset="/../image/688.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="688"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ­£å‘åŠ å¯†è¿‡ç¨‹</span></span><br><span class="line">enc=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(enc)):</span><br><span class="line">    enc[i]*=<span class="number">0x50</span></span><br><span class="line">    enc[i]+=<span class="number">0x14</span></span><br><span class="line">    enc[i]^=<span class="number">0x4D</span></span><br><span class="line">    enc[i]+=<span class="number">0x1E</span></span><br></pre></td></tr></table></figure><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">enc=[<span class="number">0x1FD7</span>,<span class="number">0x21B7</span>,<span class="number">0x1E47</span>,<span class="number">0x2027</span>,<span class="number">0x26E7</span>,<span class="number">0x10D7</span>,<span class="number">0x1127</span>,<span class="number">0x2007</span>,<span class="number">0x11C7</span>,<span class="number">0x1E47</span>,<span class="number">0x1017</span>,<span class="number">0x1017</span>,<span class="number">0x11F7</span>,<span class="number">0x2007</span>,<span class="number">0x1037</span>,<span class="number">0x1107</span>,<span class="number">0x1F17</span>,<span class="number">0x10D7</span>,<span class="number">0x1017</span>,<span class="number">0x1017</span>,<span class="number">0x1F67</span>,<span class="number">0x1017</span>,<span class="number">0x11C7</span>,<span class="number">0x11C7</span>,<span class="number">0x1017</span>,<span class="number">0x1FD7</span>,<span class="number">0x1F17</span>,<span class="number">0x1107</span>,<span class="number">0x0F47</span>,<span class="number">0x1127</span>,<span class="number">0x1037</span>,<span class="number">0x1E47</span>,<span class="number">0x1037</span>,<span class="number">0x1FD7</span>,<span class="number">0x1107</span>,<span class="number">0x1FD7</span>,<span class="number">0x1107</span>,<span class="number">0x2787</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(enc)):</span><br><span class="line">    enc[i]-=<span class="number">0x1E</span></span><br><span class="line">    enc[i]^=<span class="number">0x4D</span></span><br><span class="line">    enc[i]-=<span class="number">0x14</span></span><br><span class="line">    enc[i]//=<span class="number">0x50</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">chr</span>(enc[i]),end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="androidso-re"><a href="#androidso-re" class="headerlink" title="androidso_re"></a>androidso_re</h2><p><img src="/../image/689.png" class="lazyload" data-srcset="/../image/689.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="689"></p><p>flagçš„åŠ å¯†åœ¨inspectè¿™ä¸ªç±»é‡Œé¢</p><p>ç»è¿‡äº†DES(CBCæ¨¡å¼)åŠ å¯†+base64åŠ å¯†</p><p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å¾—åˆ°DESåŠ å¯†çš„IVå’Œkey</p><p>åœ¨libSecret_entrance.soé‡Œé¢</p><p><img src="/../image/690.png" class="lazyload" data-srcset="/../image/690.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="690"></p><p>åˆ†åˆ«åœ¨getivå’Œgetkeyé‡Œé¢æŠŠa1çš„ç±»å‹å˜ä¸€ä¸‹æ”¹æˆ<strong>JNIEnv</strong>*</p><p><img src="/../image/691.png" class="lazyload" data-srcset="/../image/691.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="691"></p><p><img src="/../image/692.png" class="lazyload" data-srcset="/../image/692.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="692"></p><p>ç„¶åæˆ‘ä»¬ç›´æ¥åˆ©ç”¨jnitrace</p><p><img src="/../image/693.png" class="lazyload" data-srcset="/../image/693.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="693"></p><p><img src="/../image/694.png" class="lazyload" data-srcset="/../image/694.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="694"></p><p><img src="/../image/695.png" class="lazyload" data-srcset="/../image/695.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="695"></p><h2 id="whereThel1b"><a href="#whereThel1b" class="headerlink" title="whereThel1b"></a>whereThel1b</h2><p>å‡ºé¢˜äººè‡ªå·±ç¼–å†™çš„åŠ¨æ€é“¾æ¥åº“</p><p><img src="/../image/696.png" class="lazyload" data-srcset="/../image/696.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="696"></p><p>çœŸæ­£å¯¹æ˜æ–‡è¿›è¡Œå¤„ç†çš„å‡½æ•°æ—¶whereThelibè¿™ä¸ªåº“é‡Œé¢çš„trytryå‡½æ•°</p><p>æˆ‘ä»¬å¯ä»¥å…ˆæœç´¢initï¼Œå‘ç°æœ‰ä¸€ä¸ªPyInit_whereThel1bè¿™ä¸ªå‡½æ•°</p><p><img src="/../image/697.png" class="lazyload" data-srcset="/../image/697.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="697"></p><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ‰¾åˆ°åˆå§‹åŒ–è¿™äº›æ¨¡å—çš„åœ°æ–¹__pyx_moduledef</p><p><img src="/../image/698.png" class="lazyload" data-srcset="/../image/698.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="698"></p><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªéšæœºæ•°ç§å­</p><p>ç„¶ååé¢åˆè°ƒç”¨äº†whereistheflag1</p><p><img src="/../image/699.png" class="lazyload" data-srcset="/../image/699.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="699"></p><p>è¯´æ˜å¯¹å­—ç¬¦çš„å¤„ç†åœ¨whereistheflag1é‡Œé¢</p><p>åœ¨whereistheflag1é‡Œé¢å…ˆè°ƒç”¨äº†ä¸€ä¸ªbase64ï¼Œè¯´æ˜å…ˆè¿›è¡Œäº†base64åŠ å¯†</p><p><img src="/../image/700.png" class="lazyload" data-srcset="/../image/700.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="700"></p><p>è¿˜æ˜¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç”Ÿæˆçš„èŒƒå›´æ—¶æ˜¯**(0,len(arr))**</p><p><img src="/../image/701.png" class="lazyload" data-srcset="/../image/701.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="701"></p><p><img src="/../image/703.png" class="lazyload" data-srcset="/../image/703.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="703"></p><p>è¿™é‡Œè¿˜è°ƒç”¨äº†ä¸€ä¸‹xor</p><p><img src="/../image/702.png" class="lazyload" data-srcset="/../image/702.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="702"></p><p>è¿™é‡Œæ•´ç†ä¸€ä¸‹åŠ å¯†çš„é€»è¾‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">whereistheflag1</span>(<span class="params">pla</span>):</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨</span></span><br><span class="line">    result_list = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¼å…¥æ¨¡å— &#x27;base64&#x27; æˆ–è·å–å…¶å…¨å±€å˜é‡</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">import</span> base64</span><br><span class="line">        b64encode_func = base64.b64encode</span><br><span class="line">    <span class="keyword">except</span> ImportError:</span><br><span class="line">        <span class="keyword">raise</span> AttributeError(<span class="string">&quot;Cannot find the module &#x27;base64&#x27;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¼å…¥æ¨¡å— &#x27;random&#x27; æˆ–è·å–å…¶å…¨å±€å˜é‡</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">import</span> random</span><br><span class="line">        randint_func = random.randint</span><br><span class="line">    <span class="keyword">except</span> ImportError:</span><br><span class="line">        <span class="keyword">raise</span> AttributeError(<span class="string">&quot;Cannot find the module &#x27;random&#x27;&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹è¾“å…¥çš„å‚æ•°è¿›è¡Œç¼–ç å¤„ç†</span></span><br><span class="line">    encoded_pla = b64encode_func(pla)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–ç¼–ç åå­—ç¬¦ä¸²çš„é•¿åº¦</span></span><br><span class="line">    length = <span class="built_in">len</span>(encoded_pla)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># éšæœºç”Ÿæˆä¸€äº›æ•°å­—å¹¶ä¸ç¼–ç åçš„å­—ç¬¦ä¸²è¿›è¡Œå¼‚æˆ–æ“ä½œ</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(length):</span><br><span class="line">        random_int = randint_func(<span class="number">0</span>, <span class="built_in">len</span>(arr))</span><br><span class="line">        result_list.append(random_int ^ encoded_pla[_])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result_list</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encode</span>(<span class="params">enc</span>):</span><br><span class="line">    Â random.seed()<span class="comment">#éšæœºæ•°ç§å­çš„å‚æ•°ä¸çŸ¥é“</span></span><br><span class="line">     whereiftheflag1(enc)   </span><br><span class="line"><span class="keyword">if</span> __name__  == <span class="string">&quot;__main__&quot;</span> </span><br><span class="line">    enc=<span class="built_in">list</span>(<span class="built_in">input</span>())</span><br><span class="line">    enc=byte(enc)</span><br><span class="line">    encode()</span><br></pre></td></tr></table></figure><p>ç”±äºéšæœºæ•°ç§å­çš„å‚æ•°æˆ‘ä»¬ä¸çŸ¥é“</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">125</span>):</span><br><span class="line">Â random.seed(j)</span><br><span class="line">Â encry = [<span class="number">108</span>, <span class="number">117</span>, <span class="number">72</span>, <span class="number">80</span>, <span class="number">64</span>, <span class="number">49</span>, <span class="number">99</span>, <span class="number">19</span>, <span class="number">69</span>, <span class="number">115</span>, <span class="number">94</span>, <span class="number">93</span>, <span class="number">94</span>, <span class="number">115</span>, <span class="number">71</span>, <span class="number">95</span>, <span class="number">84</span>, <span class="number">89</span>, <span class="number">56</span>, <span class="number">101</span>, <span class="number">70</span>, <span class="number">2</span>, <span class="number">84</span>, <span class="number">75</span>, <span class="number">127</span>, <span class="number">68</span>, <span class="number">103</span>, <span class="number">85</span>, <span class="number">105</span>, <span class="number">113</span>, <span class="number">80</span>, <span class="number">103</span>, <span class="number">95</span>, <span class="number">67</span>, <span class="number">81</span>, <span class="number">7</span>, <span class="number">113</span>, <span class="number">70</span>, <span class="number">47</span>, <span class="number">73</span>, <span class="number">92</span>, <span class="number">124</span>, <span class="number">93</span>, <span class="number">120</span>, <span class="number">104</span>, <span class="number">108</span>, <span class="number">106</span>, <span class="number">17</span>, <span class="number">80</span>, <span class="number">102</span>, <span class="number">101</span>, <span class="number">75</span>, <span class="number">93</span>, <span class="number">68</span>, <span class="number">121</span>, <span class="number">26</span>]</span><br><span class="line">Â keys = [random.randint(<span class="number">0</span>, <span class="built_in">len</span>(encry)) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(encry))]</span><br><span class="line">Â flag = []</span><br><span class="line"></span><br><span class="line">Â <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(encry)):</span><br><span class="line">Â  Â  flag.append(keys[i] ^ encry[i])</span><br><span class="line">Â <span class="keyword">try</span>:</span><br><span class="line">Â  Â  Â <span class="built_in">print</span>(base64.b64decode((<span class="string">&#x27;&#x27;</span>.join(<span class="built_in">map</span>(<span class="built_in">chr</span>, flag))).encode()))</span><br><span class="line">Â <span class="keyword">except</span> binascii.Error:</span><br><span class="line">Â  Â  Â <span class="keyword">continue</span></span><br><span class="line"><span class="comment">#b&#x27;flag&#123;7f9a2d3c-07de-11ef-be5e-cf1e88674c0b&#125;&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="gdb-debug"><a href="#gdb-debug" class="headerlink" title="gdb_debug"></a>gdb_debug</h2><p>åŠ å¯†é€»è¾‘éå¸¸æ¸…æ¥š</p><p>æœ‰ä¸‰å¤„å¼‚æˆ–</p><p>åœ¨ç”Ÿæˆçš„éšæœºæ•°é‚£é‡Œï¼Œæœ‰ä¸€ä¸ªåŠæ³•</p><p>åœ¨å®ƒè°ƒç”¨randè¿™ä¸ªå‡½æ•°ä¹‹åï¼Œåé¢ä¸‹ä¸€ä¸ªæ¡ä»¶æ–­ç‚¹</p><p><img src="/../image/704.png" class="lazyload" data-srcset="/../image/704.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="704"></p><p>æˆ‘ä»¬éœ€è¦ä¸‹ä¸‰å¤„æ¡ä»¶æ–­ç‚¹ï¼Œç„¶åå¾—å‡ºä¸‰å¤„ç”Ÿæˆçš„éšæœºæ•°æ•°ç»„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> flag[<span class="number">38</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> enc[<span class="number">38</span>] = &#123; <span class="number">0x63</span>,<span class="number">0x6f</span>,<span class="number">0x6e</span>,<span class="number">0x67</span>,<span class="number">0x72</span>,<span class="number">0x61</span>,<span class="number">0x74</span>,<span class="number">0x75</span>,<span class="number">0x6c</span>,<span class="number">0x61</span>,<span class="number">0x74</span>,<span class="number">0x69</span>,<span class="number">0x6f</span>,<span class="number">0x6e</span>,<span class="number">0x73</span>,<span class="number">0x74</span>,<span class="number">0x6f</span>,<span class="number">0x79</span>,<span class="number">0x6f</span>,<span class="number">0x75</span>,<span class="number">0x63</span>,<span class="number">0x6f</span>,<span class="number">0x6e</span>,<span class="number">0x67</span>,<span class="number">0x72</span>,<span class="number">0x61</span>,<span class="number">0x74</span>,<span class="number">0x75</span>,<span class="number">0x6c</span>,<span class="number">0x61</span>,<span class="number">0x74</span>,<span class="number">0x69</span>,<span class="number">0x6f</span>,<span class="number">0x6e</span>,<span class="number">0x73</span>,<span class="number">0x74</span>,<span class="number">0x6f</span>,<span class="number">0x79</span> &#125;;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> arr1[<span class="number">38</span>] = &#123; <span class="number">0xBF</span>, <span class="number">0xD7</span>, <span class="number">0x2E</span>, <span class="number">0xDA</span>, <span class="number">0xEE</span>, <span class="number">0xA8</span>, <span class="number">0x1A</span>, <span class="number">0x10</span>, <span class="number">0x83</span>, <span class="number">0x73</span>, <span class="number">0xAC</span>, <span class="number">0xF1</span>, <span class="number">0x06</span>, <span class="number">0xBE</span>, <span class="number">0xAD</span>, <span class="number">0x88</span>, <span class="number">0x04</span>, <span class="number">0xD7</span>, <span class="number">0x12</span>, <span class="number">0xFE</span>, <span class="number">0xB5</span>, <span class="number">0xE2</span>, <span class="number">0x61</span>, <span class="number">0xB7</span>, <span class="number">0x3D</span>, <span class="number">0x07</span>, <span class="number">0x4A</span>, <span class="number">0xE8</span>, <span class="number">0x96</span>, <span class="number">0xA2</span>, <span class="number">0x9D</span>, <span class="number">0x4D</span>, <span class="number">0xBC</span>, <span class="number">0x81</span>, <span class="number">0x8C</span>, <span class="number">0xE9</span>, <span class="number">0x88</span>, <span class="number">0x78</span> &#125;;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> xor[] = &#123; <span class="number">0xd9</span>,<span class="number">0x0f</span>,<span class="number">0x18</span>,<span class="number">0xbd</span>,<span class="number">0xc7</span>,<span class="number">0x16</span>,<span class="number">0x81</span>,<span class="number">0xbe</span>,<span class="number">0xf8</span>,<span class="number">0x4a</span>,<span class="number">0x65</span>,<span class="number">0xf2</span>,<span class="number">0x5d</span>,<span class="number">0xab</span>,<span class="number">0x2b</span>,<span class="number">0x33</span>,<span class="number">0xd4</span>,<span class="number">0xa5</span>,<span class="number">0x67</span>,<span class="number">0x98</span>,<span class="number">0x9f</span>,<span class="number">0x7e</span>,<span class="number">0x2b</span>,<span class="number">0x5d</span>,<span class="number">0xc2</span>,<span class="number">0xaf</span>,<span class="number">0x8e</span>,<span class="number">0x3a</span>,<span class="number">0x4c</span>,<span class="number">0xa5</span>,<span class="number">0x75</span>,<span class="number">0x25</span>,<span class="number">0xb4</span>,<span class="number">0x8d</span>,<span class="number">0xe3</span>,<span class="number">0x7b</span>,<span class="number">0xa3</span>,<span class="number">0x64</span> &#125;;</span><br><span class="line"><span class="type">uint32_t</span> xor1[] = &#123; <span class="number">0x5397b3de</span>,<span class="number">0x716150aa</span>,<span class="number">0x1dc9e542</span>,<span class="number">0x0c9bcafc</span>,<span class="number">0x769bf209</span>,<span class="number">0x774664e8</span>,<span class="number">0x4d05f8b2</span>,<span class="number">0x7a1b0806</span>,<span class="number">0x5489330d</span>,<span class="number">0x572e6493</span>,<span class="number">0x36e62061</span>,<span class="number">0x1c979ef4</span>,<span class="number">0x53b95624</span>,<span class="number">0x7b87ba49</span>,<span class="number">0x4a02a315</span>,<span class="number">0x4b3ee601</span>,<span class="number">0x3fa44ad7</span>,<span class="number">0x529698ab</span>,<span class="number">0x5d6d5804</span>,<span class="number">0x18161018</span>,<span class="number">0x605146cf</span>,<span class="number">0x75be02e9</span>,<span class="number">0x5b2f51d5</span>,<span class="number">0x04c0fb96</span>,<span class="number">0x22f4fb33</span>,<span class="number">0x314403ca</span>,<span class="number">0x58e431f9</span>,<span class="number">0x488cbe2a</span>,<span class="number">0x6677855e</span>,<span class="number">0x771e54ea</span>,<span class="number">0x677e312d</span>,<span class="number">0x3a0f393c</span>,<span class="number">0x687fa594</span>,<span class="number">0x0548166f</span>,<span class="number">0x46ab0438</span>,<span class="number">0x5f1b979d</span>,<span class="number">0x7c8e7b58</span>,<span class="number">0x13b0fcea</span> &#125;;</span><br><span class="line"><span class="type">int</span> t1[] = &#123; <span class="number">33</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">0</span>,<span class="number">32</span>,<span class="number">31</span>,<span class="number">10</span>,<span class="number">29</span>,<span class="number">9</span>,<span class="number">24</span>,<span class="number">26</span>,<span class="number">11</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">21</span>,<span class="number">3</span>,<span class="number">12</span>,<span class="number">10</span>,<span class="number">13</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">4</span>,<span class="number">13</span>,<span class="number">10</span>,<span class="number">8</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> ptr[<span class="number">38</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> final_flag[<span class="number">38</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">38</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">ptr[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">37</span>; i; --i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">uint8_t</span> v18 = t1[<span class="number">37</span>-i];</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> v19 = ptr[i];</span><br><span class="line">ptr[i] = ptr[v18];</span><br><span class="line">ptr[v18] = v19;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">38</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">flag[i] = enc[i] ^ arr1[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">38</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">flag[i] ^= xor1[i];</span><br><span class="line">final_flag[ptr[i]] = (flag[i]&amp;<span class="number">0xff</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">38</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">final_flag[i] ^= xor[i];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, final_flag[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/image-20240531204507826.png" class="lazyload" data-srcset="/../image/image-20240531204507826.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20240531204507826"></p><h2 id="rust-baby"><a href="#rust-baby" class="headerlink" title="rust_baby"></a>rust_baby</h2><p>é¦–å…ˆæˆ‘ä»¬è¦å…ˆæ‰¾åˆ°è¿™ä¸ªå‡½æ•°</p><p>sub_7FF7B37F298A</p><p>è¿™ä¸ªå‡½æ•°ç›¸å½“äºå°±æ˜¯æˆ‘ä»¬çš„ä¸»å‡½æ•°</p><p><img src="/../image/706.png" class="lazyload" data-srcset="/../image/706.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="706"></p><p>ç„¶åæˆ‘ä»¬æŠŠmemcpyçš„å†…å®¹æ”¾åˆ°cyberchefé‡Œé¢è§£å¯†ï¼Œå‘ç°å®ƒä¸€ä¸ªå­—å…¸çš„æ ¼å¼ï¼Œè¿™é‡Œé¢çš„ä¿¡æ¯å¯¹æˆ‘ä»¬åé¢æœ‰ç”¨</p><p>è¿™ä¸ªå‡½æ•°å°±æ˜¯è¾“å…¥å‡½æ•°</p><p><img src="/../image/707.png" class="lazyload" data-srcset="/../image/707.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="707"></p><p>æˆ‘ä»¬æ³¨æ„åˆ°åé¢åªå¤„ç†å…«ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘å°±å…ˆè¾“å…¥8ä¸ªå­—ç¬¦</p><p>æˆ‘ä»¬ç›´æ¥ä¸‹ä¸ªç¡¬ä»¶æ–­ç‚¹ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥è·Ÿè¸ªå¯¹å­—ç¬¦ä¸²çš„å¤„ç†</p><p><img src="/../image/708.png" class="lazyload" data-srcset="/../image/708.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="708"></p><p>ç”±äºè¿™é‡Œçš„åŠ å¯†å‡½æ•°å¤ªå¤æ‚äº†ï¼Œæˆ‘ä»¬ç›´æ¥é»‘ç›’åˆ†æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">12345611  -------&gt;&gt;&gt;  01346733</span><br><span class="line">aabbccdd  -------&gt;&gt;&gt;  ``bbddff</span><br><span class="line">22334455  -------&gt;&gt;&gt;  11335577</span><br><span class="line">44556677  -------&gt;&gt;&gt;  33557799</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¸ªè§„å¾‹ï¼Œåé¢è¿˜æœ‰ä¸ªå¼‚æˆ–æ“ä½œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dic=-<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(enc),<span class="number">2</span>):</span><br><span class="line">    enc[i]+=dic</span><br><span class="line">    enc[i+<span class="number">1</span>]+=dic</span><br><span class="line">    dic+=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(enc)):</span><br><span class="line">    enc[i]^=<span class="number">0x33</span></span><br></pre></td></tr></table></figure><p>åé¢è¿˜æœ‰ä¸€ä¸ªå¼‚æˆ–æ“ä½œ</p><p><img src="/../image/709.png" class="lazyload" data-srcset="/../image/709.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="709"></p><p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæå–å‡ºæ¥æˆ‘ä»¬éœ€è¦å¼‚æˆ–çš„æ•°å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆæå–å‡ºçœŸæ­£çš„å¯†é’¥å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°v91é‚£é‡Œä¸€å…±æœ‰104ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™é‡Œå…¨éƒ¨è®¾ç½®æˆ0</p><p>ç„¶ååœ¨åé¢å¯ä»¥æå–å‡ºå¯†é’¥ï¼Œç”±äºä¸­é—´å…¨éƒ¨è¿›è¡Œäº†base64åŠ å¯†æ“ä½œï¼Œbase64è§£å¯†ä¹‹åçš„å°±æ˜¯çœŸæ­£çš„å¯†é’¥</p><p><img src="/../image/710.png" class="lazyload" data-srcset="/../image/710.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="710"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">REAL_KEY =[<span class="number">0xdc</span>,<span class="number">0x5f</span>,<span class="number">0x20</span>,<span class="number">0x22</span>,<span class="number">0xc2</span>,<span class="number">0x79</span>,<span class="number">0x19</span>,<span class="number">0x56</span>,<span class="number">0x35</span>,<span class="number">0xda</span>,<span class="number">0x8b</span>,<span class="number">0x47</span>,<span class="number">0xd3</span>,<span class="number">0x19</span>,<span class="number">0xfc</span>,<span class="number">0x55</span>,<span class="number">0x14</span>,<span class="number">0xcd</span>,<span class="number">0xd2</span>,<span class="number">0x7b</span>,<span class="number">0x58</span>,<span class="number">0x59</span>,<span class="number">0x09</span>,<span class="number">0x42</span>,<span class="number">0xde</span>,<span class="number">0x2c</span>,<span class="number">0xb4</span>,<span class="number">0x48</span>,<span class="number">0xd9</span>,<span class="number">0xf2</span>,<span class="number">0x1b</span>,<span class="number">0xa9</span>,<span class="number">0x40</span>,<span class="number">0xe1</span>,<span class="number">0xa6</span>,<span class="number">0xfb</span>,<span class="number">0xff</span>,<span class="number">0x38</span>,<span class="number">0xc1</span>,<span class="number">0xd5</span>,<span class="number">0xe2</span>,<span class="number">0xe8</span>,<span class="number">0x77</span>,<span class="number">0x78</span>,<span class="number">0x6f</span>,<span class="number">0x22</span>,<span class="number">0x04</span>,<span class="number">0xe6</span>,<span class="number">0x16</span>,<span class="number">0x3e</span>,<span class="number">0x0c</span>,<span class="number">0x35</span>,<span class="number">0x52</span>,<span class="number">0x5c</span>,<span class="number">0xfd</span>,<span class="number">0xc1</span>,<span class="number">0xe5</span>,<span class="number">0x59</span>,<span class="number">0x1c</span>,<span class="number">0xd0</span>,<span class="number">0xae</span>,<span class="number">0x5a</span>,<span class="number">0xb2</span>,<span class="number">0xdd</span>,<span class="number">0x19</span>,<span class="number">0xf8</span>,<span class="number">0x42</span>,<span class="number">0xe6</span>,<span class="number">0x2c</span>,<span class="number">0x89</span>,<span class="number">0x59</span>,<span class="number">0xe5</span>,<span class="number">0x11</span>,<span class="number">0x9c</span>,<span class="number">0xc8</span>,<span class="number">0x7b</span>,<span class="number">0x81</span>,<span class="number">0x70</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0xbc</span>,<span class="number">0x6f</span>,<span class="number">0x02</span>,<span class="number">0x8f</span>,<span class="number">0xf7</span>,<span class="number">0xf4</span>,<span class="number">0xc8</span>,<span class="number">0x70</span>,<span class="number">0xae</span>,<span class="number">0x02</span>,<span class="number">0xf8</span>,<span class="number">0x5b</span>,<span class="number">0xe2</span>,<span class="number">0x72</span>,<span class="number">0x08</span>,<span class="number">0x09</span>,<span class="number">0x6f</span>,<span class="number">0xbf</span>,<span class="number">0x4b</span>,<span class="number">0x39</span>,<span class="number">0xb5</span>,<span class="number">0xd0</span>,<span class="number">0x1e</span>,<span class="number">0xa3</span>]</span><br><span class="line">enc=[<span class="number">0x8a</span>,<span class="number">0x07</span>,<span class="number">0x72</span>,<span class="number">0x76</span>,<span class="number">0x8d</span>,<span class="number">0x7d</span>,<span class="number">0x4d</span>,<span class="number">0x51</span>,<span class="number">0x35</span>,<span class="number">0xde</span>,<span class="number">0x88</span>,<span class="number">0x16</span>,<span class="number">0xd4</span>,<span class="number">0x04</span>,<span class="number">0xf9</span>,<span class="number">0x0e</span>,<span class="number">0x08</span>,<span class="number">0xcf</span>,<span class="number">0xcc</span>,<span class="number">0x7c</span>,<span class="number">0x0f</span>,<span class="number">0x0d</span>,<span class="number">0x09</span>,<span class="number">0x5e</span>,<span class="number">0xd5</span>,<span class="number">0x7e</span>,<span class="number">0xe4</span>,<span class="number">0x4b</span>,<span class="number">0xc4</span>,<span class="number">0xf3</span>,<span class="number">0x1c</span>,<span class="number">0xaf</span>,<span class="number">0x12</span>,<span class="number">0xe4</span>,<span class="number">0xa0</span>,<span class="number">0xae</span>,<span class="number">0xf6</span>,<span class="number">0x69</span>,<span class="number">0xc9</span>,<span class="number">0xd2</span>,<span class="number">0xe0</span>,<span class="number">0xa7</span>,<span class="number">0x01</span>,<span class="number">0x0e</span>,<span class="number">0x1a</span>,<span class="number">0x57</span>,<span class="number">0x70</span>,<span class="number">0x92</span>,<span class="number">0x61</span>,<span class="number">0x49</span>,<span class="number">0x7a</span>,<span class="number">0x43</span>,<span class="number">0x27</span>,<span class="number">0x29</span>,<span class="number">0x89</span>,<span class="number">0xb5</span>,<span class="number">0x92</span>,<span class="number">0x2e</span>,<span class="number">0x6a</span>,<span class="number">0xa6</span>,<span class="number">0xdb</span>,<span class="number">0x2f</span>,<span class="number">0xc6</span>,<span class="number">0xa9</span>,<span class="number">0x6e</span>,<span class="number">0x8f</span>,<span class="number">0x34</span>,<span class="number">0x90</span>,<span class="number">0x59</span>,<span class="number">0xfc</span>,<span class="number">0x2d</span>,<span class="number">0x91</span>,<span class="number">0x66</span>,<span class="number">0xeb</span>,<span class="number">0xbe</span>,<span class="number">0x0d</span>,<span class="number">0xf4</span>,<span class="number">0x05</span>,<span class="number">0x0b</span>,<span class="number">0x1b</span>,<span class="number">0xcb</span>,<span class="number">0x18</span>,<span class="number">0x74</span>,<span class="number">0xf9</span>,<span class="number">0x82</span>,<span class="number">0x81</span>,<span class="number">0xbc</span>,<span class="number">0x04</span>,<span class="number">0xd9</span>,<span class="number">0x75</span>,<span class="number">0x8e</span>,<span class="number">0x2d</span>,<span class="number">0x97</span>,<span class="number">0x07</span>,<span class="number">0x7c</span>,<span class="number">0x7d</span>,<span class="number">0x18</span>,<span class="number">0xc8</span>,<span class="number">0x3d</span>,<span class="number">0x4f</span>,<span class="number">0xc0</span>,<span class="number">0xa5</span>,<span class="number">0x6a</span>,<span class="number">0xd7</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(REAL_KEY)):</span><br><span class="line">    enc[i]^=REAL_KEY[i]</span><br><span class="line">    enc[i]^=<span class="number">0x33</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">13</span>):</span><br><span class="line">   num1=-<span class="number">1</span></span><br><span class="line">   <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">8</span>,<span class="number">2</span>):</span><br><span class="line">       enc[<span class="number">8</span>*i+j]-=num1</span><br><span class="line">       enc[<span class="number">8</span>*i+j+<span class="number">1</span>]-=num1</span><br><span class="line">       num1+=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span>  i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(enc)):</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">chr</span>(enc[i]),end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">#flag&#123;6e2480b3-4f02-4cf1-9bc0-123b75f9a922&#125;</span></span><br></pre></td></tr></table></figure><h2 id="GoReverse"><a href="#GoReverse" class="headerlink" title="GoReverse"></a>GoReverse</h2><h3 id="ç¨‹åºåˆ†æ"><a href="#ç¨‹åºåˆ†æ" class="headerlink" title="ç¨‹åºåˆ†æ"></a>ç¨‹åºåˆ†æ</h3><p>è¿™é‡Œå€Ÿé‰´çš„æ€è·¯æ˜¯panda0så¸ˆå‚…çš„æ€è·¯</p><p><a href="https://www.bilibili.com/video/BV1bJ4m1w767/?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=f5a24deea97cc11fbdd53a993a4129bf">https://www.bilibili.com/video/BV1bJ4m1w767/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=f5a24deea97cc11fbdd53a993a4129bf</a></p><p><img src="/../image/667.png" class="lazyload" data-srcset="/../image/667.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="667"></p><p>å‘ç°æ²¡æœ‰ç¬¦å·è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¢å¤ä¸€ä¸‹ç¬¦å·è¡¨</p><p><a href="https://github.com/0xjiayu/go_parser">https://github.com/0xjiayu/go_parser</a><br>å…‹éš†ä»“åº“ï¼ŒIDAåŠ è½½go_parser.pyå³å¯ï¼Œä¸éœ€è¦æŠŠè„šæœ¬æ”¾åˆ°pluginé‡Œé¢</p><p><img src="/../image/668.png" class="lazyload" data-srcset="/../image/668.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="668"></p><p>åˆå§‹åŒ–åœ¨runtime_mainé‡Œé¢ï¼Œç„¶åæˆ‘ä»¬çš„ä¸»å‡½æ•°åœ¨main__B2bUPq_Executeé‡Œé¢</p><p>é‡Œé¢ä¸€å…±æœ‰ä¸¤ä¸ªåè°ƒè¯•çš„åœ°æ–¹</p><p><img src="/../image/669.png" class="lazyload" data-srcset="/../image/669.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="669"></p><p>åœ¨è°ƒç”¨è¿™ä¸ªruntime_systemstackä¹‹åå°±ä¼šé€€å‡ºï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªnopæ‰</p><p><img src="/../image/670.png" class="lazyload" data-srcset="/../image/670.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="670"></p><p>ç¬¬äºŒä¸ªåè°ƒè¯•å°±å¾ˆæ˜æ˜¾äº†ï¼Œåœ¨åœ°å€0x004D64A0 è¿™é‡Œ</p><p>æŠŠä»–patchæ‰å°±è¡Œäº†</p><p><img src="/../image/671.png" class="lazyload" data-srcset="/../image/671.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="671"></p><p>åé¢çš„zQyveEä¸ºxxteaåŠ å¯†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠToUint32så¤åˆ¶ä¸‹æ¥</p><p><a href="https://github.com/xxtea/xxtea-go/blob/master/xxtea/xxtea.go">https://github.com/xxtea/xxtea-go/blob/master/xxtea/xxtea.go</a></p><p><img src="/../image/672.png" class="lazyload" data-srcset="/../image/672.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="672"></p><p>æˆ‘ä»¬å¯ä»¥å‘ç°xxteaè¿›è¡Œäº†é­”æ”¹ï¼Œé­”æ”¹çš„åœ°æ–¹ä¸ºMXå’Œdelta</p><p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨ä»¥ä¸‹å‡ ä¸ªåœ°æ–¹è®¾ç½®æ–­ç‚¹</p><p><img src="/../image/673.png" class="lazyload" data-srcset="/../image/673.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="673"></p><p><img src="/../image/674.png" class="lazyload" data-srcset="/../image/674.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="674"></p><p>ç„¶åæˆ‘ä»¬å¯ä»¥å…ˆåœ¨è¿›è¡Œå¼‚æˆ–æ“ä½œä¹‹å‰ä¸‹ä¸ªæ–­ç‚¹</p><p><img src="/../image/675.png" class="lazyload" data-srcset="/../image/675.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="675"></p><p>å› ä¸ºæˆ‘æ˜¯ä¹‹å‰å…ˆå¼‚æˆ–äº†ï¼Œæ‰€ä»¥å†å¼‚æˆ–ä¸€ä¸‹å°±å›å»äº†ï¼Œè¿™æ ·ä¾¿äºæˆ‘ä»¬æ›´å¥½åˆ†æ</p><p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¼‚æˆ–çš„å€¼</p><p><img src="/../image/676.png" class="lazyload" data-srcset="/../image/676.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="676"></p><p>æˆ‘ä»¬ç»è¿‡xxteaåŠ å¯†ä¹‹åæˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒçš„è¿”å›å€¼</p><p><img src="/../image/677.png" class="lazyload" data-srcset="/../image/677.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="677"></p><p>ä¸€å…±åå…­ä¸ªå­—èŠ‚ï¼Œå¾ˆæ˜æ˜¾æ˜¯æˆ‘ä»¬çš„è¾“å…¥ä¹‹åçš„åŠ å¯†ç»“æœï¼Œä½†æ˜¯æˆ‘ä»¬ä¾¿äºåˆ†æç»Ÿä¸€å˜æˆ11ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æŒ‰F9</p><p>è·³åˆ°äº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.text:00000000004D5D41 call    github_com_tjfoc_gmsm_sm4_NewCipher</span><br></pre></td></tr></table></figure><p><img src="/../image/678.png" class="lazyload" data-srcset="/../image/678.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="678"></p><p>ç„¶åè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å¾—åˆ°SM4çš„å¯†é’¥</p><p>ç»§ç»­å¾€ä¸‹é¢è°ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.text:00000000004D5D96 call    crypto_rand_Read</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ç”Ÿæˆçš„éšæœºæ•°</p><p><img src="/../image/679.png" class="lazyload" data-srcset="/../image/679.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="679"></p><p>æˆ‘ä»¬ç»Ÿä¸€æŠŠå®ƒè®¾æˆ22</p><p>å†ç»§ç»­å¾€ä¸‹é¢è°ƒï¼Œä¸€ç›´åˆ°äº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.text:00000000004D5DEF call   rdx å…¶å®è°ƒç”¨çš„æ˜¯crypto_cipher__ctr_XORKeyStream</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬åœ¨rsiå¯„å­˜å™¨å¾—åˆ°äº†æˆ‘ä»¬ä¸€å¼€å§‹ç»è¿‡xxteaåŠ å¯†çš„å¯†æ–‡</p><p>è¿™ä¸ªæ—¶å€™è¦å’Œsm4ç”Ÿæˆçš„å¯†æ–‡(CTRæ¨¡å¼)è¿›è¡Œå¼‚æˆ–</p><p>ä½†æ˜¯è¿™ä¸ªivæ˜¯éšæœºç”Ÿæˆçš„ï¼ˆåé¢ä¼šè§£é‡Šè¿™ä¸ªæ€ä¹ˆå¾—åˆ°ï¼‰</p><p>ç»§ç»­å¾€ä¸‹é¢è°ƒæˆ‘ä»¬å¯ä»¥åˆ°åˆ°aesçš„å¯†é’¥</p><p><img src="/../image/680.png" class="lazyload" data-srcset="/../image/680.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="680"></p><p>å†å¾€ä¸‹é¢èµ°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°aesçš„ivæ˜¯keyçš„å‰16ä½</p><p>æˆ‘ä»¬åœ¨æœ€åretnè¿™é‡Œä¸‹ä¸ªæ–­ç‚¹ï¼Œæˆ‘ä»¬æŠŠå‰16ä½çš„å…¨éƒ½æ›¿æ¢æˆ33ï¼Œæœ€ååœ¨Linuxé‡Œé¢ä¼šè¾“å‡ºä¸€æ®µbase32çš„å­—ç¬¦ä¸²</p><p><img src="/../image/681.png" class="lazyload" data-srcset="/../image/681.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="681"></p><p><img src="/../image/683.png" class="lazyload" data-srcset="/../image/683.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="683"></p><p><img src="/../image/682.png" class="lazyload" data-srcset="/../image/682.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="682"></p><p>å°±æ˜¯æˆ‘ä»¬æœ€åè¾“å…¥çš„33ï¼Œé‚£ä¹ˆè¯´æ˜æˆ‘ä»¬åœ¨ç»è¿‡base32å’Œaesè§£å¯†ä¹‹åï¼Œå¾—åˆ°çš„å‰16ä¸ªå­—èŠ‚å°±æ˜¯sm4éšæœºç”Ÿæˆçš„iv</p><h3 id="é€†å‘åˆ†æ"><a href="#é€†å‘åˆ†æ" class="headerlink" title="é€†å‘åˆ†æ"></a>é€†å‘åˆ†æ</h3><p>è¿™é‡Œä¸ºäº†å¤ç°æˆ‘ç›´æ¥å€Ÿç”¨äº†å…¶å®ƒå¸ˆå‚…åœ¨æ¯”èµ›ä¸­å¾—åˆ°çš„flag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;3a4575cf-c85c-4350-90ca-baef825242&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/686.png" class="lazyload" data-srcset="/../image/686.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="686"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> AES</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line">enc=<span class="string">b&#x27;HAA4WOBVE4J2GIVLNOAXSN3N2L3UCBWPZJJICPWEVNYREBHRPGFGIT43WJENRUU25HKVMEMU7QRKDOZWADY7WOK2JAF7J7DOSZ652EY=&#x27;</span></span><br><span class="line"></span><br><span class="line">enc=base64.b32decode(enc)</span><br><span class="line"></span><br><span class="line">aeskey=<span class="string">b&#x27;dPGWgcLpqmxw3uOXhKpKV009Cql@@XE6&#x27;</span></span><br><span class="line">aesiv =<span class="string">b&#x27;dPGWgcLpqmxw3uOXhKpKV009Cql@@XE6&#x27;</span>[:<span class="number">16</span>]</span><br><span class="line"></span><br><span class="line">enc=AES.new(key=aeskey,iv=aesiv,mode=AES.MODE_CBC).decrypt(enc)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(enc[:<span class="number">16</span>].<span class="built_in">hex</span>())</span><br></pre></td></tr></table></figure><p>æ ¹æ®flagé•¿åº¦ä¸º40æˆ–42å¯çŸ¥counterè¿˜éœ€è¦åˆ†åˆ«+1å’Œ+2ï¼Œæ€»å…±3*16bytes</p><p><img src="/../image/685.png" class="lazyload" data-srcset="/../image/685.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="685"></p><p>æˆ‘ä»¬å°†SM4åŠ å¯†çš„å¯†æ–‡ä¸AESè§£å‡ºæ¥çš„æ˜æ–‡çš„ä»ç¬¬16ä½å¼€å§‹è¿›è¡Œå¼‚æˆ–ï¼Œè§£å‡ºæ¥çš„å°±æ˜¯xxteaçš„å¯†æ–‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ctr=<span class="built_in">bytes</span>.fromhex(<span class="string">&#x27;7c aa 04 c3 57 63 29 c3 eb 24 34 4f cf 3e 00 88 7b 60 85 f1 45 88 35 17 52 2c 72 1e 8e cf cf c9 fa 03 9e 45 0f f9 7c 05 d7 e6 b0 3a 8c 0b 09 43 11 ba e2 41 45 1c e9 f6 ea 51 52 63 f5 41 5b 29&#x27;</span>)</span><br><span class="line">enc=<span class="built_in">list</span>(enc[<span class="number">16</span>:])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(enc)):</span><br><span class="line">    enc[i]^=ctr[i]</span><br><span class="line">enc=<span class="built_in">bytes</span>(enc)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(enc), <span class="number">4</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">hex</span>(struct.unpack(<span class="string">&quot;&lt;I&quot;</span>, enc[i:i+<span class="number">4</span>])[<span class="number">0</span>]), end=<span class="string">&quot;,&quot;</span>) <span class="comment">#å˜æˆ32ä½ï¼Œä¾¿äºåé¢è¿›è¡Œxxteaè§£å¯†</span></span><br></pre></td></tr></table></figure><p>ä¹‹åè¿›è¡ŒxxteaåŠ å¯†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MX ((((z&gt;&gt;5 ^ y<span class="string">&lt;&lt;2) + (y&gt;</span>&gt;3 ^ z&lt;&lt;4)) ^ (sum^y)) + (key[(p&amp;3)^e]^z))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DELTA 0x7FAB4CAD</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">xxtea</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span>* v, <span class="type">unsigned</span> <span class="type">int</span>* key, <span class="type">int</span> n)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> y, z, sum;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> p, e, round;</span><br><span class="line"><span class="keyword">if</span> (n &gt; <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">round = <span class="number">6</span> + <span class="number">52</span> / n;</span><br><span class="line">sum = <span class="number">0</span>;</span><br><span class="line">z = v[n - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span> (round--)</span><br><span class="line">&#123;</span><br><span class="line">sum += DELTA;</span><br><span class="line">e = (sum &gt;&gt; <span class="number">2</span>) &amp; <span class="number">3</span>;</span><br><span class="line"><span class="keyword">for</span> (p = <span class="number">0</span>; p &lt; n - <span class="number">1</span>; p++)</span><br><span class="line">&#123;</span><br><span class="line">y = v[p + <span class="number">1</span>];</span><br><span class="line">v[p] += MX;</span><br><span class="line">z = v[p];</span><br><span class="line">&#125;</span><br><span class="line">y = v[<span class="number">0</span>];</span><br><span class="line">v[n - <span class="number">1</span>] += MX;</span><br><span class="line">z = v[n - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (n &lt; <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">n = -n;</span><br><span class="line">round = <span class="number">6</span> + <span class="number">52</span> / n;</span><br><span class="line">sum = DELTA * round;</span><br><span class="line">y = v[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">while</span> (round--)</span><br><span class="line">&#123;</span><br><span class="line">e = (sum &gt;&gt; <span class="number">2</span>) &amp; <span class="number">3</span>;</span><br><span class="line"><span class="keyword">for</span> (p = n - <span class="number">1</span>; p &gt; <span class="number">0</span>; p--)</span><br><span class="line">&#123;</span><br><span class="line">z = v[p - <span class="number">1</span>];</span><br><span class="line">v[p] -= MX;</span><br><span class="line">y = v[p];</span><br><span class="line">&#125;</span><br><span class="line">z = v[n - <span class="number">1</span>];</span><br><span class="line">v[<span class="number">0</span>] -= MX;</span><br><span class="line">y = v[<span class="number">0</span>];</span><br><span class="line">sum -= DELTA;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> xorr[] = <span class="string">&quot;D7BJLsOk9@f&amp;1dWIn53IDlJqUS6$^WhkAk2kk*2GaqmLwiLX^bGGE$&amp;dmqR^g5bL3lCA5^HGK$9qo5T@Bwom9vEXya0HAV3LrWW&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> keybyte[] = <span class="string">&quot;Bs^8*wZ4lu8oR&amp;@k&quot;</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span>* key = (<span class="type">unsigned</span> <span class="type">int</span>*)keybyte;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> text[] = &#123; <span class="number">0x14e89d7c</span>,<span class="number">0x70624924</span>,<span class="number">0xe0a2078c</span>,<span class="number">0x555d91e</span>,<span class="number">0xcdd3602</span>,<span class="number">0x6bc8c9d6</span>,<span class="number">0x975e0d09</span>,<span class="number">0x5a54d90f</span>,<span class="number">0xafc1d576</span>,<span class="number">0x73f7f1b2</span>,<span class="number">0x32b8eedf</span>,<span class="number">0x4b010384</span> &#125;;</span><br><span class="line">xxtea(text, key, <span class="number">-10</span>);</span><br><span class="line"><span class="type">char</span>* enc = (<span class="type">char</span>*)text;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">48</span>; i++)</span><br><span class="line">enc[i] ^= xorr[i % <span class="built_in">strlen</span>(xorr)];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">48</span>; i++)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, enc[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/687.png" class="lazyload" data-srcset="/../image/687.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="687"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;asm-re&quot;&gt;&lt;a href=&quot;#asm-re&quot; class=&quot;headerlink&quot; title=&quot;asm_re&quot;&gt;&lt;/a&gt;asm_re&lt;/h2&gt;&lt;p&gt;ç›´æ¥æ‰‹æ’•æ±‡ç¼–&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/../image/688.png&quot; class=&quot;lazy</summary>
      
    
    
    
    <category term="WP" scheme="https://5m10v3.github.io/categories/WP/"/>
    
    
    <category term="ctfå­¦ä¹ " scheme="https://5m10v3.github.io/tags/ctf%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>é€†å‘ç»ƒä¹ (ä¸€)</title>
    <link href="https://5m10v3.github.io/2024/05/29/%E9%80%86%E5%90%91%E7%BB%83%E4%B9%A0(%E4%B8%80)/"/>
    <id>https://5m10v3.github.io/2024/05/29/%E9%80%86%E5%90%91%E7%BB%83%E4%B9%A0(%E4%B8%80)/</id>
    <published>2024-05-28T16:00:00.000Z</published>
    <updated>2024-06-09T09:11:01.335Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥ç»ƒä¹ ä¸€é¢˜ä¹‹AESé­”æ”¹</p><p>é¢˜ç›®é“¾æ¥å¦‚ä¸‹ï¼Œä¾›å„ä½å¸ˆå‚…ä¸‹è½½</p><p><a href="https://wwb.lanzout.com/iq2Aw20n4ype">https://wwb.lanzout.com/iq2Aw20n4ype</a><br>å¯†ç :2v3h</p><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><p>æ‰“å¼€é¢˜ç›®å‘ç°æ²¡æœ‰mainå‡½æ•°ï¼Œæˆ‘ä»¬é€šè¿‡å­—ç¬¦ä¸²æŸ¥æ‰¾å®šä½åˆ°mainå‡½æ•°ï¼Œæˆ‘ä»¬å‘ç°mainå‡½æ•°çš„åœ°æ–¹æ ‡çº¢ï¼Œå‘ç°æ˜¯æœ‰èŠ±æŒ‡ä»¤</p><p><img src="/../image/711.png" class="lazyload" data-srcset="/../image/711.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="711"></p><p>æˆ‘ä»¬è¿›è¡Œä¿®å¤çš„æ—¶å€™è¦å…ˆä¿®å¤ä¸‹é¢é‚£ä¸ªcallæŒ‡ä»¤</p><p>ä¿®å¤æˆä¸‹å›¾è¿™ä¸ªæ ·å­</p><p><img src="/../image/712.png" class="lazyload" data-srcset="/../image/712.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="712"></p><p>ç„¶åå†å°†ä¸Šé¢nopæ‰ï¼Œå°±å¯ä»¥æ¢å¤è¿™ä¸ªä¸»å‡½æ•°</p><p><img src="/../image/713.png" class="lazyload" data-srcset="/../image/713.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="713"></p><p>æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°v9å°±æ˜¯å¯†æ–‡ï¼Œç„¶åsub_43615Bå°±æ˜¯åŠ å¯†å‡½æ•°</p><p>ä½†æ˜¯æˆ‘åœ¨åšè¿™é“é¢˜çš„æ—¶å€™ï¼Œæ²¡æœ‰æ³¨æ„åˆ°å®ƒçš„å¯¼å‡ºè¡¨</p><p>æœ‰ä¸€ä¸ªtlsåè°ƒè¯•</p><p><img src="/../image/714.png" class="lazyload" data-srcset="/../image/714.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="714"></p><p>åœ¨è¿™ä¸ªé‡Œé¢ä¸»è¦æ˜¯å°†å¯†é’¥çš„ç¬¬ä¸‰ä½æ›¿æ¢æˆäº†<strong>h</strong></p><p><img src="/../image/715.png" class="lazyload" data-srcset="/../image/715.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="715"></p><p>ç„¶ååŠ å¯†å‡½æ•°é‚£é‡Œä¹Ÿæœ‰èŠ±æŒ‡ä»¤</p><p>ä¿®å¤ä»¥åŠé‡å‘½åä¹‹åå¯ä»¥çœ‹å‡ºAESçš„ç‰¹å¾éå¸¸æ˜æ˜¾äº†</p><p><img src="/../image/716.png" class="lazyload" data-srcset="/../image/716.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="716"></p><p>ä¸»è¦é­”æ”¹çš„ç‚¹æœ‰ä»¥ä¸‹å‡ ç‚¹:</p><ul><li>åœ¨addRoundKeyè½®å¯†é’¥åŠ åé¢é‚£é‡ŒåŠ äº†å¼‚æˆ–æ“ä½œ(å›ºå®šå€¼)</li><li>Sç›’çš„æ›¿æ¢</li><li>subByteså’ŒmixColumnsé‡Œé¢ä¹ŸåŠ äº†å¼‚æˆ–æ“ä½œ</li></ul><p><img src="/../image/717.png" class="lazyload" data-srcset="/../image/717.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="717"></p><p><img src="/../image/718.png" class="lazyload" data-srcset="/../image/718.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="718"></p><p><img src="/../image/719.png" class="lazyload" data-srcset="/../image/719.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="719"></p><p>è¿›è¡Œè§£å¯†çš„æ—¶å€™å…ˆå¼‚æˆ–ä¸€ä¸‹å°±è¡Œäº†</p><p>é¦–å…ˆæ˜¯Sç›’æ›¿æ¢çš„è„šæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">new_s_box = [</span><br><span class="line"><span class="number">0x63</span>, <span class="number">0x7C</span>, <span class="number">0x77</span>, <span class="number">0x7B</span>, <span class="number">0xF2</span>, <span class="number">0x6B</span>, <span class="number">0x6F</span>, <span class="number">0xC5</span>, <span class="number">0x30</span>, <span class="number">0x01</span>, </span><br><span class="line">  <span class="number">0x67</span>, <span class="number">0x2B</span>, <span class="number">0xFE</span>, <span class="number">0xD7</span>, <span class="number">0xAB</span>, <span class="number">0x76</span>, <span class="number">0xCA</span>, <span class="number">0x82</span>, <span class="number">0xC9</span>, <span class="number">0x7D</span>, </span><br><span class="line">  <span class="number">0xFA</span>, <span class="number">0x59</span>, <span class="number">0x47</span>, <span class="number">0xF0</span>, <span class="number">0xAD</span>, <span class="number">0xD4</span>, <span class="number">0xA2</span>, <span class="number">0xAF</span>, <span class="number">0x9C</span>, <span class="number">0xA4</span>, </span><br><span class="line">  <span class="number">0x72</span>, <span class="number">0xC0</span>, <span class="number">0xB7</span>, <span class="number">0xFD</span>, <span class="number">0x93</span>, <span class="number">0x26</span>, <span class="number">0x36</span>, <span class="number">0x3F</span>, <span class="number">0xF7</span>, <span class="number">0xCC</span>, </span><br><span class="line">  <span class="number">0x34</span>, <span class="number">0xA5</span>, <span class="number">0xE5</span>, <span class="number">0xF1</span>, <span class="number">0x71</span>, <span class="number">0xD8</span>, <span class="number">0x31</span>, <span class="number">0x15</span>, <span class="number">0x04</span>, <span class="number">0xC7</span>, </span><br><span class="line">  <span class="number">0x23</span>, <span class="number">0xC3</span>, <span class="number">0x18</span>, <span class="number">0x96</span>, <span class="number">0x05</span>, <span class="number">0x9A</span>, <span class="number">0x07</span>, <span class="number">0x12</span>, <span class="number">0x80</span>, <span class="number">0xE2</span>, </span><br><span class="line">  <span class="number">0xEB</span>, <span class="number">0x27</span>, <span class="number">0xB2</span>, <span class="number">0x75</span>, <span class="number">0x09</span>, <span class="number">0x83</span>, <span class="number">0x2C</span>, <span class="number">0x1A</span>, <span class="number">0x1B</span>, <span class="number">0x6E</span>, </span><br><span class="line">  <span class="number">0x5A</span>, <span class="number">0xA0</span>, <span class="number">0x52</span>, <span class="number">0x3B</span>, <span class="number">0xD6</span>, <span class="number">0xB3</span>, <span class="number">0x29</span>, <span class="number">0xE3</span>, <span class="number">0x2F</span>, <span class="number">0x84</span>, </span><br><span class="line">  <span class="number">0x53</span>, <span class="number">0xD1</span>, <span class="number">0x00</span>, <span class="number">0xED</span>, <span class="number">0x20</span>, <span class="number">0xFC</span>, <span class="number">0xB1</span>, <span class="number">0x5B</span>, <span class="number">0x6A</span>, <span class="number">0xCB</span>, </span><br><span class="line">  <span class="number">0xBE</span>, <span class="number">0x39</span>, <span class="number">0x4A</span>, <span class="number">0x4C</span>, <span class="number">0x58</span>, <span class="number">0xCF</span>, <span class="number">0xD0</span>, <span class="number">0xEF</span>, <span class="number">0xAA</span>, <span class="number">0xFB</span>, </span><br><span class="line">  <span class="number">0x43</span>, <span class="number">0x4D</span>, <span class="number">0x33</span>, <span class="number">0x85</span>, <span class="number">0x45</span>, <span class="number">0xF9</span>, <span class="number">0x02</span>, <span class="number">0x7F</span>, <span class="number">0x50</span>, <span class="number">0x3C</span>, </span><br><span class="line">  <span class="number">0x9F</span>, <span class="number">0xA8</span>, <span class="number">0x51</span>, <span class="number">0xA3</span>, <span class="number">0x40</span>, <span class="number">0x8F</span>, <span class="number">0x92</span>, <span class="number">0x9D</span>, <span class="number">0x38</span>, <span class="number">0xF5</span>, </span><br><span class="line">  <span class="number">0xBC</span>, <span class="number">0xB6</span>, <span class="number">0xDA</span>, <span class="number">0x21</span>, <span class="number">0x10</span>, <span class="number">0xFF</span>, <span class="number">0xF3</span>, <span class="number">0xD2</span>, <span class="number">0xCD</span>, <span class="number">0x0C</span>, </span><br><span class="line">  <span class="number">0x13</span>, <span class="number">0xEC</span>, <span class="number">0x5F</span>, <span class="number">0x97</span>, <span class="number">0x44</span>, <span class="number">0x17</span>, <span class="number">0xC4</span>, <span class="number">0xA7</span>, <span class="number">0x7E</span>, <span class="number">0x3D</span>, </span><br><span class="line">  <span class="number">0x64</span>, <span class="number">0x5D</span>, <span class="number">0x19</span>, <span class="number">0x73</span>, <span class="number">0x60</span>, <span class="number">0x81</span>, <span class="number">0x4F</span>, <span class="number">0xDC</span>, <span class="number">0x22</span>, <span class="number">0x2A</span>, </span><br><span class="line">  <span class="number">0x90</span>, <span class="number">0x88</span>, <span class="number">0x46</span>, <span class="number">0xEE</span>, <span class="number">0xB8</span>, <span class="number">0x14</span>, <span class="number">0xDE</span>, <span class="number">0x5E</span>, <span class="number">0x0B</span>, <span class="number">0xDB</span>, </span><br><span class="line">  <span class="number">0xE0</span>, <span class="number">0x32</span>, <span class="number">0x3A</span>, <span class="number">0x0A</span>, <span class="number">0x49</span>, <span class="number">0x06</span>, <span class="number">0x24</span>, <span class="number">0x5C</span>, <span class="number">0xC2</span>, <span class="number">0xD3</span>, </span><br><span class="line">  <span class="number">0xAC</span>, <span class="number">0x62</span>, <span class="number">0x91</span>, <span class="number">0x95</span>, <span class="number">0xE4</span>, <span class="number">0x79</span>, <span class="number">0xE7</span>, <span class="number">0xC8</span>, <span class="number">0x37</span>, <span class="number">0x6D</span>, </span><br><span class="line">  <span class="number">0x8D</span>, <span class="number">0xD5</span>, <span class="number">0x4E</span>, <span class="number">0xA9</span>, <span class="number">0x6C</span>, <span class="number">0x56</span>, <span class="number">0xF4</span>, <span class="number">0xEA</span>, <span class="number">0x65</span>, <span class="number">0x7A</span>, </span><br><span class="line">  <span class="number">0xAE</span>, <span class="number">0x08</span>, <span class="number">0xBA</span>, <span class="number">0x78</span>, <span class="number">0x25</span>, <span class="number">0x2E</span>, <span class="number">0x1C</span>, <span class="number">0xA6</span>, <span class="number">0xB4</span>, <span class="number">0xC6</span>, </span><br><span class="line">  <span class="number">0xE8</span>, <span class="number">0xDD</span>, <span class="number">0x74</span>, <span class="number">0x1F</span>, <span class="number">0x4B</span>, <span class="number">0xBD</span>, <span class="number">0x8B</span>, <span class="number">0x8A</span>, <span class="number">0x70</span>, <span class="number">0x3E</span>, </span><br><span class="line">  <span class="number">0xB5</span>, <span class="number">0x66</span>, <span class="number">0x48</span>, <span class="number">0x03</span>, <span class="number">0xF6</span>, <span class="number">0x0E</span>, <span class="number">0x61</span>, <span class="number">0x35</span>, <span class="number">0x57</span>, <span class="number">0xB9</span>, </span><br><span class="line">  <span class="number">0x86</span>, <span class="number">0xC1</span>, <span class="number">0x1D</span>, <span class="number">0x9E</span>, <span class="number">0xE1</span>, <span class="number">0xF8</span>, <span class="number">0x98</span>, <span class="number">0x11</span>, <span class="number">0x69</span>, <span class="number">0xD9</span>, </span><br><span class="line">  <span class="number">0x8E</span>, <span class="number">0x94</span>, <span class="number">0x9B</span>, <span class="number">0x1E</span>, <span class="number">0x87</span>, <span class="number">0xE9</span>, <span class="number">0xCE</span>, <span class="number">0x55</span>, <span class="number">0x28</span>, <span class="number">0xDF</span>, </span><br><span class="line">  <span class="number">0x8C</span>, <span class="number">0xA1</span>, <span class="number">0x89</span>, <span class="number">0x0D</span>, <span class="number">0xBF</span>, <span class="number">0xE6</span>, <span class="number">0x42</span>, <span class="number">0x68</span>, <span class="number">0x41</span>, <span class="number">0x99</span>, </span><br><span class="line">  <span class="number">0x2D</span>, <span class="number">0x0F</span>, <span class="number">0xB0</span>, <span class="number">0x54</span>, <span class="number">0xBB</span>, <span class="number">0x16</span></span><br><span class="line">]</span><br><span class="line"> </span><br><span class="line">new_contrary_sbox = [<span class="number">0</span>]*<span class="number">256</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">    line = (new_s_box[i]&amp;<span class="number">0xf0</span>)&gt;&gt;<span class="number">4</span></span><br><span class="line">    rol = new_s_box[i]&amp;<span class="number">0xf</span></span><br><span class="line">    new_contrary_sbox[(line*<span class="number">16</span>)+rol] = i</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> (new_contrary_sbox)</span><br></pre></td></tr></table></figure><h2 id="exp"><a href="#exp" class="headerlink" title="exp"></a>exp</h2><p>aes.hæ–‡ä»¶</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Chinese Academy of Sciences</span></span><br><span class="line"><span class="comment"> * State Key Laboratory of Information Security</span></span><br><span class="line"><span class="comment"> * Institute of Information Engineering</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Copyright (C) 2016 Chinese Academy of Sciences</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * LuoPeng, luopeng@iie.ac.cn</span></span><br><span class="line"><span class="comment"> * Updated in May 2016</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> AES_128_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AES_128_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdint.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AES_BLOCK_SIZE      16</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AES_ROUNDS          10  <span class="comment">// 12, 14</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AES_ROUND_KEY_SIZE  176 <span class="comment">// AES-128 has 10 rounds, and there is a AddRoundKey before first round. (10+1)x16=176.</span></span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @purpose:            Key schedule for AES-128</span></span><br><span class="line"><span class="comment">  * @par[in]key:         16 bytes of master keys</span></span><br><span class="line"><span class="comment">  * @par[out]roundkeys:  176 bytes of round keys</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">aes_key_schedule_128</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span>* key, <span class="type">uint8_t</span>* roundkeys)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @purpose:            Encryption. The length of plain and cipher should be one block (16 bytes).</span></span><br><span class="line"><span class="comment"> *                      The plaintext and ciphertext may point to the same memory</span></span><br><span class="line"><span class="comment"> * @par[in]roundkeys:   round keys</span></span><br><span class="line"><span class="comment"> * @par[in]plaintext:   plain text</span></span><br><span class="line"><span class="comment"> * @par[out]ciphertext: cipher text</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">aes_encrypt_128</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span>* roundkeys, <span class="type">const</span> <span class="type">uint8_t</span>* plaintext, <span class="type">uint8_t</span>* ciphertext)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @purpose:            Decryption. The length of plain and cipher should be one block (16 bytes).</span></span><br><span class="line"><span class="comment"> *                      The ciphertext and plaintext may point to the same memory</span></span><br><span class="line"><span class="comment"> * @par[in]roundkeys:   round keys</span></span><br><span class="line"><span class="comment"> * @par[in]ciphertext:  cipher text</span></span><br><span class="line"><span class="comment"> * @par[out]plaintext:  plain text</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">aes_decrypt_128</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span>* roundkeys, <span class="type">const</span> <span class="type">uint8_t</span>* ciphertext, <span class="type">uint8_t</span>* plaintext)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>aes.cæ–‡ä»¶</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Chinese Academy of Sciences</span></span><br><span class="line"><span class="comment"> * State Key Laboratory of Information Security</span></span><br><span class="line"><span class="comment"> * Institute of Information Engineering</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Copyright (C) 2016 Chinese Academy of Sciences</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * LuoPeng, luopeng@iie.ac.cn</span></span><br><span class="line"><span class="comment"> * Updated in Oct 2016</span></span><br><span class="line"><span class="comment"> * Updated in Jan 2017, update muliple function on GF(2^8).</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;aes.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * round constants</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">static</span> <span class="type">uint8_t</span> RC[] = &#123; <span class="number">0x01</span>, <span class="number">0x02</span>, <span class="number">0x04</span>, <span class="number">0x08</span>, <span class="number">0x10</span>, <span class="number">0x20</span>, <span class="number">0x40</span>, <span class="number">0x80</span>, <span class="number">0x1b</span>, <span class="number">0x36</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Sbox</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> xor1[<span class="number">16</span>] = &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">uint8_t</span> SBOX[<span class="number">256</span>] = &#123;</span><br><span class="line">    <span class="number">0x63</span>, <span class="number">0x7C</span>, <span class="number">0x77</span>, <span class="number">0x7B</span>, <span class="number">0xF2</span>, <span class="number">0x6B</span>, <span class="number">0x6F</span>, <span class="number">0xC5</span>, <span class="number">0x30</span>, <span class="number">0x01</span>,</span><br><span class="line">  <span class="number">0x67</span>, <span class="number">0x2B</span>, <span class="number">0xFE</span>, <span class="number">0xD7</span>, <span class="number">0xAB</span>, <span class="number">0x76</span>, <span class="number">0xCA</span>, <span class="number">0x82</span>, <span class="number">0xC9</span>, <span class="number">0x7D</span>,</span><br><span class="line">  <span class="number">0xFA</span>, <span class="number">0x59</span>, <span class="number">0x47</span>, <span class="number">0xF0</span>, <span class="number">0xAD</span>, <span class="number">0xD4</span>, <span class="number">0xA2</span>, <span class="number">0xAF</span>, <span class="number">0x9C</span>, <span class="number">0xA4</span>,</span><br><span class="line">  <span class="number">0x72</span>, <span class="number">0xC0</span>, <span class="number">0xB7</span>, <span class="number">0xFD</span>, <span class="number">0x93</span>, <span class="number">0x26</span>, <span class="number">0x36</span>, <span class="number">0x3F</span>, <span class="number">0xF7</span>, <span class="number">0xCC</span>,</span><br><span class="line">  <span class="number">0x34</span>, <span class="number">0xA5</span>, <span class="number">0xE5</span>, <span class="number">0xF1</span>, <span class="number">0x71</span>, <span class="number">0xD8</span>, <span class="number">0x31</span>, <span class="number">0x15</span>, <span class="number">0x04</span>, <span class="number">0xC7</span>,</span><br><span class="line">  <span class="number">0x23</span>, <span class="number">0xC3</span>, <span class="number">0x18</span>, <span class="number">0x96</span>, <span class="number">0x05</span>, <span class="number">0x9A</span>, <span class="number">0x07</span>, <span class="number">0x12</span>, <span class="number">0x80</span>, <span class="number">0xE2</span>,</span><br><span class="line">  <span class="number">0xEB</span>, <span class="number">0x27</span>, <span class="number">0xB2</span>, <span class="number">0x75</span>, <span class="number">0x09</span>, <span class="number">0x83</span>, <span class="number">0x2C</span>, <span class="number">0x1A</span>, <span class="number">0x1B</span>, <span class="number">0x6E</span>,</span><br><span class="line">  <span class="number">0x5A</span>, <span class="number">0xA0</span>, <span class="number">0x52</span>, <span class="number">0x3B</span>, <span class="number">0xD6</span>, <span class="number">0xB3</span>, <span class="number">0x29</span>, <span class="number">0xE3</span>, <span class="number">0x2F</span>, <span class="number">0x84</span>,</span><br><span class="line">  <span class="number">0x53</span>, <span class="number">0xD1</span>, <span class="number">0x00</span>, <span class="number">0xED</span>, <span class="number">0x20</span>, <span class="number">0xFC</span>, <span class="number">0xB1</span>, <span class="number">0x5B</span>, <span class="number">0x6A</span>, <span class="number">0xCB</span>,</span><br><span class="line">  <span class="number">0xBE</span>, <span class="number">0x39</span>, <span class="number">0x4A</span>, <span class="number">0x4C</span>, <span class="number">0x58</span>, <span class="number">0xCF</span>, <span class="number">0xD0</span>, <span class="number">0xEF</span>, <span class="number">0xAA</span>, <span class="number">0xFB</span>,</span><br><span class="line">  <span class="number">0x43</span>, <span class="number">0x4D</span>, <span class="number">0x33</span>, <span class="number">0x85</span>, <span class="number">0x45</span>, <span class="number">0xF9</span>, <span class="number">0x02</span>, <span class="number">0x7F</span>, <span class="number">0x50</span>, <span class="number">0x3C</span>,</span><br><span class="line">  <span class="number">0x9F</span>, <span class="number">0xA8</span>, <span class="number">0x51</span>, <span class="number">0xA3</span>, <span class="number">0x40</span>, <span class="number">0x8F</span>, <span class="number">0x92</span>, <span class="number">0x9D</span>, <span class="number">0x38</span>, <span class="number">0xF5</span>,</span><br><span class="line">  <span class="number">0xBC</span>, <span class="number">0xB6</span>, <span class="number">0xDA</span>, <span class="number">0x21</span>, <span class="number">0x10</span>, <span class="number">0xFF</span>, <span class="number">0xF3</span>, <span class="number">0xD2</span>, <span class="number">0xCD</span>, <span class="number">0x0C</span>,</span><br><span class="line">  <span class="number">0x13</span>, <span class="number">0xEC</span>, <span class="number">0x5F</span>, <span class="number">0x97</span>, <span class="number">0x44</span>, <span class="number">0x17</span>, <span class="number">0xC4</span>, <span class="number">0xA7</span>, <span class="number">0x7E</span>, <span class="number">0x3D</span>,</span><br><span class="line">  <span class="number">0x64</span>, <span class="number">0x5D</span>, <span class="number">0x19</span>, <span class="number">0x73</span>, <span class="number">0x60</span>, <span class="number">0x81</span>, <span class="number">0x4F</span>, <span class="number">0xDC</span>, <span class="number">0x22</span>, <span class="number">0x2A</span>,</span><br><span class="line">  <span class="number">0x90</span>, <span class="number">0x88</span>, <span class="number">0x46</span>, <span class="number">0xEE</span>, <span class="number">0xB8</span>, <span class="number">0x14</span>, <span class="number">0xDE</span>, <span class="number">0x5E</span>, <span class="number">0x0B</span>, <span class="number">0xDB</span>,</span><br><span class="line">  <span class="number">0xE0</span>, <span class="number">0x32</span>, <span class="number">0x3A</span>, <span class="number">0x0A</span>, <span class="number">0x49</span>, <span class="number">0x06</span>, <span class="number">0x24</span>, <span class="number">0x5C</span>, <span class="number">0xC2</span>, <span class="number">0xD3</span>,</span><br><span class="line">  <span class="number">0xAC</span>, <span class="number">0x62</span>, <span class="number">0x91</span>, <span class="number">0x95</span>, <span class="number">0xE4</span>, <span class="number">0x79</span>, <span class="number">0xE7</span>, <span class="number">0xC8</span>, <span class="number">0x37</span>, <span class="number">0x6D</span>,</span><br><span class="line">  <span class="number">0x8D</span>, <span class="number">0xD5</span>, <span class="number">0x4E</span>, <span class="number">0xA9</span>, <span class="number">0x6C</span>, <span class="number">0x56</span>, <span class="number">0xF4</span>, <span class="number">0xEA</span>, <span class="number">0x65</span>, <span class="number">0x7A</span>,</span><br><span class="line">  <span class="number">0xAE</span>, <span class="number">0x08</span>, <span class="number">0xBA</span>, <span class="number">0x78</span>, <span class="number">0x25</span>, <span class="number">0x2E</span>, <span class="number">0x1C</span>, <span class="number">0xA6</span>, <span class="number">0xB4</span>, <span class="number">0xC6</span>,</span><br><span class="line">  <span class="number">0xE8</span>, <span class="number">0xDD</span>, <span class="number">0x74</span>, <span class="number">0x1F</span>, <span class="number">0x4B</span>, <span class="number">0xBD</span>, <span class="number">0x8B</span>, <span class="number">0x8A</span>, <span class="number">0x70</span>, <span class="number">0x3E</span>,</span><br><span class="line">  <span class="number">0xB5</span>, <span class="number">0x66</span>, <span class="number">0x48</span>, <span class="number">0x03</span>, <span class="number">0xF6</span>, <span class="number">0x0E</span>, <span class="number">0x61</span>, <span class="number">0x35</span>, <span class="number">0x57</span>, <span class="number">0xB9</span>,</span><br><span class="line">  <span class="number">0x86</span>, <span class="number">0xC1</span>, <span class="number">0x1D</span>, <span class="number">0x9E</span>, <span class="number">0xE1</span>, <span class="number">0xF8</span>, <span class="number">0x98</span>, <span class="number">0x11</span>, <span class="number">0x69</span>, <span class="number">0xD9</span>,</span><br><span class="line">  <span class="number">0x8E</span>, <span class="number">0x94</span>, <span class="number">0x9B</span>, <span class="number">0x1E</span>, <span class="number">0x87</span>, <span class="number">0xE9</span>, <span class="number">0xCE</span>, <span class="number">0x55</span>, <span class="number">0x28</span>, <span class="number">0xDF</span>,</span><br><span class="line">  <span class="number">0x8C</span>, <span class="number">0xA1</span>, <span class="number">0x89</span>, <span class="number">0x0D</span>, <span class="number">0xBF</span>, <span class="number">0xE6</span>, <span class="number">0x42</span>, <span class="number">0x68</span>, <span class="number">0x41</span>, <span class="number">0x99</span>,</span><br><span class="line">  <span class="number">0x2D</span>, <span class="number">0x0F</span>, <span class="number">0xB0</span>, <span class="number">0x54</span>, <span class="number">0xBB</span>, <span class="number">0x16</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Inverse Sboxs</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">static</span> <span class="type">uint8_t</span> INV_SBOX[<span class="number">256</span>] = &#123;</span><br><span class="line">    <span class="number">82</span>, <span class="number">9</span>, <span class="number">106</span>, <span class="number">213</span>, <span class="number">48</span>, <span class="number">54</span>, <span class="number">165</span>, <span class="number">56</span>, <span class="number">191</span>, <span class="number">64</span>, <span class="number">163</span>, <span class="number">158</span>, <span class="number">129</span>, <span class="number">243</span>, <span class="number">215</span>, <span class="number">251</span>, <span class="number">124</span>, <span class="number">227</span>, <span class="number">57</span>, <span class="number">130</span>, <span class="number">155</span>, <span class="number">47</span>, <span class="number">255</span>, <span class="number">135</span>, <span class="number">52</span>, <span class="number">142</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">196</span>, <span class="number">222</span>, <span class="number">233</span>, <span class="number">203</span>, <span class="number">84</span>, <span class="number">123</span>, <span class="number">148</span>, <span class="number">50</span>, <span class="number">166</span>, <span class="number">194</span>, <span class="number">35</span>, <span class="number">61</span>, <span class="number">238</span>, <span class="number">76</span>, <span class="number">149</span>, <span class="number">11</span>, <span class="number">66</span>, <span class="number">250</span>, <span class="number">195</span>, <span class="number">78</span>, <span class="number">8</span>, <span class="number">46</span>, <span class="number">161</span>, <span class="number">102</span>, <span class="number">40</span>, <span class="number">217</span>, <span class="number">36</span>, <span class="number">178</span>, <span class="number">118</span>, <span class="number">91</span>, <span class="number">162</span>, <span class="number">73</span>, <span class="number">109</span>, <span class="number">139</span>, <span class="number">209</span>, <span class="number">37</span>, <span class="number">114</span>, <span class="number">248</span>, <span class="number">246</span>, <span class="number">100</span>, <span class="number">134</span>, <span class="number">104</span>, <span class="number">152</span>, <span class="number">22</span>, <span class="number">212</span>, <span class="number">164</span>, <span class="number">92</span>, <span class="number">204</span>, <span class="number">93</span>, <span class="number">101</span>, <span class="number">182</span>, <span class="number">146</span>, <span class="number">108</span>, <span class="number">112</span>, <span class="number">72</span>, <span class="number">80</span>, <span class="number">253</span>, <span class="number">237</span>, <span class="number">185</span>, <span class="number">218</span>, <span class="number">94</span>, <span class="number">21</span>, <span class="number">70</span>, <span class="number">87</span>, <span class="number">167</span>, <span class="number">141</span>, <span class="number">157</span>, <span class="number">132</span>, <span class="number">144</span>, <span class="number">216</span>, <span class="number">171</span>, <span class="number">0</span>, <span class="number">140</span>, <span class="number">188</span>, <span class="number">211</span>, <span class="number">10</span>, <span class="number">247</span>, <span class="number">228</span>, <span class="number">88</span>, <span class="number">5</span>, <span class="number">184</span>, <span class="number">179</span>, <span class="number">69</span>, <span class="number">6</span>, <span class="number">208</span>, <span class="number">44</span>, <span class="number">30</span>, <span class="number">143</span>, <span class="number">202</span>, <span class="number">63</span>, <span class="number">15</span>, <span class="number">2</span>, <span class="number">193</span>, <span class="number">175</span>, <span class="number">189</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">19</span>, <span class="number">138</span>, <span class="number">107</span>, <span class="number">58</span>, <span class="number">145</span>, <span class="number">17</span>, <span class="number">65</span>, <span class="number">79</span>, <span class="number">103</span>, <span class="number">220</span>, <span class="number">234</span>, <span class="number">151</span>, <span class="number">242</span>, <span class="number">207</span>, <span class="number">206</span>, <span class="number">240</span>, <span class="number">180</span>, <span class="number">230</span>, <span class="number">115</span>, <span class="number">150</span>, <span class="number">172</span>, <span class="number">116</span>, <span class="number">34</span>, <span class="number">231</span>, <span class="number">173</span>, <span class="number">53</span>, <span class="number">133</span>, <span class="number">226</span>, <span class="number">249</span>, <span class="number">55</span>, <span class="number">232</span>, <span class="number">28</span>, <span class="number">117</span>, <span class="number">223</span>, <span class="number">110</span>, <span class="number">71</span>, <span class="number">241</span>, <span class="number">26</span>, <span class="number">113</span>, <span class="number">29</span>, <span class="number">41</span>, <span class="number">197</span>, <span class="number">137</span>, <span class="number">111</span>, <span class="number">183</span>, <span class="number">98</span>, <span class="number">14</span>, <span class="number">170</span>, <span class="number">24</span>, <span class="number">190</span>, <span class="number">27</span>, <span class="number">252</span>, <span class="number">86</span>, <span class="number">62</span>, <span class="number">75</span>, <span class="number">198</span>, <span class="number">210</span>, <span class="number">121</span>, <span class="number">32</span>, <span class="number">154</span>, <span class="number">219</span>, <span class="number">192</span>, <span class="number">254</span>, <span class="number">120</span>, <span class="number">205</span>, <span class="number">90</span>, <span class="number">244</span>, <span class="number">31</span>, <span class="number">221</span>, <span class="number">168</span>, <span class="number">51</span>, <span class="number">136</span>, <span class="number">7</span>, <span class="number">199</span>, <span class="number">49</span>, <span class="number">177</span>, <span class="number">18</span>, <span class="number">16</span>, <span class="number">89</span>, <span class="number">39</span>, <span class="number">128</span>, <span class="number">236</span>, <span class="number">95</span>, <span class="number">96</span>, <span class="number">81</span>, <span class="number">127</span>, <span class="number">169</span>, <span class="number">25</span>, <span class="number">181</span>, <span class="number">74</span>, <span class="number">13</span>, <span class="number">45</span>, <span class="number">229</span>, <span class="number">122</span>, <span class="number">159</span>, <span class="number">147</span>, <span class="number">201</span>, <span class="number">156</span>, <span class="number">239</span>, <span class="number">160</span>, <span class="number">224</span>, <span class="number">59</span>, <span class="number">77</span>, <span class="number">174</span>, <span class="number">42</span>, <span class="number">245</span>, <span class="number">176</span>, <span class="number">200</span>, <span class="number">235</span>, <span class="number">187</span>, <span class="number">60</span>, <span class="number">131</span>, <span class="number">83</span>, <span class="number">153</span>, <span class="number">97</span>, <span class="number">23</span>, <span class="number">43</span>, <span class="number">4</span>, <span class="number">126</span>, <span class="number">186</span>, <span class="number">119</span>, <span class="number">214</span>, <span class="number">38</span>, <span class="number">225</span>, <span class="number">105</span>,</span><br><span class="line"><span class="number">20</span>, <span class="number">99</span>, <span class="number">85</span>, <span class="number">33</span>, <span class="number">12</span>, <span class="number">125</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * https://en.wikipedia.org/wiki/Finite_field_arithmetic</span></span><br><span class="line"><span class="comment"> * Multiply two numbers in the GF(2^8) finite field defined</span></span><br><span class="line"><span class="comment"> * by the polynomial x^8 + x^4 + x^3 + x + 1 = 0</span></span><br><span class="line"><span class="comment"> * We do use mul2(int8_t a) but not mul(uint8_t a, uint8_t b)</span></span><br><span class="line"><span class="comment"> * just in order to get a higher speed.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">uint8_t</span> <span class="title function_">mul2</span><span class="params">(<span class="type">uint8_t</span> a)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="number">0x1B</span> * ((a &gt;&gt; <span class="number">7</span>) &amp; <span class="number">1</span>)) ^ (<span class="number">2</span> * a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @purpose:    ShiftRows</span></span><br><span class="line"><span class="comment"> * @descrption:</span></span><br><span class="line"><span class="comment"> *  Row0: s0  s4  s8  s12   &lt;&lt;&lt; 0 byte</span></span><br><span class="line"><span class="comment"> *  Row1: s1  s5  s9  s13   &lt;&lt;&lt; 1 byte</span></span><br><span class="line"><span class="comment"> *  Row2: s2  s6  s10 s14   &lt;&lt;&lt; 2 bytes</span></span><br><span class="line"><span class="comment"> *  Row3: s3  s7  s11 s15   &lt;&lt;&lt; 3 bytes</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">shift_rows</span><span class="params">(<span class="type">uint8_t</span>* state)</span> &#123;</span><br><span class="line">    <span class="type">uint8_t</span> temp;</span><br><span class="line">    <span class="comment">// row1</span></span><br><span class="line">    temp = *(state + <span class="number">1</span>);</span><br><span class="line">    *(state + <span class="number">1</span>) = *(state + <span class="number">5</span>);</span><br><span class="line">    *(state + <span class="number">5</span>) = *(state + <span class="number">9</span>);</span><br><span class="line">    *(state + <span class="number">9</span>) = *(state + <span class="number">13</span>);</span><br><span class="line">    *(state + <span class="number">13</span>) = temp;</span><br><span class="line">    <span class="comment">// row2</span></span><br><span class="line">    temp = *(state + <span class="number">2</span>);</span><br><span class="line">    *(state + <span class="number">2</span>) = *(state + <span class="number">10</span>);</span><br><span class="line">    *(state + <span class="number">10</span>) = temp;</span><br><span class="line">    temp = *(state + <span class="number">6</span>);</span><br><span class="line">    *(state + <span class="number">6</span>) = *(state + <span class="number">14</span>);</span><br><span class="line">    *(state + <span class="number">14</span>) = temp;</span><br><span class="line">    <span class="comment">// row3</span></span><br><span class="line">    temp = *(state + <span class="number">15</span>);</span><br><span class="line">    *(state + <span class="number">15</span>) = *(state + <span class="number">11</span>);</span><br><span class="line">    *(state + <span class="number">11</span>) = *(state + <span class="number">7</span>);</span><br><span class="line">    *(state + <span class="number">7</span>) = *(state + <span class="number">3</span>);</span><br><span class="line">    *(state + <span class="number">3</span>) = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @purpose:    Inverse ShiftRows</span></span><br><span class="line"><span class="comment"> * @description</span></span><br><span class="line"><span class="comment"> *  Row0: s0  s4  s8  s12   &gt;&gt;&gt; 0 byte</span></span><br><span class="line"><span class="comment"> *  Row1: s1  s5  s9  s13   &gt;&gt;&gt; 1 byte</span></span><br><span class="line"><span class="comment"> *  Row2: s2  s6  s10 s14   &gt;&gt;&gt; 2 bytes</span></span><br><span class="line"><span class="comment"> *  Row3: s3  s7  s11 s15   &gt;&gt;&gt; 3 bytes</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">inv_shift_rows</span><span class="params">(<span class="type">uint8_t</span>* state)</span> &#123;</span><br><span class="line">    <span class="type">uint8_t</span> temp;</span><br><span class="line">    <span class="comment">// row1</span></span><br><span class="line">    temp = *(state + <span class="number">13</span>);</span><br><span class="line">    *(state + <span class="number">13</span>) = *(state + <span class="number">9</span>);</span><br><span class="line">    *(state + <span class="number">9</span>) = *(state + <span class="number">5</span>);</span><br><span class="line">    *(state + <span class="number">5</span>) = *(state + <span class="number">1</span>);</span><br><span class="line">    *(state + <span class="number">1</span>) = temp;</span><br><span class="line">    <span class="comment">// row2</span></span><br><span class="line">    temp = *(state + <span class="number">14</span>);</span><br><span class="line">    *(state + <span class="number">14</span>) = *(state + <span class="number">6</span>);</span><br><span class="line">    *(state + <span class="number">6</span>) = temp;</span><br><span class="line">    temp = *(state + <span class="number">10</span>);</span><br><span class="line">    *(state + <span class="number">10</span>) = *(state + <span class="number">2</span>);</span><br><span class="line">    *(state + <span class="number">2</span>) = temp;</span><br><span class="line">    <span class="comment">// row3</span></span><br><span class="line">    temp = *(state + <span class="number">3</span>);</span><br><span class="line">    *(state + <span class="number">3</span>) = *(state + <span class="number">7</span>);</span><br><span class="line">    *(state + <span class="number">7</span>) = *(state + <span class="number">11</span>);</span><br><span class="line">    *(state + <span class="number">11</span>) = *(state + <span class="number">15</span>);</span><br><span class="line">    *(state + <span class="number">15</span>) = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">aes_key_schedule_128</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span>* key, <span class="type">uint8_t</span>* roundkeys)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">uint8_t</span> temp[<span class="number">4</span>];</span><br><span class="line">    <span class="type">uint8_t</span>* last4bytes; <span class="comment">// point to the last 4 bytes of one round</span></span><br><span class="line">    <span class="type">uint8_t</span>* lastround;</span><br><span class="line">    <span class="type">uint8_t</span> i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">16</span>; ++i) &#123;</span><br><span class="line">        *roundkeys++ = *key++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    last4bytes = roundkeys - <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_ROUNDS; ++i) &#123;</span><br><span class="line">        <span class="comment">// k0-k3 for next round</span></span><br><span class="line">        temp[<span class="number">3</span>] = SBOX[*last4bytes++];</span><br><span class="line">        temp[<span class="number">0</span>] = SBOX[*last4bytes++];</span><br><span class="line">        temp[<span class="number">1</span>] = SBOX[*last4bytes++];</span><br><span class="line">        temp[<span class="number">2</span>] = SBOX[*last4bytes++];</span><br><span class="line">        temp[<span class="number">0</span>] ^= RC[i];</span><br><span class="line">        lastround = roundkeys - <span class="number">16</span>;</span><br><span class="line">        *roundkeys++ = temp[<span class="number">0</span>] ^ *lastround++;</span><br><span class="line">        *roundkeys++ = temp[<span class="number">1</span>] ^ *lastround++;</span><br><span class="line">        *roundkeys++ = temp[<span class="number">2</span>] ^ *lastround++;</span><br><span class="line">        *roundkeys++ = temp[<span class="number">3</span>] ^ *lastround++;</span><br><span class="line">        <span class="comment">// k4-k7 for next round        </span></span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        <span class="comment">// k8-k11 for next round</span></span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        <span class="comment">// k12-k15 for next round</span></span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">        *roundkeys++ = *last4bytes++ ^ *lastround++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">aes_encrypt_128</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span>* roundkeys, <span class="type">const</span> <span class="type">uint8_t</span>* plaintext, <span class="type">uint8_t</span>* ciphertext)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">uint8_t</span> tmp[<span class="number">16</span>] = &#123;<span class="number">0</span>&#125;, t;</span><br><span class="line">    <span class="type">uint8_t</span> i, j;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// first AddRoundKey</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">        *(ciphertext + i) = *(plaintext + i) ^ *roundkeys++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; AES_BLOCK_SIZE; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        *(ciphertext + j) ^= xor1[j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 9 rounds</span></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; AES_ROUNDS; ++j) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// SubBytes</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">            *(tmp + i) = SBOX[*(ciphertext + i)];</span><br><span class="line">            *(tmp + i) ^= <span class="number">0xA1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        shift_rows(tmp);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * MixColumns</span></span><br><span class="line"><span class="comment">         * [02 03 01 01]   [s0  s4  s8  s12]</span></span><br><span class="line"><span class="comment">         * [01 02 03 01] . [s1  s5  s9  s13]</span></span><br><span class="line"><span class="comment">         * [01 01 02 03]   [s2  s6  s10 s14]</span></span><br><span class="line"><span class="comment">         * [03 01 01 02]   [s3  s7  s11 s15]</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; i += <span class="number">4</span>) &#123;</span><br><span class="line">            t = tmp[i] ^ tmp[i + <span class="number">1</span>] ^ tmp[i + <span class="number">2</span>] ^ tmp[i + <span class="number">3</span>];</span><br><span class="line">            ciphertext[i] = mul2(tmp[i] ^ tmp[i + <span class="number">1</span>]) ^ tmp[i] ^ t;</span><br><span class="line">            ciphertext[i + <span class="number">1</span>] = mul2(tmp[i + <span class="number">1</span>] ^ tmp[i + <span class="number">2</span>]) ^ tmp[i + <span class="number">1</span>] ^ t;</span><br><span class="line">            ciphertext[i + <span class="number">2</span>] = mul2(tmp[i + <span class="number">2</span>] ^ tmp[i + <span class="number">3</span>]) ^ tmp[i + <span class="number">2</span>] ^ t;</span><br><span class="line">            ciphertext[i + <span class="number">3</span>] = mul2(tmp[i + <span class="number">3</span>] ^ tmp[i]) ^ tmp[i + <span class="number">3</span>] ^ t;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            ciphertext[j] ^= <span class="number">0x54</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// AddRoundKey</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">            *(ciphertext + i) ^= *roundkeys++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; AES_BLOCK_SIZE; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            *(ciphertext + j) ^= xor1[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// last round</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">        *(ciphertext + i) = SBOX[*(ciphertext + i)];</span><br><span class="line">        *(ciphertext + i) ^= <span class="number">0xA1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    shift_rows(ciphertext);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">        *(ciphertext + i) ^= *roundkeys++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; AES_BLOCK_SIZE; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        *(ciphertext + j) ^= xor1[j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">aes_decrypt_128</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span>* roundkeys, <span class="type">const</span> <span class="type">uint8_t</span>* ciphertext, <span class="type">uint8_t</span>* plaintext)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">uint8_t</span> tmp[<span class="number">16</span>];</span><br><span class="line">    <span class="type">uint8_t</span> t, u, v;</span><br><span class="line">    <span class="type">uint8_t</span> i, j;</span><br><span class="line"></span><br><span class="line">    roundkeys += <span class="number">160</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// first round</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) </span><br><span class="line">    &#123;</span><br><span class="line">        *(plaintext + i) = *(ciphertext + i) ^ *(roundkeys + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; AES_BLOCK_SIZE; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        *(plaintext + j) ^= xor1[j];</span><br><span class="line">    &#125;</span><br><span class="line">    roundkeys -= <span class="number">16</span>;</span><br><span class="line">    inv_shift_rows(plaintext);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">        *(plaintext + i)^= <span class="number">0xA1</span>;</span><br><span class="line">        *(plaintext + i) = INV_SBOX[*(plaintext + i)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; AES_ROUNDS; ++j) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Inverse AddRoundKey</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">            *(tmp + i) = *(plaintext + i) ^ *(roundkeys + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; AES_BLOCK_SIZE; ++j) &#123;</span><br><span class="line"></span><br><span class="line">            *(tmp + j) ^= xor1[j];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * Inverse MixColumns</span></span><br><span class="line"><span class="comment">         * [0e 0b 0d 09]   [s0  s4  s8  s12]</span></span><br><span class="line"><span class="comment">         * [09 0e 0b 0d] . [s1  s5  s9  s13]</span></span><br><span class="line"><span class="comment">         * [0d 09 0e 0b]   [s2  s6  s10 s14]</span></span><br><span class="line"><span class="comment">         * [0b 0d 09 0e]   [s3  s7  s11 s15]</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            tmp[j] ^= <span class="number">0x54</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; i += <span class="number">4</span>) &#123;</span><br><span class="line">            t = tmp[i] ^ tmp[i + <span class="number">1</span>] ^ tmp[i + <span class="number">2</span>] ^ tmp[i + <span class="number">3</span>];</span><br><span class="line">            plaintext[i] = t ^ tmp[i] ^ mul2(tmp[i] ^ tmp[i + <span class="number">1</span>]);</span><br><span class="line">            plaintext[i + <span class="number">1</span>] = t ^ tmp[i + <span class="number">1</span>] ^ mul2(tmp[i + <span class="number">1</span>] ^ tmp[i + <span class="number">2</span>]);</span><br><span class="line">            plaintext[i + <span class="number">2</span>] = t ^ tmp[i + <span class="number">2</span>] ^ mul2(tmp[i + <span class="number">2</span>] ^ tmp[i + <span class="number">3</span>]);</span><br><span class="line">            plaintext[i + <span class="number">3</span>] = t ^ tmp[i + <span class="number">3</span>] ^ mul2(tmp[i + <span class="number">3</span>] ^ tmp[i]);</span><br><span class="line">            u = mul2(mul2(tmp[i] ^ tmp[i + <span class="number">2</span>]));</span><br><span class="line">            v = mul2(mul2(tmp[i + <span class="number">1</span>] ^ tmp[i + <span class="number">3</span>]));</span><br><span class="line">            t = mul2(u ^ v);</span><br><span class="line">            plaintext[i] ^= t ^ u;</span><br><span class="line">            plaintext[i + <span class="number">1</span>] ^= t ^ v;</span><br><span class="line">            plaintext[i + <span class="number">2</span>] ^= t ^ u;</span><br><span class="line">            plaintext[i + <span class="number">3</span>] ^= t ^ v;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Inverse ShiftRows</span></span><br><span class="line">        inv_shift_rows(plaintext);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Inverse SubBytes</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">            *(plaintext + i) ^= <span class="number">0xA1</span>;</span><br><span class="line">            *(plaintext + i) = INV_SBOX[*(plaintext + i)];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        roundkeys -= <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// last AddRoundKey</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; AES_BLOCK_SIZE; ++i) &#123;</span><br><span class="line">        </span><br><span class="line">        *(plaintext + i) ^= *(roundkeys + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; AES_BLOCK_SIZE; ++j) &#123;</span><br><span class="line"></span><br><span class="line">        *(plaintext + j) ^= xor1[j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>main.cæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> *</span><br><span class="line"> * Chinese Academy of Sciences</span><br><span class="line"> * State Key Laboratory of Information Security</span><br><span class="line"> * Institute of Information Engineering</span><br><span class="line"> *</span><br><span class="line"> * Copyright (C) 2016 Chinese Academy of Sciences</span><br><span class="line"> *</span><br><span class="line"> * LuoPeng, luopeng@iie.ac.cn</span><br><span class="line"> * Updated in May 2016</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">#include &quot;aes.h&quot;</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[]) &#123;</span><br><span class="line"></span><br><span class="line">uint8_t i, r;</span><br><span class="line"></span><br><span class="line">/* 128 bit key */</span><br><span class="line">uint8_t key[] = &#123;</span><br><span class="line">//0x0f, 0x15, 0x71, 0xc9, 0x47, 0xd9, 0xe8, 0x59, </span><br><span class="line">//0x0c, 0xb7, 0xad, 0xd6, 0xaf, 0x7f, 0x67, 0x98,</span><br><span class="line">0x67, 0x61, 0x68, 0x34, 0x33, 0x6A, 0x4A, 0x4B, 0x67, 0x66, 0x6A, 0x47, 0x4D, 0x65, 0x41, 0x52</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">uint8_t plaintext[] = &#123;</span><br><span class="line">//0x01, 0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef,</span><br><span class="line">//0xfe, 0xdc, 0xba, 0x98, 0x76, 0x54, 0x32, 0x10,</span><br><span class="line">0x66,0x6c,0x61,0x67,0x7b,0x52,0x65,0x5f,0x31,0x74,0x73,0x5f,0x66,0x30,0x6e,0x7d</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">uint8_t ciphertext[AES_BLOCK_SIZE];</span><br><span class="line"></span><br><span class="line">const uint8_t const_cipher[AES_BLOCK_SIZE] = &#123;</span><br><span class="line">//0xff, 0x0b, 0x84, 0x4a, 0x08, 0x53, 0xbf, 0x7c,</span><br><span class="line">//0x69, 0x34, 0xab, 0x43, 0x64, 0x14, 0x8f, 0xb9,</span><br><span class="line">0xB4, 0x38, 0x36, 0x30, 0x1E, 0x68, 0x48, 0x57, 0x51, 0x01, 0xB7, 0x03, 0x9B, 0x98, 0xE3, 0x7E &#125;;</span><br><span class="line">//74 BA B6 98 4C BE FF 09 46 CC D3 29 7A 21 C3 F7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">printf(&quot;\n--------------------------------------------------------\n&quot;);</span><br><span class="line">printf(&quot;Plain text:\n&quot;);</span><br><span class="line">for (i = 0; i &lt; AES_BLOCK_SIZE; i++) &#123;</span><br><span class="line">printf(&quot;%c&quot;, plaintext[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(&quot;\n\n&quot;);</span><br><span class="line">for (i = 0; i &lt; AES_BLOCK_SIZE; i++) &#123;</span><br><span class="line">printf(&quot;%c&quot;, key[i]);</span><br><span class="line">&#125;</span><br><span class="line">printf(&quot;\n\n&quot;);</span><br><span class="line"></span><br><span class="line">static uint8_t roundkeys[AES_ROUND_KEY_SIZE] = &#123; 0x67, 0x61, 0x68, 0x34, 0x33, 0x6A, 0x4A, 0x4B, 0x67, 0x66, 0x6A, 0x47, 0x4D, 0x65, 0x41, 0x52, 0x2B, 0xE2, 0x68, 0xD7, 0x18, 0x88, 0x22, 0x9C, 0x7F, 0xEE, 0x48, 0xDB, 0x32, 0x8B, 0x09, 0x89, 0x14, 0xE3, 0xCF, 0xF4, 0x0C, 0x6B, 0xED, 0x68, 0x73, 0x85, 0xA5, 0xB3, 0x41, 0x0E, 0xAC, 0x3A, 0xBB, 0x72, 0x4F, 0x77, 0xB7, 0x19, 0xA2, 0x1F, 0xC4, 0x9C, 0x07, 0xAC, 0x85, 0x92, 0xAB, 0x96, 0xFC, 0x10, 0xDF, 0xE0, 0x4B, 0x09, 0x7D, 0xFF, 0x8F, 0x95, 0x7A, 0x53, 0x0A, 0x07, 0xD1, 0xC5, 0x29, 0x2E, 0x79, 0x87, 0x62, 0x27, 0x04, 0x78, 0xED, 0xB2, 0x7E, 0x2B, 0xE7, 0xB5, 0xAF, 0xEE, 0xDC, 0x57, 0x51, 0x13, 0xBE, 0x70, 0x55, 0x6B, 0x53, 0xC2, 0x2B, 0x40, 0xB4, 0x77, 0x84, 0xAE, 0x69, 0x08, 0xB5, 0x9E, 0xD7, 0x78, 0xE0, 0xF5, 0x84, 0xBA, 0xCB, 0xB5, 0x30, 0xCD, 0x4F, 0x1B, 0x54, 0x8C, 0x1A, 0x9A, 0x83, 0xF4, 0xFA, 0x6F, 0x07, 0x4E, 0x31, 0xDA, 0x37, 0x83, 0x7E, 0xC1, 0xA3, 0x7F, 0x62, 0x00, 0x20, 0x8B, 0x98, 0x6F, 0x27, 0xC5, 0xA9, 0xB5, 0x10, 0x46, 0xD7, 0x74, 0xCF, 0x71, 0xF0, 0xCA, 0xEF, 0xFA, 0x68, 0xA5, 0xC8, 0x3F, 0xC1, 0x10, 0xD8, 0x79, 0x16, 0x64 &#125;;</span><br><span class="line">// decryption</span><br><span class="line">aes_decrypt_128(roundkeys, const_cipher, ciphertext);</span><br><span class="line">printf(&quot;Plain text:\n&quot;);</span><br><span class="line">for (i = 0; i &lt; AES_BLOCK_SIZE; i++) &#123;</span><br><span class="line">printf(&quot;%2x &quot;, ciphertext[i]);</span><br><span class="line">&#125;</span><br><span class="line">for (i = 0; i &lt; AES_BLOCK_SIZE; i++) &#123;</span><br><span class="line">if (ciphertext[i] != plaintext[i]) &#123; break; &#125;</span><br><span class="line">&#125;</span><br><span class="line">if (AES_BLOCK_SIZE != i) &#123; printf(&quot;\nDECRYPT WRONG\n\n&quot;); &#125;</span><br><span class="line">else &#123; printf(&quot;\nDECRYPT CORRECT\n\n&quot;); &#125;</span><br><span class="line"></span><br><span class="line">return 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/720.png" class="lazyload" data-srcset="/../image/720.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="720"></p><p>æ€»ç»“ä¸€ä¸‹è‡ªå·±è¿™æ¬¡çš„è¿‡å¤±</p><ul><li>æ²¡æœ‰æ³¨æ„åˆ°TLSï¼Œå¯¼è‡´è‡ªå·±ä¸€ç›´åœ¨åšè°ƒè¯•</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥ç»ƒä¹ ä¸€é¢˜ä¹‹AESé­”æ”¹&lt;/p&gt;
&lt;p&gt;é¢˜ç›®é“¾æ¥å¦‚ä¸‹ï¼Œä¾›å„ä½å¸ˆå‚…ä¸‹è½½&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://wwb.lanzout.com/iq2Aw20n4ype&quot;&gt;https://wwb.lanzout.com/iq2Aw20n4ype&lt;/a&gt;&lt;br&gt;å¯†ç :2</summary>
      
    
    
    
    <category term="é€†å‘" scheme="https://5m10v3.github.io/categories/%E9%80%86%E5%90%91/"/>
    
    
    <category term="ctfå­¦ä¹ " scheme="https://5m10v3.github.io/tags/ctf%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥è®°(23)</title>
    <link href="https://5m10v3.github.io/2024/05/12/%E6%97%A5%E8%AE%B0(23)/"/>
    <id>https://5m10v3.github.io/2024/05/12/%E6%97%A5%E8%AE%B0(23)/</id>
    <published>2024-05-11T16:00:00.000Z</published>
    <updated>2024-06-08T01:50:52.329Z</updated>
    
    <content type="html"><![CDATA[<p>ç¼–å†™é‚£ä¸ªpeç—…æ¯’æ²¡æœ‰æˆåŠŸï¼Œä¸»è¦æ˜¯åœ¨æ·»åŠ å®Œä¸€ä¸ªæ–°èŠ‚åœ°å€æ²¡æœ‰å¯¹é½<br>æ„Ÿè§‰è¿™å‡ å¤©éƒ½æ¯”è¾ƒæµ‘æµ‘å™©å™©ï¼Œä¸èƒ½å†è¿™æ ·ä¸‹å»äº†ï¼Œè¦é‡æ–°æŒ¯ä½œèµ·æ¥</p><p>æ„Ÿè§‰å¯¹å¥½å‡ ä¸ªæ–¹å‘éƒ½æçš„è¯ï¼Œæ›´åŠ çš„è¿·èŒ«äº†ï¼Œç›®å‰è¿˜æ˜¯è¦å­¦ä¸€äº›å®é™…çš„ä¸œè¥¿</p><ul><li>LLVMçš„åˆæ­¥å­¦ä¹ </li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç¼–å†™é‚£ä¸ªpeç—…æ¯’æ²¡æœ‰æˆåŠŸï¼Œä¸»è¦æ˜¯åœ¨æ·»åŠ å®Œä¸€ä¸ªæ–°èŠ‚åœ°å€æ²¡æœ‰å¯¹é½&lt;br&gt;æ„Ÿè§‰è¿™å‡ å¤©éƒ½æ¯”è¾ƒæµ‘æµ‘å™©å™©ï¼Œä¸èƒ½å†è¿™æ ·ä¸‹å»äº†ï¼Œè¦é‡æ–°æŒ¯ä½œèµ·æ¥&lt;/p&gt;
&lt;p&gt;æ„Ÿè§‰å¯¹å¥½å‡ ä¸ªæ–¹å‘éƒ½æçš„è¯ï¼Œæ›´åŠ çš„è¿·èŒ«äº†ï¼Œç›®å‰è¿˜æ˜¯è¦å­¦ä¸€äº›å®é™…çš„ä¸œè¥¿&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LLVMçš„åˆæ­¥å­¦ä¹ &lt;/li&gt;
&lt;/ul</summary>
      
    
    
    
    <category term="æ—¥è®°" scheme="https://5m10v3.github.io/categories/%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>PEæ–‡ä»¶æ ¼å¼è§£æ</title>
    <link href="https://5m10v3.github.io/2024/05/10/[%E9%80%86%E5%90%91]PE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/"/>
    <id>https://5m10v3.github.io/2024/05/10/[%E9%80%86%E5%90%91]PE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E8%A7%A3%E6%9E%90/</id>
    <published>2024-05-09T16:00:00.000Z</published>
    <updated>2024-06-09T09:08:48.795Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹å›¾æ˜¯PEæ–‡ä»¶æ ¼å¼ç¤ºæ„å›¾<br><img src="/2024/05/10/[é€†å‘]PEæ–‡ä»¶æ ¼å¼è§£æ/image" class="lazyload" data-srcset="/2024/05/10/[é€†å‘]PEæ–‡ä»¶æ ¼å¼è§£æ/image" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="  alt="660" style="zoom:67%;" /></p><h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><p>é¦–å…ˆåœ¨è¿™é‡Œè¯´æ˜ä¸€ä¸ªæ¦‚å¿µï¼Œå¯æ‰§è¡Œæ–‡ä»¶(Executable File)æ˜¯æŒ‡å¯ä»¥ç”±æ“ä½œç³»ç»Ÿç›´æ¥åŠ è½½çš„æ–‡ä»¶ï¼Œåœ¨Windowsæ“ä½œç³»ç»Ÿä¸­å¯æ‰§è¡Œæ–‡ä»¶å°±æ˜¯PEæ–‡ä»¶ç»“æ„ï¼Œåœ¨Linuxä¸‹åˆ™æ˜¯ELFæ–‡ä»¶ï¼Œæˆ‘ä»¬è¿™é‡Œåªè®¨è®ºWindowsä¸‹çš„PEæ–‡ä»¶ï¼Œè¦äº†è§£PEæ–‡ä»¶ï¼Œé¦–å…ˆè¦çŸ¥é“PEæ ¼å¼ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯PEæ ¼å¼å‘¢ï¼Œæ—¢ç„¶æ˜¯ä¸€ä¸ªæ ¼å¼ï¼Œé‚£è‚¯å®šæ˜¯æˆ‘ä»¬éƒ½éœ€è¦éµå¾ªçš„å®šç†</p><p>å…¶å®PEæ ¼å¼å°±æ˜¯å„ç§ç»“æ„ä½“çš„ç»“åˆï¼ŒWindowsä¸‹PEæ–‡ä»¶çš„å„ç§ç»“æ„ä½“åœ¨WinNT.hè¿™ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œå¯ä»¥åœ¨VSä¸­æŸ¥è¯¢ã€‚</p><h3 id="PEæ–‡ä»¶æ•´ä½“ç»“æ„"><a href="#PEæ–‡ä»¶æ•´ä½“ç»“æ„" class="headerlink" title="PEæ–‡ä»¶æ•´ä½“ç»“æ„"></a>PEæ–‡ä»¶æ•´ä½“ç»“æ„</h3><p>PEç»“æ„å¯ä»¥å¤§è‡´åˆ†ä¸º:</p><ul><li>DOSéƒ¨åˆ†</li><li>PEæ–‡ä»¶å¤´</li><li>èŠ‚è¡¨(å—è¡¨)</li><li>èŠ‚æ•°æ®(å—æ•°æ®)</li><li>è°ƒè¯•ä¿¡æ¯</li></ul><h3 id="PEæŒ‡çº¹"><a href="#PEæŒ‡çº¹" class="headerlink" title="PEæŒ‡çº¹"></a>PEæŒ‡çº¹</h3><p>PEæŒ‡çº¹æ˜¯ä»€ä¹ˆå‘¢?å…¶å®å°±æ˜¯è·Ÿæˆ‘ä»¬ç°å®ç”Ÿæ´»ä¸­çš„æŒ‡çº¹ä¸€æ ·ï¼Œä¸ºäº†è¯†åˆ«ä¸€äº›ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥åˆ¤æ–­æ˜¯å¦ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„PEæ–‡ä»¶ã€‚</p><p>åˆ†æå…¶ç»“æ„ï¼Œé¦–å…ˆæ˜¯æ ¹æ®æ–‡ä»¶çš„å‰ä¸¤ä¸ªå­—èŠ‚æ˜¯å¦ä¸º4D 5Aï¼Œä¹Ÿå°±æ˜¯â€™MZâ€™ï¼Œç„¶åçœ‹ç¬¬å››æ’å››ä¸ªå­—èŠ‚æŒ‡å‘çš„åœ°å€00 00 00 f0æ˜¯å¦ä¸º50 45ï¼Œä¹Ÿå°±æ˜¯â€™PEâ€™ï¼Œæ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ä¹Ÿå°±æ»¡è¶³äº†PEæ–‡ä»¶çš„æ ¼å¼.</p><p><img src="/../image/655.png" class="lazyload" data-srcset="/../image/655.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="655"></p><h3 id="DOSéƒ¨åˆ†"><a href="#DOSéƒ¨åˆ†" class="headerlink" title="DOSéƒ¨åˆ†"></a>DOSéƒ¨åˆ†</h3><p>DOSéƒ¨åˆ†ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹ä»¥å‰çš„DOSç³»ç»Ÿï¼ŒDOSéƒ¨åˆ†å¯ä»¥åˆ†ä¸ºDOS MZæ–‡ä»¶å¤´(IMAGE_DOS_HEADER)å’ŒDOSå—(DOS Stub)ç»„æˆï¼ŒPEæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä½äºä¸€ä¸ªä¼ ç»Ÿçš„MS-DOSå¤´éƒ¨ï¼Œç§°ä½œIMAGE_DOS_HEADERï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">typedef struct _IMAGE_DOS_HEADER &#123;      // DOS .EXE header</span><br><span class="line">    WORD   e_magic;                     // Magic number</span><br><span class="line">    WORD   e_cblp;                      // Bytes on last page of file</span><br><span class="line">    WORD   e_cp;                        // Pages in file</span><br><span class="line">    WORD   e_crlc;                      // Relocations</span><br><span class="line">    WORD   e_cparhdr;                   // Size of header in paragraphs</span><br><span class="line">    WORD   e_minalloc;                  // Minimum extra paragraphs needed</span><br><span class="line">    WORD   e_maxalloc;                  // Maximum extra paragraphs needed</span><br><span class="line">    WORD   e_ss;                        // Initial (relative) SS value</span><br><span class="line">    WORD   e_sp;                        // Initial SP value</span><br><span class="line">    WORD   e_csum;                      // Checksum</span><br><span class="line">    WORD   e_ip;                        // Initial IP value</span><br><span class="line">    WORD   e_cs;                        // Initial (relative) CS value</span><br><span class="line">    WORD   e_lfarlc;                    // File address of relocation table</span><br><span class="line">    WORD   e_ovno;                      // Overlay number</span><br><span class="line">    WORD   e_res[4];                    // Reserved words</span><br><span class="line">    WORD   e_oemid;                     // OEM identifier (for e_oeminfo)</span><br><span class="line">    WORD   e_oeminfo;                   // OEM information; e_oemid specific</span><br><span class="line">    WORD   e_res2[10];                  // Reserved words</span><br><span class="line">    LONG   e_lfanew;                    // File address of new exe header</span><br><span class="line">  &#125; IMAGE_DOS_HEADER, *PIMAGE_DOS_HEADER;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åªéœ€è¦ç†Ÿæ‚‰çš„æ˜¯ e_magic å’Œ e_lfanew è¿™ä¸¤éƒ¨åˆ†ï¼Œå‰è€…æ˜¯æ ‡è¯†PEæŒ‡çº¹çš„ä¸€éƒ¨åˆ†ï¼Œåè€…åˆ™æ˜¯å¯»æ‰¾PEæ–‡ä»¶å¤´çš„éƒ¨åˆ†ï¼Œå…¶å®ƒéƒ¨åˆ†å…¨éƒ¨å¡«0ï¼Œä¹Ÿä¸ä¼šå½±å“ç¨‹åºè¿è¡Œ</p><p><img src="/../image/656.png" class="lazyload" data-srcset="/../image/656.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="656"></p><p>ä¸Šå›¾æ˜¯Doséƒ¨åˆ†</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°e_lfanewæŒ‡å‘PEæ–‡ä»¶å¤´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥å¯»æ‰¾PEæ–‡ä»¶å¤´ï¼Œè€ŒDOSå—çš„éƒ¨åˆ†è‡ªç„¶å°±æ˜¯PEæ–‡ä»¶å¤´å’ŒDOS MZæ–‡ä»¶å¤´ä¸­é—´çš„éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†æ˜¯ç”±é“¾æ¥å™¨æ‰€å†™å…¥çš„ï¼Œå¯ä»¥éšæ„è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸å½±å“ç¨‹åºçš„è¿è¡Œï¼š</p><p><img src="/../image/657.png" class="lazyload" data-srcset="/../image/657.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="657"></p><h3 id="PEæ–‡ä»¶å¤´"><a href="#PEæ–‡ä»¶å¤´" class="headerlink" title="PEæ–‡ä»¶å¤´"></a>PEæ–‡ä»¶å¤´</h3><p>PEæ–‡ä»¶å¤´ç”±PEæ–‡ä»¶å¤´æ ‡å¿—ï¼Œæ ‡å‡†PEå¤´ï¼Œæ‰©å±•PEå¤´ä¸‰éƒ¨åˆ†ç»„æˆã€‚PEæ–‡ä»¶å¤´æ ‡å¿—è‡ªç„¶æ˜¯50 40 00 00ï¼Œä¹Ÿå°±æ˜¯â€™PEâ€™ï¼Œæˆ‘ä»¬ä»ç»“æ„ä½“çš„è§’åº¦çœ‹ä¸€ä¸‹PEæ–‡ä»¶å¤´çš„è¯¦ç»†ä¿¡æ¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_NT_HEADERS</span> &#123;</span></span><br><span class="line">    DWORD Signature; <span class="comment">//PEæ–‡ä»¶å¤´æ ‡å¿— =&gt; 4å­—èŠ‚</span></span><br><span class="line">    IMAGE_FILE_HEADER FileHeader; <span class="comment">//æ ‡å‡†PEå¤´ =&gt; 20å­—èŠ‚</span></span><br><span class="line">    IMAGE_OPTIONAL_HEADER32 OptionalHeader; <span class="comment">//æ‰©å±•PEå¤´ =&gt; 32ä½ä¸‹224å­—èŠ‚(0xE0) 64ä½ä¸‹240å­—èŠ‚(0xF0)</span></span><br><span class="line">&#125; IMAGE_NT_HEADERS32, *PIMAGE_NT_HEADERS32;</span><br></pre></td></tr></table></figure><p><img src="/../image/658.png" class="lazyload" data-srcset="/../image/658.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="658"></p><p>æ ‡é»„çš„åœ°æ–¹å°±æ˜¯peæ–‡ä»¶å¤´çš„ä½ç½®</p><p>ä¸‹å›¾åˆ’çº¿éƒ¨åˆ†ä¸ºPEæ–‡ä»¶æ ‡å¿—</p><p><img src="/../image/659.png" class="lazyload" data-srcset="/../image/659.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="659"></p><p>åé¢äºŒåä¸ªå­—èŠ‚ä¸ºPEæ ‡å‡†å¤´ï¼Œä¸€ç›´åˆ°10Bä¹‹å‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_FILE_HEADER</span> &#123;</span></span><br><span class="line">    WORD    Machine; <span class="comment">//å¯ä»¥è¿è¡Œåœ¨ä»€ä¹ˆå¹³å°ä¸Š ä»»æ„:0 ,Intel 386ä»¥åŠåç»­:14C x64:8664</span></span><br><span class="line">    WORD    NumberOfSections; <span class="comment">//èŠ‚çš„æ•°é‡</span></span><br><span class="line">    DWORD   TimeDateStamp; <span class="comment">//ç¼–è¯‘å™¨å¡«å†™çš„æ—¶é—´æˆ³</span></span><br><span class="line">    DWORD   PointerToSymbolTable;   <span class="comment">//è°ƒè¯•ç›¸å…³</span></span><br><span class="line">    DWORD   NumberOfSymbols; <span class="comment">//è°ƒè¯•ç›¸å…³</span></span><br><span class="line">    WORD    SizeOfOptionalHeader;   <span class="comment">//æ ‡è¯†æ‰©å±•PEå¤´å¤§å°</span></span><br><span class="line">    WORD    Characteristics;        <span class="comment">//æ–‡ä»¶å±æ€§ =&gt; 16è¿›åˆ¶è½¬æ¢ä¸º2è¿›åˆ¶æ ¹æ®å“ªäº›ä½æœ‰1,å¯ä»¥æŸ¥çœ‹ç›¸å…³å±æ€§</span></span><br><span class="line">&#125; IMAGE_FILE_HEADER, *PIMAGE_FILE_HEADER;</span><br></pre></td></tr></table></figure><p><img src="/../image/661.png" class="lazyload" data-srcset="/../image/661.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="661"></p><p>æ‹“å±•PEå¤´å¤§å°åœ¨32ä½å’Œ64ä½æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸‹å›¾ä¸º32ä½ç³»ç»Ÿ</p><p><img src="/../image/662.png" class="lazyload" data-srcset="/../image/662.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="662"></p><p>æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°æ˜¯0xF0ï¼Œè€Œ32ä½æ˜¯0xE0</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">typedef struct _IMAGE_OPTIONAL_HEADER &#123;</span><br><span class="line">    //</span><br><span class="line">    // Standard fields.</span><br><span class="line">    //</span><br><span class="line"></span><br><span class="line">    WORD    Magic;//PE32: 10B PE64: 20B</span><br><span class="line">    BYTE    MajorLinkerVersion;</span><br><span class="line">    BYTE    MinorLinkerVersion;</span><br><span class="line">    DWORD   SizeOfCode;//æ‰€æœ‰å«æœ‰ä»£ç çš„åŒºå—çš„å¤§å° ç¼–è¯‘å™¨å¡«å…¥ æ²¡ç”¨(å¯æ”¹)</span><br><span class="line">    DWORD   SizeOfInitializedData;//æ‰€æœ‰åˆå§‹åŒ–æ•°æ®åŒºå—çš„å¤§å° ç¼–è¯‘å™¨å¡«å…¥ æ²¡ç”¨(å¯æ”¹)</span><br><span class="line">    DWORD   SizeOfUninitializedData;//æ‰€æœ‰å«æœªåˆå§‹åŒ–æ•°æ®åŒºå—çš„å¤§å° ç¼–è¯‘å™¨å¡«å…¥ æ²¡ç”¨(å¯æ”¹)</span><br><span class="line">    DWORD   AddressOfEntryPoint;//ç¨‹åºå…¥å£RVA</span><br><span class="line">    DWORD   BaseOfCode;//ä»£ç åŒºå—èµ·å§‹RVA</span><br><span class="line">    DWORD   BaseOfData;//æ•°æ®åŒºå—èµ·å§‹RVA</span><br><span class="line"></span><br><span class="line">    //</span><br><span class="line">    // NT additional fields.</span><br><span class="line">    //</span><br><span class="line"></span><br><span class="line">    DWORD   ImageBase;//å†…å­˜é•œåƒåŸºå€(ç¨‹åºé»˜è®¤è½½å…¥åŸºåœ°å€)</span><br><span class="line">    DWORD   SectionAlignment; //å†…å­˜ä¸­å¯¹é½å¤§å°</span><br><span class="line">    DWORD   FileAlignment; //æ–‡ä»¶ä¸­å¯¹é½å¤§å°(æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡)</span><br><span class="line">    WORD    MajorOperatingSystemVersion;</span><br><span class="line">    WORD    MinorOperatingSystemVersion;</span><br><span class="line">    WORD    MajorImageVersion;</span><br><span class="line">    WORD    MinorImageVersion;</span><br><span class="line">    WORD    MajorSubsystemVersion;</span><br><span class="line">    WORD    MinorSubsystemVersion;</span><br><span class="line">    DWORD   Win32VersionValue;</span><br><span class="line">    DWORD   SizeOfImage;//å†…å­˜ä¸­æ•´ä¸ªPEæ–‡ä»¶çš„æ˜ å°„çš„å°ºå¯¸,å¯æ¯”å®é™…å€¼å¤§,å¿…é¡»æ˜¯SectionAlignmentçš„æ•´æ•°å€</span><br><span class="line">    DWORD   SizeOfHeaders; //æ‰€æœ‰çš„å¤´åŠ ä¸ŠèŠ‚è¡¨æ–‡ä»¶å¯¹é½ä¹‹åçš„å€¼</span><br><span class="line">    DWORD   CheckSum;//æ˜ åƒæ ¡éªŒå’Œ,ä¸€äº›ç³»ç»Ÿ.dllæ–‡ä»¶æœ‰è¦æ±‚,åˆ¤æ–­æ˜¯å¦è¢«ä¿®æ”¹</span><br><span class="line">    WORD    Subsystem;</span><br><span class="line">    WORD    DllCharacteristics;//æ–‡ä»¶ç‰¹æ€§,ä¸æ˜¯é’ˆå¯¹DLLæ–‡ä»¶çš„,16è¿›åˆ¶è½¬æ¢2è¿›åˆ¶å¯ä»¥æ ¹æ®å±æ€§å¯¹åº”çš„è¡¨æ ¼å¾—åˆ°ç›¸åº”çš„å±æ€§</span><br><span class="line">    DWORD   SizeOfStackReserve;</span><br><span class="line">    DWORD   SizeOfStackCommit;</span><br><span class="line">    DWORD   SizeOfHeapReserve;</span><br><span class="line">    DWORD   SizeOfHeapCommit;</span><br><span class="line">    DWORD   LoaderFlags;</span><br><span class="line">    DWORD   NumberOfRvaAndSizes;</span><br><span class="line">    IMAGE_DATA_DIRECTORY DataDirectory[IMAGE_NUMBEROF_DIRECTORY_ENTRIES]; //æ•°æ®ç›®å½•è¡¨,ç»“æ„ä½“æ•°ç»„</span><br><span class="line">&#125; IMAGE_OPTIONAL_HEADER32, *PIMAGE_OPTIONAL_HEADER32;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ€»ç»“ä¸€ç‚¹ï¼šç¨‹åºçš„çœŸæ­£å…¥å£ç‚¹æ˜¯ &#x3D; imageBase + AddressEntryPoint</p><h3 id="èŠ‚è¡¨"><a href="#èŠ‚è¡¨" class="headerlink" title="èŠ‚è¡¨"></a>èŠ‚è¡¨</h3><p>èŠ‚è¡¨çš„ç»“æ„å¦‚ä¸‹ï¼Œæ•´ä½“ä¸º40ä¸ªå­—èŠ‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">typedef struct _IMAGE_SECTION_HEADER &#123;</span><br><span class="line">    BYTE    Name[IMAGE_SIZEOF_SHORT_NAME]; //ASCIIå­—ç¬¦ä¸² å¯è‡ªå®šä¹‰ åªæˆªå–8ä¸ªå­—èŠ‚</span><br><span class="line">    union &#123;   //è¯¥èŠ‚åœ¨æ²¡æœ‰å¯¹é½ä¹‹å‰çš„çœŸå®å°ºå¯¸,è¯¥å€¼å¯ä»¥ä¸å‡†ç¡®</span><br><span class="line">            DWORD   PhysicalAddress;</span><br><span class="line">            DWORD   VirtualSize;</span><br><span class="line">    &#125; Misc;</span><br><span class="line">    DWORD   VirtualAddress;    //å†…å­˜ä¸­çš„åç§»åœ°å€</span><br><span class="line">    DWORD   SizeOfRawData;   //èŠ‚åœ¨æ–‡ä»¶ä¸­å¯¹é½çš„å°ºå¯¸</span><br><span class="line">    DWORD   PointerToRawData;   //èŠ‚åŒºåœ¨æ–‡ä»¶ä¸­çš„åç§»</span><br><span class="line">    DWORD   PointerToRelocations;</span><br><span class="line">    DWORD   PointerToLinenumbers;</span><br><span class="line">    WORD    NumberOfRelocations;</span><br><span class="line">    WORD    NumberOfLinenumbers;</span><br><span class="line">    DWORD   Characteristics;   //èŠ‚çš„å±æ€§</span><br><span class="line">&#125; IMAGE_SECTION_HEADER, *PIMAGE_SECTION_HEADER;</span><br></pre></td></tr></table></figure><p>ç¨‹åºä¸­æ˜¾ç¤ºå¦‚ä¸‹ï¼ˆè“è‰²éƒ¨åˆ†ï¼‰</p><p><img src="/../image/663.png" class="lazyload" data-srcset="/../image/663.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="663"></p><p>å¾—æ³¨æ„çš„æ˜¯æ‰©å±•PEå¤´ä¸­çš„ FileAlignment ä»¥åŠ SizeOfHeaders è¿™ä¸¤ä¸ªæˆå‘˜ï¼ŒSizeOfHeaders è¡¨ç¤ºæ‰€æœ‰çš„å¤´åŠ ä¸ŠèŠ‚è¡¨æ–‡ä»¶å¯¹é½ä¹‹åçš„å€¼ï¼Œå¯¹é½çš„å¤§å°å‚è€ƒçš„å°±æ˜¯ FileAlignment æˆå‘˜ï¼Œå¦‚æœæ‰€æœ‰çš„å¤´åŠ ä¸ŠèŠ‚è¡¨çš„å¤§å°ä¸º320ï¼ŒFileAlignment ä¸º 200ï¼Œé‚£ä¹ˆ SizeOfHeaders å¤§å°å°±ä¸º 400ï¼Œå› ä¸ºæ˜¯æ ¹æ®FileAlignment å¯¹é½çš„ï¼Œè¿™ç§å¯¹é½è™½ç„¶ç‰ºç‰²äº†ç©ºé—´ï¼Œä½†æ˜¯å¯ä»¥æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œä¸‹å›¾ä¸­çš„å‰é¢éƒ¨åˆ†0x00100000å°±æ˜¯ç¨‹åºåœ¨å†…å­˜ä¸­å¯¹é½çš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºè¿è¡Œèµ·æ¥æ—¶å¯¹é½çš„å¤§å°ï¼Œ0x00000400æ˜¯ç¨‹åºåœ¨æ–‡ä»¶ä¸­çš„å¯¹é½å¤§å°ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰è¿è¡Œæ—¶å¯¹é½çš„å¤§å°ï¼Œéœ€è¦æ¸…æ¥šçš„æ˜¯ï¼ŒPEç¨‹åºåœ¨è¿è¡Œæ—¶å†…å­˜ä¸­çš„å¯¹é½å€¼å’Œæ²¡æœ‰è¿è¡Œæ—¶çš„å¯¹é½å€¼å¯èƒ½æ˜¯æˆªç„¶ä¸åŒçš„</p><h3 id="å¯¼å…¥è¡¨"><a href="#å¯¼å…¥è¡¨" class="headerlink" title="å¯¼å…¥è¡¨"></a>å¯¼å…¥è¡¨</h3><p>å¯¼å‡ºè¡¨(Import Table)å’Œå¯¼å…¥è¡¨æ˜¯é  IMAGE_DATA_DIRECTORY è¿™ä¸ªç»“æ„ä½“æ•°ç»„æ¥å¯»æ‰¾çš„ï¼ŒIMAGE_DATA_DIRECTORY çš„ç»“æ„å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">typedef struct _IMAGE_DATA_DIRECTORY &#123;</span><br><span class="line">    DWORD   VirtualAddress;</span><br><span class="line">    DWORD   Size;</span><br><span class="line">&#125; IMAGE_DATA_DIRECTORY, *PIMAGE_DATA_DIRECTORY;</span><br></pre></td></tr></table></figure><p>å¯¼å…¥è¡¨çš„ç»“æ„å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">typedef struct _IMAGE_IMPORT_DESCRIPTOR &#123;</span><br><span class="line">    union &#123;</span><br><span class="line">        DWORD   Characteristics;            // 0 for terminating null import descriptor</span><br><span class="line">        DWORD   OriginalFirstThunk;         // RVA æŒ‡å‘ INT (PIMAGE_THUNK_DATAç»“æ„æ•°ç»„)</span><br><span class="line">    &#125; DUMMYUNIONNAME;</span><br><span class="line">    DWORD   TimeDateStamp;                  // 0 if not bound,</span><br><span class="line">                                            // -1 if bound, and real date\time stamp</span><br><span class="line">                                            //     in IMAGE_DIRECTORY_ENTRY_BOUND_IMPORT (new BIND)</span><br><span class="line">                                            // O.W. date/time stamp of DLL bound to (Old BIND)</span><br><span class="line"></span><br><span class="line">    DWORD   ForwarderChain;                 // -1 if no forwarders</span><br><span class="line">    DWORD   Name;//RVAæŒ‡å‘dllåå­—,ä»¥0ç»“å°¾</span><br><span class="line">    DWORD   FirstThunk;                     // RVA æŒ‡å‘ IAT (PIMAGE_THUNK_DATAç»“æ„æ•°ç»„)</span><br><span class="line">&#125; IMAGE_IMPORT_DESCRIPTOR;</span><br><span class="line">typedef IMAGE_IMPORT_DESCRIPTOR UNALIGNED *PIMAGE_IMPORT_DESCRIPTOR</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªç¨‹åºå¯¼å…¥å¤šå°‘åº“å°±å­˜åœ¨å¤šå°‘ä¸ªImage_Import_Descripotorç»“æ„ä½“.ç»“æ„ä½“æ•°ç»„æœ€åä»¥NULLç»“æ„ä½“ç»“æŸ.</p><p>æœ‰ä»¥ä¸‹é‡è¦æˆå‘˜(å…¨éƒ¨éƒ½æ˜¯ç›¸å¯¹è™šæ‹Ÿåœ°å€):</p><p><strong>1#.OriginalFirstThunk</strong></p><p><strong>INT</strong>(Import Name Table)çš„åœ°å€.INTä¸­å„ä¸ªå…ƒç´ çš„å€¼ä¸ºImage_Import_By_Name<strong>ç»“æ„ä½“æŒ‡é’ˆ.INTå’ŒIATçš„å¤§å°ç›¸åŒ,ä¸”éƒ½æ˜¯é•¿æ•´å‹(4å­—èŠ‚æ•°æ®ç±»å‹)æ•°ç»„.</strong></p><p><strong>2#.Name</strong></p><p><strong>åº“åç§°</strong>å­—ç¬¦ä¸²çš„<strong>åœ°å€</strong>.</p><p><strong>3#.FirstThunk</strong></p><p><strong>IAT</strong>çš„<strong>åœ°å€.</strong></p><p><img src="/../image/664.png" class="lazyload" data-srcset="/../image/664.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="664"></p><p>ä¸Šå›¾åªæ˜¯PEæ–‡ä»¶åŠ è½½å‰çš„æƒ…å†µï¼ŒPEæ–‡ä»¶ä¸€æ—¦è¿è¡Œèµ·æ¥ï¼Œå°±ä¼šå˜æˆä¸‹å›¾çš„æƒ…å†µ</p><p><img src="/../image/665.png" class="lazyload" data-srcset="/../image/665.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="665"></p><p>æˆ‘ä»¬è¿˜éœ€è¦äº†è§£çš„ç»“æ„ä½“æ˜¯ IMAGE_THUNK_DATA å’Œ IMAGE_IMPORT_BY_NAME ç»“æ„å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">typedef struct _IMAGE_IMPORT_BY_NAME &#123;</span><br><span class="line">    WORD    Hint; //å¯èƒ½ä¸ºç©º,ç¼–è¯‘å™¨å†³å®š,å¦‚æœä¸ä¸ºç©º,æ˜¯å‡½æ•°åœ¨å¯¼å‡ºè¡¨çš„ç´¢å¼•</span><br><span class="line">    BYTE    Name[1]; //å‡½æ•°åç§°,ä»¥0ç»“å°¾</span><br><span class="line">&#125; IMAGE_IMPORT_BY_NAME, *PIMAGE_IMPORT_BY_NAME;</span><br><span class="line"></span><br><span class="line">#include &quot;pshpack8.h&quot;                       // Use align 8 for the 64-bit IAT.</span><br><span class="line"></span><br><span class="line">typedef struct _IMAGE_THUNK_DATA64 &#123;</span><br><span class="line">    union &#123;</span><br><span class="line">        ULONGLONG ForwarderString;  // æŒ‡å‘ä¸€ä¸ªè½¬å‘è€…å­—ç¬¦ä¸²çš„RVA</span><br><span class="line">        ULONGLONG Function;         // è¢«è¾“å…¥çš„å‡½æ•°çš„å†…å­˜åœ°å€</span><br><span class="line">        ULONGLONG Ordinal;// è¢«è¾“å…¥APIçš„åºæ•°å€¼</span><br><span class="line">        ULONGLONG AddressOfData;    // æŒ‡é’ˆæŒ‡å‘ IMAGE_IMPORT_BY_NAME</span><br><span class="line">    &#125; u1;</span><br><span class="line">&#125; IMAGE_THUNK_DATA64;</span><br><span class="line">typedef IMAGE_THUNK_DATA64 * PIMAGE_THUNK_DATA64;</span><br><span class="line"></span><br><span class="line">#include &quot;poppack.h&quot;                        // Back to 4 byte packing</span><br><span class="line"></span><br><span class="line">typedef struct _IMAGE_THUNK_DATA32 &#123;</span><br><span class="line">    union &#123;</span><br><span class="line">        DWORD ForwarderString;      // PBYTE </span><br><span class="line">        DWORD Function;             // PDWORD</span><br><span class="line">        DWORD Ordinal;</span><br><span class="line">        DWORD AddressOfData;        // PIMAGE_IMPORT_BY_NAME</span><br><span class="line">    &#125; u1;</span><br><span class="line">&#125; IMAGE_THUNK_DATA32;</span><br><span class="line">typedef IMAGE_THUNK_DATA32 * PIMAGE_THUNK_DATA32;</span><br></pre></td></tr></table></figure><p>å…¶å®ä»–ä»¬çš„ä½œç”¨å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯ç”¨æ¥å¯»æ‰¾å½“å‰çš„æ¨¡å—ä¾èµ–å“ªäº›å‡½æ•°ï¼Œå¯ä»¥ç”¨è¿™å‡ ä¸ªç»“æ„ä½“æ±‚åˆ°ä¾èµ–å‡½æ•°çš„åå­—ã€‚</p><h3 id="å¯¼å‡ºè¡¨"><a href="#å¯¼å‡ºè¡¨" class="headerlink" title="å¯¼å‡ºè¡¨"></a>å¯¼å‡ºè¡¨</h3><p>å¯¼å‡ºè¡¨(Export Table)ä¸€èˆ¬æ˜¯DLLæ–‡ä»¶ç”¨çš„æ¯”è¾ƒå¤šï¼Œexeæ–‡ä»¶å¾ˆå°‘æœ‰å¯¼å‡ºè¡¨ï¼Œå¯¼å‡ºè¡¨çš„æ•°æ®ç»“æ„å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">typedef struct _IMAGE_EXPORT_DIRECTORY &#123;</span><br><span class="line">    DWORD   Characteristics;</span><br><span class="line">    DWORD   TimeDateStamp;</span><br><span class="line">    WORD    MajorVersion;</span><br><span class="line">    WORD    MinorVersion;</span><br><span class="line">    DWORD   Name;// æŒ‡é’ˆæŒ‡å‘è¯¥å¯¼å‡ºè¡¨æ–‡ä»¶åå­—ç¬¦ä¸²</span><br><span class="line">    DWORD   Base;// å¯¼å‡ºå‡½æ•°èµ·å§‹åºå·</span><br><span class="line">    DWORD   NumberOfFunctions;// æ‰€æœ‰å¯¼å‡ºå‡½æ•°çš„ä¸ªæ•°</span><br><span class="line">    DWORD   NumberOfNames;// ä»¥å‡½æ•°åå­—å¯¼å‡ºçš„å‡½æ•°ä¸ªæ•°</span><br><span class="line">    DWORD   AddressOfFunctions;     // æŒ‡é’ˆæŒ‡å‘å¯¼å‡ºå‡½æ•°åœ°å€è¡¨RVA</span><br><span class="line">    DWORD   AddressOfNames;         // æŒ‡é’ˆæŒ‡å‘å¯¼å‡ºå‡½æ•°åç§°è¡¨RVA</span><br><span class="line">    DWORD   AddressOfNameOrdinals;  // æŒ‡é’ˆæŒ‡å‘å¯¼å‡ºå‡½æ•°åºå·è¡¨RVA</span><br><span class="line">&#125; IMAGE_EXPORT_DIRECTORY, *PIMAGE_EXPORT_DIRECTORY;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å¯¼å‡ºè¡¨é‡Œé¢æœ€åè¿˜æœ‰ä¸‰ä¸ªè¡¨ï¼Œè¿™ä¸‰ä¸ªè¡¨å¯ä»¥è®©æˆ‘ä»¬æ‰¾åˆ°å‡½æ•°çœŸæ­£çš„åœ°å€ï¼Œåœ¨ç¼–å†™PEæ ¼å¼è§£æå™¨çš„æ—¶å€™å¯ä»¥ç”¨åˆ°ï¼ŒAddressOfFunctions æ˜¯å‡½æ•°åœ°å€è¡¨ï¼ŒæŒ‡å‘æ¯ä¸ªå‡½æ•°çœŸæ­£çš„åœ°å€ï¼ŒAddressOfNames å’Œ AddressOfNameOrdinals åˆ†åˆ«æ˜¯å‡½æ•°åç§°è¡¨å’Œå‡½æ•°åºå·è¡¨ï¼Œæˆ‘ä»¬çŸ¥é“DLLæ–‡ä»¶æœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œä¸€ç§æ˜¯ç”¨åå­—ï¼Œä¸€ç§æ˜¯ç”¨åºå·ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªè¡¨å¯ä»¥ç”¨æ¥å¯»æ‰¾å‡½æ•°åœ¨ AddressOfFunctions è¡¨ä¸­çœŸæ­£çš„åœ°å€ã€‚</p><h3 id="é‡å®šä½è¡¨"><a href="#é‡å®šä½è¡¨" class="headerlink" title="é‡å®šä½è¡¨"></a>é‡å®šä½è¡¨</h3><p>å½“PEæ–‡ä»¶è¢«è£…è½½åˆ°è™šæ‹Ÿå†…å­˜çš„å¦ä¸€ä¸ªåœ°å€ä¸­çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯è½½å…¥æ—¶ä¸å°†é»˜è®¤çš„å€¼ä½œä¸ºåŸºåœ°å€è½½å…¥ï¼Œé“¾æ¥å™¨ç™»è®°çš„å“ªä¸ªåœ°å€æ˜¯é”™è¯¯çš„ï¼Œéœ€è¦æˆ‘ä»¬ç”¨é‡å®šä½è¡¨æ¥è°ƒæ•´ï¼Œé‡å®šä½è¡¨åœ¨æ•°æ®ç›®å½•é¡¹çš„ç¬¬ 6 ä¸ªç»“æ„ï¼Œç»“æ„å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedef struct _IMAGE_BASE_RELOCATION &#123;</span><br><span class="line">    DWORD   VirtualAddress; // é‡å®šä½æ•°æ®çš„å¼€å§‹ RVA åœ°å€</span><br><span class="line">    DWORD   SizeOfBlock;// é‡å®šä½å—çš„é•¿åº¦</span><br><span class="line">//  WORD    TypeOffset[1];// é‡å®šä½é¡¹æ•°ç»„</span><br><span class="line">&#125; IMAGE_BASE_RELOCATION;</span><br><span class="line">typedef IMAGE_BASE_RELOCATION UNALIGNED * PIMAGE_BASE_RELOCATION;</span><br></pre></td></tr></table></figure><p>é‡å®šä½è¡¨æœ‰è®¸å¤šä¸ªï¼Œä»¥å…«ä¸ªå­—èŠ‚çš„ 0 ç»“å°¾</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»å†™è¿™ä¸ªç®€å•PEæ–‡ä»¶è§£é‡Šå™¨å­¦åˆ°äº†å¾ˆå¤šå¥½ç©çš„ä¸œè¥¿</p><ul><li>win32API</li></ul><p>é€šè¿‡ç¼–å†™è¿™ä¸ªç®€å•çš„PEæ–‡ä»¶è§£é‡Šå™¨çœŸçš„å¯¹peæ–‡ä»¶çš„ç†è§£æ›´åŠ æ·±äº†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">//è·å–è™šæ‹Ÿåœ°å€çš„åç§»</span></span><br><span class="line">DWORD <span class="title function_">RVAOffset</span><span class="params">(PIMAGE_NT_HEADERS pNtHeader, DWORD Rva)</span></span><br><span class="line">&#123;</span><br><span class="line">PIMAGE_SECTION_HEADER pSectionHeader = (PIMAGE_SECTION_HEADER)IMAGE_FIRST_SECTION(pNtHeader);<span class="comment">//è·å¾—é¦–åœ°å€</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; pNtHeader-&gt;FileHeader.NumberOfSections; i++)</span><br><span class="line">&#123;</span><br><span class="line">DWORD SectionBeginRva = pSectionHeader[i].VirtualAddress;</span><br><span class="line"></span><br><span class="line">DWORD SectionEndRva = pSectionHeader[i].VirtualAddress + pSectionHeader[i].SizeOfRawData;</span><br><span class="line"><span class="keyword">if</span> (Rva &gt;= SectionBeginRva &amp;&amp; Rva &lt;= SectionEndRva)</span><br><span class="line">&#123;</span><br><span class="line">DWORD Temp = Rva - SectionBeginRva;</span><br><span class="line">DWORD Rwa = Temp + pSectionHeader[i].PointerToRawData;<span class="comment">//è®¡ç®—å®ƒåœ¨èŠ‚è¡¨é‡Œé¢çš„åç§»</span></span><br><span class="line"><span class="keyword">return</span> Rwa;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">HANDLE hFile; <span class="comment">//åˆ›é€ å¥æŸ„</span></span><br><span class="line">HANDLE hMapping;</span><br><span class="line">LPVOID ImageBase;</span><br><span class="line"><span class="type">char</span> szFilePath[MAX_PATH];</span><br><span class="line">OPENFILENAME ofn;<span class="comment">//å®šä¹‰ç»“æ„ï¼Œè°ƒç”¨æ–‡ä»¶å¯¹è¯æ¡†é€‰æ‹©è¦åˆ†æçš„æ–‡ä»¶åŠå…¶ä¿å­˜è·¯å¾„</span></span><br><span class="line">PIMAGE_DOS_HEADER pDH = <span class="literal">NULL</span>; <span class="comment">//æŒ‡å‘IMAGE_DOSç»“æ„çš„æŒ‡é’ˆ</span></span><br><span class="line">PIMAGE_NT_HEADERS pNtH = <span class="literal">NULL</span>; <span class="comment">//æŒ‡å‘IMAGE_NTç»“æ„çš„æŒ‡é’ˆ</span></span><br><span class="line">PIMAGE_FILE_HEADER pFH = <span class="literal">NULL</span>;<span class="comment">//æŒ‡å‘IMAGE_FILEç»“æ„çš„æŒ‡é’ˆ</span></span><br><span class="line">PIMAGE_OPTIONAL_HEADER pOH = <span class="literal">NULL</span>;<span class="comment">//æŒ‡å‘IMAGE_OPTIONALç»“æ„çš„æŒ‡é’ˆ</span></span><br><span class="line">    <span class="built_in">memset</span>(szFilePath, <span class="number">0</span>, MAX_PATH);</span><br><span class="line"><span class="built_in">memset</span>(&amp;ofn, <span class="number">0</span>, <span class="keyword">sizeof</span>(ofn));</span><br><span class="line">ofn.lStructSize = <span class="keyword">sizeof</span>(ofn);</span><br><span class="line">ofn.hwndOwner = <span class="literal">NULL</span>;</span><br><span class="line">ofn.hInstance = GetModuleHandle(<span class="literal">NULL</span>);</span><br><span class="line">ofn.nMaxFile = MAX_PATH;</span><br><span class="line">ofn.lpstrInitialDir = <span class="string">&quot;.&quot;</span>;</span><br><span class="line">ofn.lpstrFile = szFilePath;</span><br><span class="line">ofn.lpstrTitle = <span class="string">&quot;è¯·é€‰æ‹©çš„æ–‡ä»¶è·¯å¾„&quot;</span>;</span><br><span class="line">ofn.Flags = OFN_FILEMUSTEXIST | OFN_PATHMUSTEXIST | OFN_HIDEREADONLY;</span><br><span class="line">ofn.lpstrFilter = <span class="string">&quot;*.*\0*.*\0&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!GetOpenFileName(&amp;ofn))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æ‰“å¼€æ–‡ä»¶é”™è¯¯:%d\n&quot;</span>, GetLastError());</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">hFile = CreateFile(szFilePath, GENERIC_READ, FILE_SHARE_READ, <span class="literal">NULL</span>, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (!hFile)</span><br><span class="line">&#123;</span><br><span class="line">MessageBox(<span class="literal">NULL</span>,szFilePath,<span class="string">&quot;File opened failed&quot;</span>, MB_OK);</span><br><span class="line">&#125;</span><br><span class="line">hMapping = CreateFileMapping(hFile, <span class="literal">NULL</span>, PAGE_READONLY, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span> (!hMapping)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;åˆ›å»ºæ˜ å°„é”™è¯¯:%d&quot;</span>, GetLastError());</span><br><span class="line">CloseHandle(hFile);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è·å¾—åŸºå€</span></span><br><span class="line">ImageBase = MapViewOfFile(hMapping, FILE_MAP_READ, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (!ImageBase)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶æ˜ å°„é”™è¯¯:%d&quot;</span>, GetLastError());</span><br><span class="line">CloseHandle(hMapping);</span><br><span class="line">CloseHandle(hFile);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/************************** PEå¤´çš„åˆ¤æ–­ *********************************/</span></span><br><span class="line"><span class="keyword">if</span> (!ImageBase)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Not a valid PE file error1!\n&quot;</span>);</span><br><span class="line">CloseHandle(hMapping);</span><br><span class="line">CloseHandle(hFile);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;&lt;--------------------------PEheader-------------------------------&gt;\n&quot;</span>);</span><br><span class="line">pDH = (PIMAGE_DOS_HEADER)ImageBase;</span><br><span class="line"><span class="keyword">if</span> (pDH-&gt;e_magic != IMAGE_DOS_SIGNATURE) <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºMZ</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Not a valid PE file error2!\n&quot;</span>);</span><br><span class="line">CloseHandle(hMapping);</span><br><span class="line">CloseHandle(hFile);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">pNtH = (PIMAGE_NT_HEADERS)((DWORD)pDH + pDH-&gt;e_lfanew);</span><br><span class="line"><span class="keyword">if</span> (pNtH-&gt;Signature != IMAGE_NT_SIGNATURE)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Not a valid PE file error3!\n&quot;</span>);</span><br><span class="line">CloseHandle(hMapping);</span><br><span class="line">CloseHandle(hFile);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;PE e_lfanew is: 0x%x\n&quot;</span>,pNtH);</span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/*  FileHeader                                */</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line">pFH = &amp;pNtH-&gt;FileHeader;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;-----------------FileHeader------------------------\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;NumberOfSections:%d\n&quot;</span>, pFH-&gt;NumberOfSections); <span class="comment">//èŠ‚çš„æ•°é‡</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;SizeOfOptionalHeader:%d\n&quot;</span>, pFH-&gt;SizeOfOptionalHeader); <span class="comment">//PEå¤´çš„å¤§å°</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/*  OptionalHeader                            */</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line">pOH = &amp;pNtH-&gt;OptionalHeader;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;-----------------OptionalHeader---------------------\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;SizeOfCode:0x%08x\n&quot;</span>, pOH-&gt;SizeOfCode);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;AddressOfEntryPoint: 0x%08X\n&quot;</span>, pOH-&gt;AddressOfEntryPoint);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ImageBase is 0x%x\n&quot;</span>, ImageBase);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;SectionAlignment: 0x%08x\n&quot;</span>, pOH-&gt;SectionAlignment);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;FileAlignment: 0x%08x\n&quot;</span>, pOH-&gt;FileAlignment);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;SizeOfImage: 0x%08x\n&quot;</span>, pOH-&gt;SizeOfImage);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;SizeOfHeaders: 0x%08x\n&quot;</span>, pOH-&gt;SizeOfHeaders);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;NumberOfRvaAndSizes: 0x%08x\n&quot;</span>, pOH-&gt;NumberOfRvaAndSizes);</span><br><span class="line">    </span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/*  SectionTable                              */</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="type">int</span> SectionNumber = <span class="number">0</span>;</span><br><span class="line">DWORD SectionHeaderOffset = (DWORD)pNtH + <span class="number">24</span> + (DWORD)pFH-&gt;SizeOfOptionalHeader;<span class="comment">//èŠ‚è¡¨ä½ç½®çš„è®¡ç®—</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;--------------------SectionTable---------------------\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (SectionNumber; SectionNumber &lt; pFH-&gt;NumberOfSections; SectionNumber++)</span><br><span class="line">&#123;</span><br><span class="line">PIMAGE_SECTION_HEADER pSh = (PIMAGE_SECTION_HEADER)(SectionHeaderOffset + <span class="number">40</span> * SectionNumber);  <span class="comment">//ä¸€ä¸ªèŠ‚è¡¨å¤§å°ä¸º40ä¸ªå­—èŠ‚</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &#x27;s Name is %s\n&quot;</span>, SectionNumber + <span class="number">1</span>, pSh-&gt;Name);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;VirtualAddress: 0x%08X\n&quot;</span>, (DWORD)pSh-&gt;VirtualAddress);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;SizeOfRawData: 0x%08X\n&quot;</span>, (DWORD)pSh-&gt;SizeOfRawData);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;PointerToRawData: 0x%08X\n&quot;</span>, (DWORD)pSh-&gt;PointerToRawData);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/*  ExportTable                               */</span><span class="comment">//å¯¼å‡ºè¡¨/</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;--------------------ExportTable----------------------\n&quot;</span>);</span><br><span class="line">DWORD Export_table_offset = RVAOffset(pNtH, (DWORD)pNtH-&gt;OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT].VirtualAddress);</span><br><span class="line">PIMAGE_EXPORT_DIRECTORY pExportDirectory = (PIMAGE_EXPORT_DIRECTORY)((DWORD)ImageBase + Export_table_offset);</span><br><span class="line">DWORD EXport_table_offset_Name = (DWORD)ImageBase + RVAOffset(pNtH, pExportDirectory-&gt;Name);</span><br><span class="line">DWORD* pNameOfAddress = (DWORD*)((DWORD)ImageBase + RVAOffset(pNtH, pExportDirectory-&gt;AddressOfNames));</span><br><span class="line">DWORD* pFunctionOfAdress = (DWORD*)((DWORD)ImageBase + RVAOffset(pNtH, pExportDirectory-&gt;AddressOfFunctions));</span><br><span class="line">WORD* pNameOrdinalOfAddress = (WORD*)((DWORD)ImageBase + RVAOffset(pNtH, pExportDirectory-&gt;AddressOfNameOrdinals));</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Name:%s\n&quot;</span>, EXport_table_offset_Name);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;NameOfAddress:%08X\n&quot;</span>, RVAOffset(pNtH, pExportDirectory-&gt;AddressOfNames));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;FunctionOfAdress:%08X\n&quot;</span>, RVAOffset(pNtH, pExportDirectory-&gt;AddressOfFunctions));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;NameOrdinalOfAddress:%08X\n&quot;</span>, RVAOffset(pNtH, pExportDirectory-&gt;AddressOfNameOrdinals));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pExportDirectory-&gt;NumberOfFunctions == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;!!!!!!!!!!!!!!!!!NO EXPORT!!!!!!!!!!!!!!!!!!!!!&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (hFile != INVALID_HANDLE_VALUE)</span><br><span class="line">&#123;</span><br><span class="line">CloseHandle(hFile);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (hMapping != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">CloseHandle(hMapping);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (ImageBase != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">UnmapViewOfFile(ImageBase);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;NumberOfNames:%d\n&quot;</span>, pExportDirectory-&gt;NumberOfNames);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;NumberOfFunctions:%d\n&quot;</span>, pExportDirectory-&gt;NumberOfFunctions);</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/*  ImportTable                               */</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;--------------------ImportTable----------------------\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> cont = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">DWORD dwImportOffset = RVAOffset(pNtH, pNtH-&gt;OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT].VirtualAddress);</span><br><span class="line">dwImportOffset = dwImportOffset + cont;</span><br><span class="line">PIMAGE_IMPORT_DESCRIPTOR pImport = (PIMAGE_IMPORT_DESCRIPTOR)((DWORD)ImageBase + dwImportOffset);</span><br><span class="line"><span class="keyword">if</span> (pImport-&gt;OriginalFirstThunk == <span class="number">0</span> &amp;&amp; pImport-&gt;TimeDateStamp == <span class="number">0</span> &amp;&amp; pImport-&gt;ForwarderChain == <span class="number">0</span> &amp;&amp; pImport-&gt;Name == <span class="number">0</span> &amp;&amp; pImport-&gt;FirstThunk == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">DWORD dwOriginalFirstThunk = (DWORD)ImageBase + RVAOffset(pNtH, pImport-&gt;OriginalFirstThunk);</span><br><span class="line">DWORD dwFirstThunk = (DWORD)ImageBase + RVAOffset(pNtH, pImport-&gt;FirstThunk);</span><br><span class="line">DWORD dwName = (DWORD)ImageBase + RVAOffset(pNtH, pImport-&gt;Name);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;---------Import File Name: %s\n&quot;</span>, dwName);</span><br><span class="line"><span class="keyword">if</span> (dwOriginalFirstThunk == <span class="number">0x00000000</span>)</span><br><span class="line">&#123;</span><br><span class="line">dwOriginalFirstThunk = dwFirstThunk;</span><br><span class="line">&#125;</span><br><span class="line">DWORD* pdwTrunkData = (DWORD*)dwOriginalFirstThunk;</span><br><span class="line"><span class="type">int</span> n = <span class="number">0</span>, x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (pdwTrunkData[n] != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">DWORD TrunkData = pdwTrunkData[n];</span><br><span class="line"><span class="keyword">if</span> (TrunkData &lt; IMAGE_ORDINAL_FLAG32)<span class="comment">//åå­—å¯¼å…¥</span></span><br><span class="line">&#123;</span><br><span class="line">PIMAGE_IMPORT_BY_NAME pInportByName = (PIMAGE_IMPORT_BY_NAME)((DWORD)ImageBase + RVAOffset(pNtH, TrunkData));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ImportByName: %s\n&quot;</span>, pInportByName-&gt;Name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">DWORD FunNumber = (DWORD)(TrunkData - IMAGE_ORDINAL_FLAG32);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ImportByNumber: %-4d \n&quot;</span>, FunNumber);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (x != <span class="number">0</span> &amp;&amp; x % <span class="number">3</span> == <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">n++;</span><br><span class="line">x++;</span><br><span class="line">&#125;</span><br><span class="line">cont = cont + <span class="number">40</span>;</span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">1</span>);</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (ImageBase)</span><br><span class="line">&#123;</span><br><span class="line">UnmapViewOfFile(ImageBase);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (hMapping)</span><br><span class="line">&#123;</span><br><span class="line">CloseHandle(hMapping);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (hFile != INVALID_HANDLE_VALUE)</span><br><span class="line">&#123;</span><br><span class="line">CloseHandle(hFile);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå›¾</p><p><img src="/../image/666.png" class="lazyload" data-srcset="/../image/666.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="666"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸‹å›¾æ˜¯PEæ–‡ä»¶æ ¼å¼ç¤ºæ„å›¾&lt;br&gt;&lt;img src=&quot;/2024/05/10/[é€†å‘]PEæ–‡ä»¶æ ¼å¼è§£æ/image&quot; class=&quot;lazyload&quot; data-srcset=&quot;/2024/05/10/[é€†å‘]PEæ–‡ä»¶æ ¼å¼è§£æ/image&quot; srcset=&quot;data:imag</summary>
      
    
    
    
    <category term="PE" scheme="https://5m10v3.github.io/categories/PE/"/>
    
    
    <category term="ctfå­¦ä¹ " scheme="https://5m10v3.github.io/tags/ctf%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥è®°(22)</title>
    <link href="https://5m10v3.github.io/2024/05/09/%E6%97%A5%E8%AE%B0(22)/"/>
    <id>https://5m10v3.github.io/2024/05/09/%E6%97%A5%E8%AE%B0(22)/</id>
    <published>2024-05-08T16:00:00.000Z</published>
    <updated>2024-06-09T09:13:54.637Z</updated>
    
    <content type="html"><![CDATA[<p>è¿‘æœŸä¸»è¦åœ¨å¼„ISCCçš„é¢˜ç›®,å¤§çº¦å¼„äº†ä¸€å‘¨æ—¶é—´ï¼Œä»é‡Œé¢çš„å®‰å“é¢˜å­¦åˆ°äº†ä¸œè¥¿<br>æ¥ä¸‹æ¥è¿˜æ˜¯æƒ³å…ˆçœ‹å®Œpeå‹ç»“æ„å’Œpeå‹ç—…æ¯’çš„åˆ¶ä½œï¼Œç„¶åå»çœ‹LLVMæ··æ·†ï¼Œåè°ƒè¯•</p><p>è¿‘æœŸå°ç›®æ ‡ï¼š</p><ul><li><del>ç¼–å†™ä¸€ä¸ªpeè§£æå™¨(1å¤©)</del></li><li>ç¼–å†™ä¸€ä¸ªæ„ŸæŸ“exeçš„peå‹ç—…æ¯’(1å¤©)ï¼ˆè¿™ä¸ªæ²¡æœ‰å®Œæˆï¼‰</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿‘æœŸä¸»è¦åœ¨å¼„ISCCçš„é¢˜ç›®,å¤§çº¦å¼„äº†ä¸€å‘¨æ—¶é—´ï¼Œä»é‡Œé¢çš„å®‰å“é¢˜å­¦åˆ°äº†ä¸œè¥¿&lt;br&gt;æ¥ä¸‹æ¥è¿˜æ˜¯æƒ³å…ˆçœ‹å®Œpeå‹ç»“æ„å’Œpeå‹ç—…æ¯’çš„åˆ¶ä½œï¼Œç„¶åå»çœ‹LLVMæ··æ·†ï¼Œåè°ƒè¯•&lt;/p&gt;
&lt;p&gt;è¿‘æœŸå°ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;del&gt;ç¼–å†™ä¸€ä¸ªpeè§£æå™¨(1å¤©)&lt;/del&gt;&lt;/li&gt;
&lt;l</summary>
      
    
    
    
    <category term="æ—¥è®°" scheme="https://5m10v3.github.io/categories/%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥è®°(21)</title>
    <link href="https://5m10v3.github.io/2024/04/25/%E6%97%A5%E8%AE%B0(21)/"/>
    <id>https://5m10v3.github.io/2024/04/25/%E6%97%A5%E8%AE%B0(21)/</id>
    <published>2024-04-24T16:00:00.000Z</published>
    <updated>2024-06-09T09:13:49.897Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ è¿™ä¸ªpeå‹ç—…æ¯’ï¼Œä¸»è¦ç›®çš„è¿˜æ˜¯å†è¿‡ä¸€éPEç»“æ„ï¼Œä»¥åŠä¸€äº›win32APIçš„å­¦ä¹ </p><p>ç›®å‰åªæ˜¯äº†è§£äº†è¿™ä¸ªç—…æ¯’çš„åŸç†ï¼Œè¿˜æ²¡æœ‰å…·ä½“å»å†™</p><p>å­¦ä¹ ï¼š</p><ul><li>Win32APIçš„å­¦ä¹ </li><li>PEå‹ç»“æ„</li></ul><p>ä½†æ˜¯è¿‘æœŸä¸»è¦è¿˜æ˜¯é›†ä¸­åœ¨å­¦ä¹ åè°ƒè¯•ï¼ŒLLVMæ··æ·†</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å­¦ä¹ è¿™ä¸ªpeå‹ç—…æ¯’ï¼Œä¸»è¦ç›®çš„è¿˜æ˜¯å†è¿‡ä¸€éPEç»“æ„ï¼Œä»¥åŠä¸€äº›win32APIçš„å­¦ä¹ &lt;/p&gt;
&lt;p&gt;ç›®å‰åªæ˜¯äº†è§£äº†è¿™ä¸ªç—…æ¯’çš„åŸç†ï¼Œè¿˜æ²¡æœ‰å…·ä½“å»å†™&lt;/p&gt;
&lt;p&gt;å­¦ä¹ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Win32APIçš„å­¦ä¹ &lt;/li&gt;
&lt;li&gt;PEå‹ç»“æ„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†</summary>
      
    
    
    
    <category term="æ—¥è®°" scheme="https://5m10v3.github.io/categories/%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>PEç—…æ¯’åˆæ¢-æ³¨å…¥exe</title>
    <link href="https://5m10v3.github.io/2024/04/24/PE%E7%97%85%E6%AF%92%E5%88%9D%E6%8E%A2-%E6%B3%A8%E5%85%A5exe/"/>
    <id>https://5m10v3.github.io/2024/04/24/PE%E7%97%85%E6%AF%92%E5%88%9D%E6%8E%A2-%E6%B3%A8%E5%85%A5exe/</id>
    <published>2024-04-23T16:00:00.000Z</published>
    <updated>2024-06-09T09:16:26.260Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€å®éªŒåŸç†ï¼š"><a href="#ä¸€ã€å®éªŒåŸç†ï¼š" class="headerlink" title="ä¸€ã€å®éªŒåŸç†ï¼š"></a>ä¸€ã€å®éªŒåŸç†ï¼š</h1><p>Win32çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚*.exeã€*.dllã€*.ocxç­‰ï¼Œéƒ½æ˜¯PEæ ¼å¼æ–‡ä»¶ã€‚æ„ŸæŸ“PEæ ¼å¼æ–‡ä»¶çš„win32ç—…æ¯’ï¼Œç®€ç§°PEç—…æ¯’ã€‚PEç—…æ¯’åŒæ—¶ä¹Ÿæ˜¯æ‰€æœ‰ç—…æ¯’ä¸­æ•°é‡æå¤šã€ç ´åæ€§æå¤§ã€æŠ€å·§æ€§æœ€å¼ºçš„ä¸€ç±»ç—…æ¯’ã€‚ä¸ºäº†æ›´å¥½åœ°å‘å±•åç—…æ¯’æŠ€æœ¯ï¼Œäº†è§£ç—…æ¯’çš„åŸç†æ˜¯æä¸ºå¿…è¦çš„ã€‚ä¸€ä¸ªPEç—…æ¯’åŸºæœ¬ä¸Šéœ€è¦å…·æœ‰é‡å®šä½ã€æˆªè·APIå‡½æ•°åœ°å€ã€æœç´¢æ„ŸæŸ“ç›®æ ‡æ–‡ä»¶ã€å†…å­˜æ–‡ä»¶æ˜ å°„ã€å®æ–½æ„ŸæŸ“ç­‰å‡ ä¸ªåŠŸèƒ½ï¼Œè¿™ä¹Ÿæ˜¯ç—…æ¯’å¿…é¡»è§£å†³çš„å‡ ä¸ªåŸºæœ¬é—®é¢˜ã€‚</p><p>PEç—…æ¯’æ„ŸæŸ“æ–‡ä»¶çš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š </p><p>(1) åˆ¤æ–­ç›®æ ‡æ–‡ä»¶å¼€å§‹çš„ä¸¤ä¸ªå­—èŠ‚æ˜¯å¦ä¸ºâ€œMZâ€ã€‚ </p><p>(2) åˆ¤æ–­PEæ–‡ä»¶æ ‡è®°â€œPEâ€ã€‚ </p><p>(3) åˆ¤æ–­æ„ŸæŸ“æ ‡è®°ï¼Œå¦‚æœå·²è¢«æ„ŸæŸ“è¿‡åˆ™è·³å‡ºç»§ç»­æ‰§è¡ŒHOSTç¨‹åºï¼Œå¦åˆ™ç»§ç»­ã€‚ </p><p>(4) è·å¾—Directory(æ•°æ®ç›®å½•)çš„ä¸ªæ•°ï¼Œ(æ¯ä¸ªæ•°æ®ç›®å½•ä¿¡æ¯å 8ä¸ªå­—èŠ‚)ã€‚ </p><p>(5) å¾—åˆ°èŠ‚è¡¨èµ·å§‹ä½ç½®ã€‚(Directoryçš„åç§»åœ°å€+æ•°æ®ç›®å½•å ç”¨çš„å­—èŠ‚æ•°&#x3D;èŠ‚è¡¨èµ·å§‹ä½ç½®)ã€‚ </p><p>(6) éå†æ‰€æœ‰çš„èŠ‚è¡¨ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå…·æœ‰å¯ä»¥å®¹çº³æ‰€æœ‰ç—…æ¯’ä»£ç ç©ºé—²ç©ºé—´çš„èŠ‚ã€‚ æ¯ä¸ªèŠ‚çš„ç©ºé—²ç©ºé—´çš„è®¡ç®—æ–¹æ³•ï¼š ç¬¬iä¸ªèŠ‚çš„ç©ºé—²ç©ºé—´&#x3D;ç¬¬i+1ä¸ªèŠ‚çš„è™šæ‹Ÿåœ°å€-ç¬¬iä¸ªèŠ‚çš„è™šæ‹Ÿåœ°å€-ç¬¬iä¸ªèŠ‚çš„Misc.VirtualSize </p><p>(7) å¼€å§‹å†™å…¥ç›®æ ‡ä»£ç ï¼š</p><ol><li>è®¡ç®—ç›®æ ‡ä»£ç çš„æ–‡ä»¶åç§»ä½ç½®ï¼Œä»¥åç›®æ ‡ä»£ç å°†ä»è¯¥ä½ç½®å†™å…¥PEæ–‡ä»¶ã€‚å…¶è®¡ç®—æ–¹æ³•ä¸ºï¼šç›®æ ‡èŠ‚è¡¨çš„Misc.VirtualSize+ç›®æ ‡èŠ‚è¡¨çš„PointerToRawData</li><li>ä¿®æ”¹ç›®æ ‡çš„èŠ‚çš„èŠ‚å±æ€§ä¸º0xE00000E0ï¼Œæ˜¯ç›®æ ‡èŠ‚å˜æˆå¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œã€‚</li><li>å†™å…¥ç›®æ ‡ä»£ç çš„æ•°æ®æ®µ</li><li>å†™å…¥ç›®æ ‡ä»£ç çš„æ‰§è¡Œä¸»ä½“</li><li>ä¿®æ”¹AddressOfEntryPoint(å³ç¨‹åºå…¥å£ç‚¹æŒ‡å‘ç—…æ¯’å…¥å£ä½ç½®)ï¼ŒåŒæ—¶ä¿å­˜æ—§çš„AddressOfEntryPointï¼Œä»¥ä¾¿è¿”å›HOSTç»§ç»­æ‰§è¡Œã€‚</li><li>æ›´æ–°SizeOfImage(å†…å­˜ä¸­æ•´ä¸ªPEæ˜ åƒå°ºå¯¸&#x3D;åŸSizeOfImage+ç—…æ¯’èŠ‚ç»è¿‡å†…å­˜èŠ‚å¯¹é½åçš„å¤§å°)ã€‚SizeOfCode ä»£ç çš„å¤§å°ï¼Œå³æ˜¯åŸSizeOfCode+ç—…æ¯’ä»£ç ç»å†…å­˜å¯¹é½åçš„å¤§å°ã€‚</li><li>å†™å…¥æ„ŸæŸ“æ ‡è®°ï¼Œåœ¨æ„ŸæŸ“æ ‡è®°åé¢å†™å…¥æ—§çš„AddressOfEntryPointåˆ©äºè§£æ¯’ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸€ã€å®éªŒåŸç†ï¼š&quot;&gt;&lt;a href=&quot;#ä¸€ã€å®éªŒåŸç†ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å®éªŒåŸç†ï¼š&quot;&gt;&lt;/a&gt;ä¸€ã€å®éªŒåŸç†ï¼š&lt;/h1&gt;&lt;p&gt;Win32çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚*.exeã€*.dllã€*.ocxç­‰ï¼Œéƒ½æ˜¯PEæ ¼å¼æ–‡ä»¶ã€‚æ„ŸæŸ“PEæ ¼å¼æ–‡ä»¶çš„</summary>
      
    
    
    
    <category term="PEå‹" scheme="https://5m10v3.github.io/categories/PE%E5%9E%8B/"/>
    
    
    <category term="è®¡ç®—æœºç—…æ¯’" scheme="https://5m10v3.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%97%85%E6%AF%92/"/>
    
  </entry>
  
  <entry>
    <title>C++å­¦ä¹ (ä¸‰)-æ¨¡æ¿ä¸å®¹å™¨</title>
    <link href="https://5m10v3.github.io/2024/04/23/C++%E5%AD%A6%E4%B9%A0(%E4%B8%89)-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E5%AE%B9%E5%99%A8/"/>
    <id>https://5m10v3.github.io/2024/04/23/C++%E5%AD%A6%E4%B9%A0(%E4%B8%89)-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E5%AE%B9%E5%99%A8/</id>
    <published>2024-04-22T16:00:00.000Z</published>
    <updated>2024-06-09T09:15:11.170Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h2><h4 id="å‡½æ•°æ¨¡æ¿çš„æ¦‚å¿µ"><a href="#å‡½æ•°æ¨¡æ¿çš„æ¦‚å¿µ" class="headerlink" title="å‡½æ•°æ¨¡æ¿çš„æ¦‚å¿µ"></a>å‡½æ•°æ¨¡æ¿çš„æ¦‚å¿µ</h4><p>â€ƒå‡½æ•°æ¨¡æ¿ä»£è¡¨äº†ä¸€ä¸ªå‡½æ•°å®¶æ—ï¼Œè¯¥å‡½æ•°æ¨¡æ¿ä¸ç±»å‹æ— å…³ï¼Œåœ¨ä½¿ç”¨æ—¶è¢«å‚æ•°åŒ–ï¼Œæ ¹æ®å®å‚ç±»å‹äº§ç”Ÿå‡½æ•°çš„ç‰¹å®šç±»å‹ç‰ˆæœ¬ã€‚</p><p>å…³äºå‡½æ•°æ¨¡æ¿çš„åŸç†ï¼Œè¿™é‡Œå·ä¸€ä¸ªå›¾</p><p><img src="/../image/653.png" class="lazyload" data-srcset="/../image/653.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="653"></p><p>ç¼–è¯‘å™¨ç¼–è¯‘é˜¶æ®µï¼Œå¯¹äºå‡½æ•°æ¨¡æ¿çš„ä½¿ç”¨ï¼Œ<strong>ç¼–è¯‘å™¨éœ€è¦æ ¹æ®ä¼ å…¥çš„å®å‚ç±»å‹æ¥æ¨æ¼”ç”Ÿæˆå¯¹åº”ç±»å‹çš„å‡½æ•°ä»¥ä¾›è°ƒç”¨ï¼Œå½¼æ­¤çš„åœ°å€ä¹Ÿæ˜¯ä¸åŒçš„</strong>ã€‚æ¯”å¦‚ï¼Œå½“ç”¨intç±»å‹ä½¿ç”¨å‡½æ•°æ¨¡æ¿æ—¶ï¼Œç¼–è¯‘å™¨é€šè¿‡å¯¹å®å‚ç±»å‹çš„æ¨æ¼”ï¼Œå°†Tç¡®å®šä¸ºintç±»å‹ï¼Œç„¶åäº§ç”Ÿä¸€ä»½ä¸“é—¨å¤„ç†intç±»å‹çš„ä»£ç ï¼Œå¯¹äºdoubleç±»å‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><blockquote><p>&#x3D;&#x3D;å°è´´å£«ï¼š&#x3D;&#x3D;</p><blockquote><p><em>Cè¯­è¨€ä¸ºä»€ä¹ˆä¸æ”¯æŒæ¨¡æ¿ï¼Œå› ä¸ºå®ƒä¸æ”¯æŒæ³›å‹ç¼–ç¨‹(ä¾‹å¦‚C++ä¸­çš„æ¨¡æ¿)ï¼ŒCè¯­è¨€ä¸­çš„å®ï¼Œvoid *æŒ‡é’ˆ ï¼Œ_Genericå…³é”®å­—æœ‰ç±»ä¼¼çš„ä½œç”¨ï¼Œä½†ç›¸æ¯”æ¨¡æ¿ï¼Œå°±æ˜¯å°å·«è§å¤§å·«äº†ã€‚</em>*</p></blockquote></blockquote><p><strong>ä¸€ã€éšå¼å®ä¾‹åŒ–ï¼šè®©ç¼–è¯‘å™¨æ ¹æ®å®å‚æ¨æ¼”æ¨¡æ¿å‚æ•°çš„å®é™…ç±»å‹</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">T <span class="title">Add</span><span class="params">(<span class="type">const</span> T&amp; left, <span class="type">const</span> T&amp; right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> left + right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a1 = <span class="number">10</span>, a2 = <span class="number">20</span>;</span><br><span class="line"><span class="type">double</span> d1 = <span class="number">10.1</span>, d2 = <span class="number">20.2</span>;</span><br><span class="line"></span><br><span class="line">cout&lt;&lt;<span class="built_in">Add</span>(a1, a2)&lt;&lt;endl;<span class="comment">//ç¼–è¯‘å™¨æ ¹æ®å®å‚a1å’Œa2æ¨æ¼”å‡ºæ¨¡æ¿å‚æ•°ä¸ºintç±»å‹</span></span><br><span class="line">cout &lt;&lt; <span class="built_in">Add</span>(d1, d2)&lt;&lt; endl;<span class="comment">//ç¼–è¯‘å™¨æ ¹æ®å®å‚d1å’Œd2æ¨æ¼”å‡ºæ¨¡æ¿å‚æ•°ä¸ºdoubleç±»å‹</span></span><br><span class="line">cout &lt;&lt; <span class="built_in">Add</span>(a1,d2) &lt;&lt; endl;<span class="comment">//é”™è¯¯</span></span><br><span class="line"><span class="comment">//æ³¨æ„ï¼šåœ¨æ¨¡æ¿ä¸­ï¼Œç¼–è¯‘å™¨ä¸€èˆ¬ä¸ä¼šè¿›è¡Œç±»å‹è½¬æ¢æ“ä½œï¼Œå› ä¸ºä¸€æ—¦è½¬åŒ–å‡ºé—®é¢˜ï¼Œç¼–è¯‘å™¨å°±éœ€è¦èƒŒé»‘é”…</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç¼–è¯‘æœŸé—´ï¼Œç¼–è¯‘å™¨æ ¹æ®å®å‚æ¨æ¼”æ¨¡æ¿å‚æ•°çš„å®é™…ç±»å‹æ—¶ï¼Œæ ¹æ®å®å‚a1å°†Tæ¨æ¼”ä¸ºintï¼Œæ ¹æ®å®å‚d2å°†Tæ¨æ¼”ä¸ºdoubleï¼Œä½†æ˜¯æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªTï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šæ­¤å¤„åº”è¯¥å°†Tç¡®å®šä¸ºintè¿˜æ˜¯doubleã€‚</p></blockquote><p>é’ˆå¯¹éœ€è¦å®ä¾‹åŒ–çš„å‚æ•°ç±»å‹ä¸åŒçš„é—®é¢˜ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š</p><ul><li>1.ç”¨æˆ·è‡ªå·±æ¥å¼ºåˆ¶è½¬åŒ–</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç cout &lt;&lt; <span class="built_in">Add</span>(a1,(<span class="type">int</span>)d2) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">Add</span>((<span class="type">double</span>)a1, d2) &lt;&lt; endl;</span><br></pre></td></tr></table></figure><ul><li>2.ä½¿ç”¨æ˜¾å¼å®ä¾‹åŒ–</li></ul><p><strong>äºŒã€æ˜¾ç¤ºå®ä¾‹åŒ–ï¼šåœ¨å‡½æ•°ååçš„&lt;&gt;ä¸­æŒ‡å®šæ¨¡æ¿å‚æ•°çš„å®é™…ç±»å‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç cout &lt;&lt;Add &lt;<span class="type">int</span>&gt;(a1,d2) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">Add</span>&lt;<span class="type">double</span>&gt;(a1, d2) &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°æ¨¡æ¿çš„åŒ¹é…åŸåˆ™"><a href="#å‡½æ•°æ¨¡æ¿çš„åŒ¹é…åŸåˆ™" class="headerlink" title="å‡½æ•°æ¨¡æ¿çš„åŒ¹é…åŸåˆ™"></a>å‡½æ•°æ¨¡æ¿çš„åŒ¹é…åŸåˆ™</h4><p>ä¸€ä¸ªéæ¨¡æ¿å‡½æ•°å¯ä»¥å’Œä¸€ä¸ªåŒåçš„å‡½æ•°æ¨¡æ¿åŒæ—¶å­˜åœ¨ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="comment">// ä¸“é—¨å¤„ç†intçš„åŠ æ³•å‡½æ•°(éå‡½æ•°æ¨¡æ¿ç±»å‹)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Add</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> left + right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é€šç”¨åŠ æ³•å‡½æ•°(å‡½æ•°æ¨¡æ¿ç±»å‹)</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">T <span class="title">Add</span><span class="params">(T left, T right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> left + right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">Add</span>(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// ä¸éå‡½æ•°æ¨¡æ¿ç±»å‹å®Œå…¨åŒ¹é…ï¼Œä¸éœ€è¦å‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–</span></span><br><span class="line"><span class="built_in">Add</span>&lt;<span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// å› ä¸ºä½¿ç”¨äº†æ˜¾å¼å®ä¾‹åŒ–ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨å‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–</span></span><br><span class="line"><span class="built_in">Add</span>(<span class="number">1.1</span>, <span class="number">2.3</span>);<span class="comment">//é€‰æ‹©å‡½æ•°æ¨¡æ¿ç±»å‹</span></span><br><span class="line"><span class="comment">//ä¸¤è€…éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå› ä¸ºéå‡½æ•°æ¨¡æ¿ç±»å‹å±äºæ™®é€šå‡½æ•°ï¼Œæ™®é€šå‡½æ•°å¯ä»¥éšå¼åœ°è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="comment">//ä½†æ˜¯å¦‚æœä½¿ç”¨éå‡½æ•°æ¨¡æ¿ç±»å‹ï¼Œéœ€è¦ç±»å‹è½¬æ¢åŒ¹é…ï¼Œæ‰€ä»¥å®ƒä¼šä¼˜å…ˆé€‰æ‹©å®ä¾‹åŒ–æ¨¡æ¿ç”Ÿæˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç±»æ¨¡æ¿"><a href="#ç±»æ¨¡æ¿" class="headerlink" title="ç±»æ¨¡æ¿"></a>ç±»æ¨¡æ¿</h3><p>ç±»æ¨¡æ¿çš„å®šä¹‰æ ¼å¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>,<span class="keyword">class</span> <span class="title class_">T2</span>,â€¦,<span class="keyword">class</span> <span class="title class_">Tn</span>&gt;</span><br><span class="line"><span class="keyword">class</span> ç±»æ¨¡æ¿å</span><br><span class="line">&#123;</span><br><span class="line">â€ƒâ€ƒ<span class="comment">//ç±»å†…æˆå‘˜å£°æ˜</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span> &gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ™®é€šç±»ï¼šç±»åå°±æ˜¯ç±»å‹;</span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿: ç±»åä¸æ˜¯ç±»å‹ï¼Œç±»å‹æ˜¯Stack&lt;T&gt;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Stack</span>(<span class="type">int</span> capacity=<span class="number">4</span>)</span><br><span class="line">:_a(<span class="keyword">new</span> T[acpacity])</span><br><span class="line">,_top(<span class="number">0</span>)</span><br><span class="line">,_capacity(capacity)</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Stack</span>()</span><br><span class="line">&#123;</span><br><span class="line">dalete[] _a;</span><br><span class="line">_a = <span class="literal">nullptr</span>;</span><br><span class="line">_top = _capacity = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»é‡Œé¢å£°æ˜ï¼Œç±»å¤–é¢å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push</span><span class="params">(<span class="type">const</span> T&amp; x)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T* _a;</span><br><span class="line"><span class="type">int</span> _top;</span><br><span class="line"><span class="type">int</span> _capacity;</span><br><span class="line">&#125;;</span><br><span class="line">cppå¤åˆ¶ä»£ç <span class="comment">//ç±»å¤–é¢å®šä¹‰</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;<span class="comment">//ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°è‹¥æ˜¯æ”¾åœ¨ç±»å¤–å®šä¹‰æ—¶ï¼Œéœ€è¦åŠ æ¨¡æ¿å‚æ•°åˆ—è¡¨</span></span><br><span class="line"><span class="type">void</span> Stack&lt;T&gt;::<span class="built_in">Push</span>(<span class="type">const</span> T&amp; x)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;æ³¨æ„&#x3D;&#x3D;ï¼š<strong>æ¨¡æ¿ä¸æ”¯æŒæŠŠå£°æ˜å†™åˆ°.h ï¼Œå®šä¹‰å†™åˆ°.cppè¿™ç§å£°æ˜å’Œå®šä¹‰åˆ†å¼€çš„æ–¹å¼ï¼Œä¼šæŠ¥é“¾æ¥é”™è¯¯</strong></p><h4 id="ç±»æ¨¡æ¿çš„å®ä¾‹åŒ–"><a href="#ç±»æ¨¡æ¿çš„å®ä¾‹åŒ–" class="headerlink" title="ç±»æ¨¡æ¿çš„å®ä¾‹åŒ–"></a>ç±»æ¨¡æ¿çš„å®ä¾‹åŒ–</h4><p>ç±»æ¨¡æ¿å®ä¾‹åŒ–éœ€è¦åœ¨ç±»æ¨¡æ¿åå­—åé¢æ ¹&lt;&gt;ï¼Œç„¶åå°†å®ä¾‹åŒ–çš„ç±»å‹æ”¾åœ¨&lt;&gt;ä¸­</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿çš„ä½¿ç”¨éƒ½æ˜¯æ˜¾ç¤ºå®ä¾‹åŒ–</span></span><br><span class="line">Stack&lt;TreeNode*&gt; st1;<span class="comment">//TreeNode*</span></span><br><span class="line">Stack&lt;<span class="type">int</span>&gt; st2;<span class="comment">//int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="éç±»å‹æ¨¡æ¿å‚æ•°"><a href="#éç±»å‹æ¨¡æ¿å‚æ•°" class="headerlink" title="éç±»å‹æ¨¡æ¿å‚æ•°"></a>éç±»å‹æ¨¡æ¿å‚æ•°</h3><p>æ¨¡æ¿å‚æ•°å¯åˆ†ä¸º<strong>ç±»å‹å½¢å‚</strong>å’Œ<strong>éç±»å‹å½¢å‚</strong>ã€‚</p><blockquote><ul><li>ç±»å‹å½¢å‚ï¼š å‡ºç°åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­ï¼Œè·Ÿåœ¨classæˆ–typenameå…³é”®å­—ä¹‹åçš„å‚æ•°ç±»å‹åç§°ã€‚</li><li>éç±»å‹å½¢å‚ï¼š ç”¨ä¸€ä¸ªå¸¸é‡ä½œä¸ºç±»ï¼ˆå‡½æ•°ï¼‰æ¨¡æ¿çš„ä¸€ä¸ªå‚æ•°ï¼Œåœ¨ç±»ï¼ˆå‡½æ•°ï¼‰æ¨¡æ¿ä¸­å¯å°†è¯¥å‚æ•°å½“æˆå¸¸é‡æ¥ä½¿ç”¨ã€‚</li></ul></blockquote><p>æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼š å®šä¹‰ä¸€ä¸ªé™æ€çš„æ ˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="meta">#<span class="keyword">define</span> N 10</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T _a[N];</span><br><span class="line"><span class="type">size_t</span> top;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Stack&lt;<span class="type">int</span>&gt; sk1;<span class="comment">//10</span></span><br><span class="line">Stack&lt;<span class="type">int</span>&gt; sk2;<span class="comment">//å‡è®¾æˆ‘ä»¬åŒæ—¶è¿˜æƒ³è¦ä¸€ä¸ªå¤§å°ä¸º1000çš„æ ˆï¼ˆsk2ï¼‰,å› ä¸ºNçš„é™åˆ¶ï¼Œæˆ‘ä»¬åªèƒ½å®šä¹‰å¤šä¸ªæ ˆ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>éç±»å‹æ¨¡æ¿å‚æ•°</strong>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span> ,<span class="type">size_t</span> N&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T _a[N];</span><br><span class="line"><span class="type">size_t</span> top;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Stack&lt;<span class="type">int</span>,<span class="number">10</span>&gt; sk1;<span class="comment">//10</span></span><br><span class="line">Stack&lt;<span class="type">int</span>,<span class="number">1000</span>&gt; sk2;<span class="comment">//1000</span></span><br><span class="line"><span class="comment">//è¿™æ ·é€šè¿‡æ§åˆ¶Stack&lt;int,m&gt; ä¸­çš„mï¼ˆmå¿…é¡»æ˜¯å¸¸é‡ï¼‰å€¼å¯ä»¥å®ç°å¤šä¸ªå¤§å°ä¸åŒçš„æ ˆ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>&#x2F;&#x2F;æ¨¡æ¿å‚æ•°éƒ½å¯ä»¥è®¾ç½®ç¼ºçœå€¼</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="type">size_t</span> N=<span class="number">10</span>&gt;</span><br><span class="line"><span class="keyword">class</span> Stack</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T _a[N];</span><br><span class="line"><span class="type">size_t</span> top;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Stack&lt;<span class="type">int</span>&gt; sk1;<span class="comment">//10(ä½¿ç”¨ç¼ºçœå€¼ï¼šé»˜è®¤ç»™10)</span></span><br><span class="line">Stack&lt;<span class="type">int</span>, <span class="number">1000</span>&gt; sk2;<span class="comment">//1000ï¼ˆå¦‚æœè¿™é‡Œç»™äº†ï¼Œä¸ä½¿ç”¨ç¼ºçœå€¼ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;æ³¨æ„&#x3D;&#x3D;ï¼š</p><blockquote><p>1.éç±»å‹æ¨¡æ¿å‚æ•°åªå…è®¸ä½¿ç”¨æ•´å‹å®¶æ—ï¼›æµ®ç‚¹æ•°ã€ç±»å¯¹è±¡ä»¥åŠå­—ç¬¦ä¸²æ˜¯ä¸å…è®¸ä½œä¸ºéç±»å‹æ¨¡æ¿å‚æ•°çš„ã€‚ 2.éç±»å‹çš„æ¨¡æ¿å‚æ•°åœ¨ç¼–è¯‘æœŸå°±éœ€è¦ç¡®è®¤ç»“æœï¼Œå› ä¸ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå°±éœ€è¦æ ¹æ®ä¼ å…¥çš„éç±»å‹æ¨¡æ¿å‚æ•°ç”Ÿæˆå¯¹åº”çš„ç±»æˆ–å‡½æ•°ã€‚</p></blockquote><h3 id="æ¨¡æ¿çš„ç‰¹åŒ–"><a href="#æ¨¡æ¿çš„ç‰¹åŒ–" class="headerlink" title="æ¨¡æ¿çš„ç‰¹åŒ–"></a>æ¨¡æ¿çš„ç‰¹åŒ–</h3><p>æ¨¡æ¿ç‰¹åŒ–ï¼šåœ¨åŸæ¨¡æ¿ç±»çš„åŸºç¡€ä¸Šï¼Œé’ˆå¯¹ç‰¹æ®Šç±»å‹æ‰€è¿›è¡Œçš„ç‰¹æ®ŠåŒ–çš„å®ç°ã€‚åˆ†ä¸ºå‡½æ•°æ¨¡æ¿ç‰¹åŒ– å’Œç±»æ¨¡æ¿ç‰¹åŒ–ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³›å‹ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">compare</span><span class="params">(<span class="type">const</span> T &amp;v1, <span class="type">const</span> T &amp;v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(v1 &lt; v2) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  <span class="keyword">if</span>(v2 &gt; v1) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>å¯¹äºè¯¥å‡½æ•°æ¨¡æ¿ï¼Œå½“å®å‚ä¸ºä¸¤ä¸ªcharæŒ‡é’ˆæ—¶ï¼Œæ¯”è¾ƒçš„æ˜¯æŒ‡é’ˆçš„å¤§å°ï¼Œè€Œä¸æ˜¯æŒ‡é’ˆæŒ‡å‘å†…å®¹çš„å¤§å°ï¼Œæ­¤æ—¶å°±éœ€è¦ä¸ºè¯¥å‡½æ•°æ¨¡æ¿å®šä¹‰ä¸€ä¸ªç‰¹åŒ–ç‰ˆæœ¬ï¼Œå³ç‰¹æ®Šå¤„ç†çš„ç‰ˆæœ¬ã€‚</p><blockquote><p>å‡½æ•°æ¨¡æ¿çš„ç‰¹åŒ–æ­¥éª¤ï¼š</p><ul><li>é¦–å…ˆå¿…é¡»è¦æœ‰ä¸€ä¸ªåŸºç¡€çš„å‡½æ•°æ¨¡æ¿ã€‚</li><li>å…³é”®å­—templateåé¢æ¥ä¸€å¯¹ç©ºçš„å°–æ‹¬å·&lt;&gt;ã€‚</li><li>å‡½æ•°ååè·Ÿä¸€å¯¹å°–æ‹¬å·ï¼Œå°–æ‹¬å·ä¸­æŒ‡å®šéœ€è¦ç‰¹åŒ–çš„ç±»å‹ã€‚</li><li>å‡½æ•°å½¢å‚è¡¨å¿…é¡»è¦å’Œæ¨¡æ¿å‡½æ•°çš„åŸºç¡€å‚æ•°ç±»å‹å®Œå…¨ç›¸åŒï¼Œå¦åˆ™ä¸åŒçš„ç¼–è¯‘å™¨å¯èƒ½ä¼šæŠ¥ä¸€äº›å¥‡æ€ªçš„é”™è¯¯ã€‚</li></ul></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="comment">//ä¸ºå®å‚ç±»å‹ const char * æä¾›ç‰¹åŒ–ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">template</span> &lt;&gt; <span class="type">int</span> <span class="built_in">compare</span>&lt;<span class="type">const</span> <span class="type">char</span> *&gt;(<span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> &amp;v1, <span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> &amp;v2)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">strcmp</span>(v1, v2);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>è§£è¯»ï¼š</p><ol><li><code>template &lt;&gt;</code> &#x2F;&#x2F;ç©ºæ¨¡æ¿å½¢å‚è¡¨</li><li><code>compare&lt;const char *&gt;</code> &#x2F;&#x2F;æ¨¡æ¿åå­—åæŒ‡å®šç‰¹åŒ–æ—¶çš„æ¨¡æ¿å½¢å‚å³const char * ç±»å‹ï¼Œå°±æ˜¯è¯´åœ¨ä»¥å®å‚ç±»å‹const char * è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°†äº§ç”Ÿè¯¥æ¨¡æ¿çš„ç‰¹åŒ–ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯æ³›å‹ç‰ˆæœ¬ã€‚</li><li><code>(const char * const &amp;v1, const char * const &amp;v2)</code>&#x2F;&#x2F;å¯ä»¥ç†è§£ä¸º: const  char * const &amp;v1, å»æ‰constä¿®é¥°ç¬¦ï¼Œå®é™…ç±»å‹æ˜¯ï¼šchar *&amp;v1ï¼Œä¹Ÿå°±æ˜¯v1æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œä¸€ä¸ªæŒ‡å‘charå‹æŒ‡é’ˆçš„å¼•ç”¨ï¼Œå³æŒ‡é’ˆçš„å¼•ç”¨ï¼ŒåŠ ä¸Šconstä¿®é¥°ç¬¦ï¼Œv1å°±æ˜¯ä¸€ä¸ªæŒ‡å‘const char å‹æŒ‡é’ˆçš„ constå¼•ç”¨ï¼Œå¯¹v1çš„æ“ä½œå°±æ˜¯å¯¹æŒ‡é’ˆæœ¬èº«çš„æ“ä½œï¼Œ</li></ol><h4 id="ç±»æ¨¡æ¿çš„ç‰¹åŒ–"><a href="#ç±»æ¨¡æ¿çš„ç‰¹åŒ–" class="headerlink" title="ç±»æ¨¡æ¿çš„ç‰¹åŒ–"></a>ç±»æ¨¡æ¿çš„ç‰¹åŒ–</h4><blockquote><p>ç±»æ¨¡æ¿çš„ç‰¹åŒ–åˆ†ä¸ºå…¨ç‰¹åŒ–å’Œåç‰¹åŒ–ã€‚</p></blockquote><p><strong>å…¨ç‰¹åŒ–ï¼š å¯¹ç±»æ¨¡æ¿å‚æ•°åˆ—è¡¨çš„ç±»å‹å…¨éƒ¨éƒ½ç¡®å®šï¼ˆæ˜ç¡®æŒ‡å®šï¼‰</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="comment">//åŸºç¡€</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Date</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Date</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Date&lt;T1, T2&gt;&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T1 _d1;</span><br><span class="line">T2 _d2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨ç‰¹åŒ–</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Date</span>&lt;<span class="type">int</span>, <span class="type">double</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Date</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Date&lt;int, double&gt;&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> _d1;</span><br><span class="line"><span class="type">double</span> _d2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>åç‰¹åŒ–ï¼š å †ç±»æ¨¡æ¿çš„å‚æ•°åˆ—è¡¨ä¸­éƒ¨åˆ†å‚æ•°è¿›è¡Œç¡®å®šåŒ–åˆ†ä¸ºéƒ¨åˆ†ç‰¹åŒ–å’Œå‚æ•°è¿›ä¸€æ­¥é™åˆ¶</strong></p><p>éƒ¨åˆ†ç‰¹åŒ–:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="comment">// éƒ¨åˆ†</span></span><br><span class="line"><span class="comment">// åç‰¹åŒ–/åŠç‰¹åŒ–</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span> &lt;T1, <span class="type">char</span>&gt;<span class="comment">//åªè¦ç¬¬äºŒä¸ªç±»å‹æ˜¯charå°±åŒ¹é…è¿™ä¸ª</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Data</span>() &#123; cout &lt;&lt; <span class="string">&quot;Data&lt;T1, char&gt;&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å‚æ•°è¿›ä¸€æ­¥é™åˆ¶ :</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cppå¤åˆ¶ä»£ç <span class="comment">// å¯¹æ¨¡æ¿å‚æ•°æ›´è¿›ä¸€æ­¥çš„æ¡ä»¶é™åˆ¶</span></span><br><span class="line"><span class="comment">// åç‰¹åŒ–/åŠç‰¹åŒ–ï¼šä¸ä¸€å®šæŒ‡çš„æ˜¯ç‰¹åŒ–éƒ¨åˆ†å‚æ•°ï¼Œè€Œæ˜¯å¯¹æ¨¡æ¿å‚æ•°ç±»å‹çš„è¿›ä¸€æ­¥é™åˆ¶</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span> &lt;T1*, T2*&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Data</span>() &#123; cout &lt;&lt; <span class="string">&quot;Data&lt;T1*, T2*&gt;&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span> &lt; T1&amp;, T2&amp;&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Data</span>() &#123; cout &lt;&lt; <span class="string">&quot;Data&lt;T1&amp;, T2&amp;&gt;&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span> &lt; T1&amp;, T2* &gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Data</span>() &#123; cout &lt;&lt; <span class="string">&quot;Data&lt;T1&amp;, T2*&gt;&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h2><h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯STL"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯STL" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯STL?"></a>ä¸€ã€ä»€ä¹ˆæ˜¯STL?</h3><p>1ã€STLï¼ˆStandard Template Libraryï¼‰ï¼Œå³æ ‡å‡†æ¨¡æ¿åº“ï¼Œæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„C++ç¨‹åºåº“ï¼ŒåŒ…å«äº†è¯¸å¤šå¸¸ç”¨çš„åŸºæœ¬æ•°æ®ç»“æ„å’ŒåŸºæœ¬ç®—æ³•ã€‚ä¸ºå¹¿å¤§C++ç¨‹åºå‘˜ä»¬æä¾›äº†ä¸€ä¸ªå¯æ‰©å±•çš„åº”ç”¨æ¡†æ¶ï¼Œé«˜åº¦ä½“ç°äº†è½¯ä»¶çš„å¯å¤ç”¨æ€§ã€‚</p><p>2ã€ä»é€»è¾‘å±‚æ¬¡æ¥çœ‹ï¼Œåœ¨STLä¸­ä½“ç°äº†<strong>æ³›å‹</strong>åŒ–ç¨‹åºè®¾è®¡çš„æ€æƒ³ï¼ˆgeneric programmingï¼‰ã€‚åœ¨è¿™ç§æ€æƒ³é‡Œï¼Œå¤§éƒ¨åˆ†åŸºæœ¬ç®—æ³•è¢«æŠ½è±¡ï¼Œè¢«æ³›åŒ–ï¼Œç‹¬ç«‹äºä¸ä¹‹å¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œç”¨äºä»¥ç›¸åŒæˆ–ç›¸è¿‘çš„æ–¹å¼å¤„ç†å„ç§ä¸åŒæƒ…å½¢ã€‚</p><p>3ã€ä»å®ç°å±‚æ¬¡çœ‹ï¼Œæ•´ä¸ªSTLæ˜¯ä»¥ä¸€ç§ç±»å‹å‚æ•°åŒ–ï¼ˆtype parameterizedï¼‰çš„æ–¹å¼å®ç°çš„ï¼ŒåŸºäº<strong>æ¨¡æ¿</strong>ï¼ˆtemplateï¼‰ã€‚</p><p>STLæœ‰å…­å¤§ç»„ä»¶ï¼Œä½†ä¸»è¦åŒ…å«å®¹å™¨ã€è¿­ä»£å™¨å’Œç®—æ³•ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><ul><li><strong>å®¹å™¨</strong>ï¼ˆContainersï¼‰ï¼šç”¨æ¥ç®¡ç†æŸç±»å¯¹è±¡çš„é›†åˆã€‚æ¯ä¸€ç§å®¹å™¨éƒ½æœ‰å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œæ‰€ä»¥ä¸ºäº†åº”ä»˜ç¨‹åºä¸­çš„ä¸åŒéœ€æ±‚ï¼ŒSTL å‡†å¤‡äº†ä¸ƒç§åŸºæœ¬å®¹å™¨ç±»å‹ã€‚</li><li><strong>è¿­ä»£å™¨</strong>ï¼ˆIteratorsï¼‰ï¼šç”¨æ¥åœ¨ä¸€ä¸ªå¯¹è±¡é›†åˆçš„å…ƒç´ ä¸Šè¿›è¡Œéå†åŠ¨ä½œã€‚è¿™ä¸ªå¯¹è±¡é›†åˆæˆ–è®¸æ˜¯ä¸ªå®¹å™¨ï¼Œæˆ–è®¸æ˜¯å®¹å™¨çš„ä¸€éƒ¨åˆ†ã€‚æ¯ä¸€ç§å®¹å™¨éƒ½æä¾›äº†è‡ªå·±çš„è¿­ä»£å™¨ï¼Œè€Œè¿™äº›è¿­ä»£å™¨äº†è§£è¯¥ç§å®¹å™¨çš„å†…éƒ¨ç»“æ„ã€‚</li><li><strong>ç®—æ³•</strong>ï¼ˆAlgorithmsï¼‰ï¼šç”¨æ¥å¤„ç†å¯¹è±¡é›†åˆä¸­çš„å…ƒç´ ï¼Œæ¯”å¦‚ Sortï¼ŒSearchï¼ŒCopyï¼ŒErase é‚£äº›å…ƒç´ ã€‚é€šè¿‡è¿­ä»£å™¨çš„ååŠ©ï¼Œæˆ‘ä»¬åªéœ€æ’°å†™ä¸€æ¬¡ç®—æ³•ï¼Œå°±å¯ä»¥å°†å®ƒåº”ç”¨äºä»»æ„å®¹å™¨ä¹‹ä¸Šï¼Œè¿™æ˜¯å› ä¸ºæ‰€æœ‰å®¹å™¨çš„è¿­ä»£å™¨éƒ½æä¾›ä¸€è‡´çš„æ¥å£ã€‚</li></ul><p>STL çš„åŸºæœ¬è§‚å¿µå°±æ˜¯å°†æ•°æ®å’Œæ“ä½œåˆ†ç¦»ã€‚æ•°æ®ç”±å®¹å™¨è¿›è¡Œç®¡ç†ï¼Œæ“ä½œåˆ™ç”±ç®—æ³•è¿›è¡Œï¼Œè€Œè¿­ä»£å™¨åœ¨ä¸¤è€…ä¹‹é—´å……å½“ç²˜åˆå‰‚ï¼Œä½¿ä»»ä½•ç®—æ³•éƒ½å¯ä»¥å’Œä»»ä½•å®¹å™¨äº¤äº’è¿ä½œã€‚</p><h3 id="äºŒã€å®¹å™¨ï¼ˆContainersï¼‰"><a href="#äºŒã€å®¹å™¨ï¼ˆContainersï¼‰" class="headerlink" title="äºŒã€å®¹å™¨ï¼ˆContainersï¼‰"></a>äºŒã€å®¹å™¨ï¼ˆContainersï¼‰</h3><p>å®¹å™¨ç”¨æ¥ç®¡ç†æŸç±»å¯¹è±¡ã€‚ä¸ºäº†åº”ä»˜ç¨‹åºä¸­çš„ä¸åŒéœ€æ±‚ï¼ŒSTL å‡†å¤‡äº†ä¸¤ç±»å…±ä¸ƒç§åŸºæœ¬å®¹å™¨ç±»å‹ï¼š</p><ul><li>åºåˆ—å¼å®¹å™¨ï¼ˆSequence containersï¼‰ï¼Œæ­¤ä¸ºå¯åºç¾¤é›†ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ å‡æœ‰å›ºå®šä½ç½®â€”å–å†³äºæ’å…¥æ—¶æœºå’Œåœ°ç‚¹ï¼Œå’Œå…ƒç´ å€¼æ— å…³ã€‚å¦‚æœä½ ä»¥è¿½åŠ æ–¹å¼å¯¹ä¸€ä¸ªç¾¤é›†æ’å…¥å…­ä¸ªå…ƒç´ ï¼Œå®ƒä»¬çš„æ’åˆ—æ¬¡åºå°†å’Œæ’å…¥æ¬¡åºä¸€è‡´ã€‚STLæä¾›äº†ä¸‰ä¸ªåºåˆ—å¼å®¹å™¨ï¼šå‘é‡ï¼ˆvectorï¼‰ã€åŒç«¯é˜Ÿåˆ—ï¼ˆdequeï¼‰ã€åˆ—è¡¨ï¼ˆlistï¼‰ï¼Œæ­¤å¤–ä½ ä¹Ÿå¯ä»¥æŠŠ string å’Œ array å½“åšä¸€ç§åºåˆ—å¼å®¹å™¨ã€‚</li><li>å…³è”å¼å®¹å™¨ï¼ˆAssociative containersï¼‰ï¼Œæ­¤ä¸ºå·²åºç¾¤é›†ï¼Œå…ƒç´ ä½ç½®å–å†³äºç‰¹å®šçš„æ’åºå‡†åˆ™ä»¥åŠå…ƒç´ å€¼ï¼Œå’Œæ’å…¥æ¬¡åºæ— å…³ã€‚å¦‚æœä½ å°†å…­ä¸ªå…ƒç´ ç½®å…¥è¿™æ ·çš„ç¾¤é›†ä¸­ï¼Œå®ƒä»¬çš„ä½ç½®å–å†³äºå…ƒç´ å€¼ï¼Œå’Œæ’å…¥æ¬¡åºæ— å…³ã€‚STLæä¾›äº†å››ä¸ªå…³è”å¼å®¹å™¨ï¼šé›†åˆï¼ˆsetï¼‰ã€å¤šé‡é›†åˆï¼ˆmultisetï¼‰ã€æ˜ å°„ï¼ˆmapï¼‰å’Œå¤šé‡æ˜ å°„ï¼ˆmultimapï¼‰ã€‚</li></ul><p>ç¤ºæ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/../image/654.png" class="lazyload" data-srcset="/../image/654.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="654"></p><h4 id="2-1-vector"><a href="#2-1-vector" class="headerlink" title="2.1 vector"></a>2.1 vector</h4><p>vectorï¼ˆå‘é‡ï¼‰: æ˜¯ä¸€ç§åºåˆ—å¼å®¹å™¨ï¼Œäº‹å®ä¸Šå’Œæ•°ç»„å·®ä¸å¤šï¼Œä½†å®ƒæ¯”æ•°ç»„æ›´ä¼˜è¶Šã€‚ä¸€èˆ¬æ¥è¯´æ•°ç»„ä¸èƒ½åŠ¨æ€æ‹“å±•ï¼Œå› æ­¤åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ä¸æ˜¯æµªè´¹å†…å­˜ï¼Œå°±æ˜¯é€ æˆè¶Šç•Œã€‚è€Œ vector æ­£å¥½å¼¥è¡¥äº†è¿™ä¸ªç¼ºé™·ï¼Œå½“å†…å­˜ç©ºé—´ä¸å¤Ÿæ—¶ï¼Œéœ€è¦é‡æ–°ç”³è¯·ä¸€å—è¶³å¤Ÿå¤§çš„å†…å­˜å¹¶è¿›è¡Œå†…å­˜çš„æ‹·è´ã€‚</p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>æ‹¥æœ‰ä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤å®ƒèƒ½éå¸¸å¥½çš„æ”¯æŒéšæœºè®¿é—®ï¼Œå³ [] æ“ä½œç¬¦å’Œ .at()ï¼Œéšæœºè®¿é—®å¿«ã€‚ï¼ˆä¼˜ç‚¹ï¼‰</li><li>å½“å‘å…¶å¤´éƒ¨æˆ–ä¸­é—´æ’å…¥æˆ–åˆ é™¤å…ƒç´ æ—¶ï¼Œä¸ºäº†ä¿æŒåŸæœ¬çš„ç›¸å¯¹æ¬¡åºï¼Œæ’å…¥æˆ–åˆ é™¤ç‚¹ä¹‹åçš„æ‰€æœ‰å…ƒç´ éƒ½å¿…é¡»ç§»åŠ¨ï¼Œæ‰€ä»¥æ’å…¥æˆ–åˆ é™¤çš„æ•ˆç‡æ¯”è¾ƒä½ã€‚ï¼ˆç¼ºç‚¹ï¼‰</li><li>åœ¨åé¢æ’å…¥åˆ é™¤å…ƒç´ æœ€å¿«ï¼Œæ­¤æ—¶ä¸€èˆ¬ä¸éœ€è¦ç§»åŠ¨å†…å­˜ã€‚ï¼ˆä¼˜ç‚¹ï¼‰</li><li>æ€»ç»“ï¼šç›¸å½“äºå¯æ‹“å±•çš„æ•°ç»„ï¼ˆåŠ¨æ€æ•°ç»„ï¼‰ï¼Œéšæœºè®¿é—®å¿«ï¼Œåœ¨å¤´éƒ¨å’Œä¸­é—´æ’å…¥æˆ–åˆ é™¤æ•ˆç‡ä½ï¼Œä½†åœ¨å°¾éƒ¨æ’å…¥æˆ–åˆ é™¤æ•ˆç‡é«˜ã€‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯</strong></p><p>é€‚ç”¨äºå¯¹è±¡ç®€å•ï¼Œå˜åŒ–è¾ƒå°ï¼Œå¹¶ä¸”é¢‘ç¹éšæœºè®¿é—®çš„åœºæ™¯ã€‚</p><p><strong>ä¾‹å­</strong></p><p>ä»¥ä¸‹ä¾‹å­é’ˆå¯¹æ•´å‹å®šä¹‰äº†ä¸€ä¸ª vectorï¼Œæ’å…¥ 6 ä¸ªå…ƒç´ ï¼Œç„¶åæ‰“å°æ‰€æœ‰å…ƒç´ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vecTemp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i&lt;<span class="number">6</span>; i++)</span><br><span class="line">vecTemp.<span class="built_in">push_back</span>(i);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i&lt;vecTemp.<span class="built_in">size</span>(); i++)</span><br><span class="line">cout &lt;&lt; vecTemp[i] &lt;&lt;<span class="string">&quot; &quot;</span>; <span class="comment">// è¾“å‡ºï¼š0 1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-deque"><a href="#2-2-deque" class="headerlink" title="2.2 deque"></a>2.2 deque</h4><p>dequeï¼ˆdouble-ended queueï¼‰æ˜¯åŒå‘å¼€å£çš„è¿ç»­å†…å­˜ç©ºé—´ï¼ˆåŠ¨æ€å°†å¤šä¸ªè¿ç»­ç©ºé—´é€šè¿‡æŒ‡é’ˆæ•°ç»„æ¥åˆåœ¨ä¸€èµ·ï¼‰ï¼Œéšæ—¶å¯ä»¥å¢åŠ ä¸€æ®µæ–°çš„ç©ºé—´ã€‚deque çš„æœ€å¤§ä»»åŠ¡å°±æ˜¯åœ¨è¿™äº›åˆ†æ®µçš„è¿ç»­ç©ºé—´ä¸Šï¼Œç»´æŠ¤å…¶æ•´ä½“è¿ç»­çš„å‡è±¡ï¼Œå¹¶æä¾›éšæœºå­˜å–çš„æ¥å£ã€‚</p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>ä¸€æ—¦è¦åœ¨ deque çš„å¤´éƒ¨å’Œå°¾éƒ¨å¢åŠ æ–°ç©ºé—´ï¼Œä¾¿é…ç½®ä¸€æ®µå®šé‡è¿ç»­ç©ºé—´ï¼Œä¸²åœ¨æ•´ä¸ª deque çš„å¤´éƒ¨æˆ–å°¾éƒ¨ï¼Œå› æ­¤ä¸è®ºåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨æ’å…¥å…ƒç´ éƒ½ååˆ†è¿…é€Ÿã€‚ (ä¼˜ç‚¹ï¼‰</li><li>åœ¨ä¸­é—´éƒ¨åˆ†å®‰æ’å…ƒç´ åˆ™æ¯”è¾ƒè´¹æ—¶ï¼Œå› ä¸ºå¿…é¡»ç§»åŠ¨å…¶å®ƒå…ƒç´ ã€‚ï¼ˆç¼ºç‚¹ï¼‰</li><li>deque æ˜¯ list å’Œ vector çš„æŠ˜ä¸­æ–¹æ¡ˆã€‚å…¼æœ‰ list çš„ä¼˜ç‚¹ï¼Œä¹Ÿæœ‰ vector éšæœºè®¿é—®æ•ˆç‡é«˜çš„ä¼˜ç‚¹ã€‚</li><li>æ€»ç»“ï¼šæ”¯æŒéšæœºè®¿é—®ï¼Œä½†æ•ˆç‡æ²¡æœ‰ vector é«˜ï¼Œåœ¨å¤´éƒ¨å’Œå°¾éƒ¨æ’å…¥æˆ–åˆ é™¤æ•ˆç‡é«˜ï¼Œä½†åœ¨ä¸­é—´æ’å…¥æˆ–åˆ é™¤æ•ˆç‡ä½ã€‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯</strong></p><p>é€‚ç”¨äºæ—¢è¦é¢‘ç¹éšæœºè®¿é—®ï¼Œåˆè¦å…³å¿ƒä¸¤ç«¯æ•°æ®çš„æ’å…¥ä¸åˆ é™¤çš„åœºæ™¯ã€‚</p><p><strong>ä¾‹å­</strong></p><p>ä»¥ä¸‹ä¾‹å­å£°æ˜äº†ä¸€ä¸ªæµ®ç‚¹ç±»å‹çš„ dequeï¼Œå¹¶åœ¨å®¹å™¨å°¾éƒ¨æ’å…¥ 6 ä¸ªå…ƒç´ ï¼Œæœ€åæ‰“å°å‡ºæ‰€æœ‰å…ƒç´ ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">float</span>&gt; dequeTemp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i&lt;<span class="number">6</span>; i++)</span><br><span class="line">dequeTemp.<span class="built_in">push_back</span>(i);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i&lt;dequeTemp.<span class="built_in">size</span>(); i++)</span><br><span class="line">cout &lt;&lt; dequeTemp[i] &lt;&lt; <span class="string">&quot; &quot;</span>; <span class="comment">// è¾“å‡ºï¼š0 1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-list"><a href="#2-3-list" class="headerlink" title="2.3 list"></a>2.3 list</h4><p>List ç”±åŒå‘é“¾è¡¨ï¼ˆdoubly linked listï¼‰å®ç°è€Œæˆï¼Œå…ƒç´ å­˜æ”¾åœ¨å †ä¸­ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯æ”¾åœ¨ä¸€å—å†…å­˜ä¸­ã€‚æ²¡æœ‰ç©ºé—´é¢„ç•™ä¹ æƒ¯ï¼Œæ‰€ä»¥æ¯åˆ†é…ä¸€ä¸ªå…ƒç´ éƒ½ä¼šä»å†…å­˜ä¸­åˆ†é…ï¼Œæ¯åˆ é™¤ä¸€ä¸ªå…ƒç´ éƒ½ä¼šé‡Šæ”¾å®ƒå ç”¨çš„å†…å­˜ã€‚</p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>å†…å­˜ç©ºé—´å¯ä»¥æ˜¯ä¸è¿ç»­çš„ï¼Œé€šè¿‡æŒ‡é’ˆæ¥è¿›è¡Œæ•°æ®çš„è®¿é—®ï¼Œè¿™ä¸ªç‰¹ç‚¹ä½¿å¾—å®ƒçš„éšæœºå­˜å–å˜å¾—éå¸¸æ²¡æœ‰æ•ˆç‡ï¼Œå› æ­¤å®ƒæ²¡æœ‰æä¾› [] æ“ä½œç¬¦çš„é‡è½½ã€‚ï¼ˆç¼ºç‚¹ï¼‰</li><li>ç”±äºé“¾è¡¨çš„ç‰¹ç‚¹ï¼Œåœ¨ä»»æ„ä½ç½®çš„æ’å…¥å’Œåˆ é™¤æ•ˆç‡éƒ½è¾ƒé«˜ã€‚ï¼ˆä¼˜ç‚¹ï¼‰</li><li>åªæ”¯æŒé¦–å°¾ä¸¤ä¸ªå…ƒç´ çš„ç›´æ¥å­˜å–ï¼Œæƒ³è·å–å…¶ä»–å…ƒç´ ï¼ˆè®¿é—®æ—¶é—´ä¸€æ ·ï¼‰ï¼Œåˆ™éœ€è¦éå†é“¾è¡¨ã€‚ï¼ˆç¼ºç‚¹ï¼‰</li><li>æ€»ç»“ï¼šä¸æ”¯æŒéšæœºè®¿é—®ï¼Œåœ¨ä»»æ„ä½ç½®çš„æ’å…¥å’Œåˆ é™¤æ•ˆç‡éƒ½è¾ƒé«˜ã€‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯</strong></p><p>é€‚ç”¨äºç»å¸¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œå¹¶ä¸”ä¸ç»å¸¸éšæœºè®¿é—®çš„åœºæ™¯ã€‚</p><p><strong>ä¾‹å­</strong></p><p>ä»¥ä¸‹ä¾‹å­äº§ç”Ÿä¸€ä¸ªç©º listï¼Œå‡†å¤‡æ”¾ç½®å­—ç¬¦ï¼Œç„¶åå°† â€˜aâ€™ è‡³ â€˜zâ€™ çš„æ‰€æœ‰å­—ç¬¦æ’å…¥å…¶ä¸­ï¼Œåˆ©ç”¨å¾ªç¯æ¯æ¬¡æ‰“å°å¹¶ç§»é™¤é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä»è€Œæ‰“å°å‡ºæ‰€æœ‰å…ƒç´ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">char</span>&gt; listTemp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">char</span> c = <span class="string">&#x27;a&#x27;</span>; c &lt;= <span class="string">&#x27;z&#x27;</span>; ++c)</span><br><span class="line">listTemp.<span class="built_in">push_back</span>(c);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!listTemp.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt;listTemp.<span class="built_in">front</span>() &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">listTemp.<span class="built_in">pop_front</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆå‘˜å‡½æ•°<code>empty()</code>çš„è¿”å›å€¼å‘Šè¯‰æˆ‘ä»¬å®¹å™¨ä¸­æ˜¯å¦è¿˜æœ‰å…ƒç´ ï¼Œåªè¦è¿™ä¸ªå‡½æ•°è¿”å› falseï¼Œå¾ªç¯å°±ç»§ç»­è¿›è¡Œã€‚å¾ªç¯ä¹‹å†…ï¼Œæˆå‘˜å‡½æ•°<code>front()</code>ä¼šè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ<code>pop_front()</code>å‡½æ•°ä¼šåˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>æ³¨æ„ï¼šlist&lt;æŒ‡é’ˆ&gt; å®Œå…¨æ˜¯æ€§èƒ½æœ€ä½çš„åšæ³•ï¼Œè¿˜ä¸å¦‚ç›´æ¥ä½¿ç”¨ list&lt;å¯¹è±¡&gt; æˆ–ä½¿ç”¨ vector&lt;æŒ‡é’ˆ&gt; å¥½ï¼Œå› ä¸ºæŒ‡é’ˆæ²¡æœ‰æ„é€ ä¸ææ„ï¼Œä¹Ÿä¸å ç”¨å¾ˆå¤§å†…å­˜ã€‚</p><h4 id="2-4-set"><a href="#2-4-set" class="headerlink" title="2.4 set"></a>2.4 set</h4><p>setï¼ˆé›†åˆï¼‰é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ•°å­¦ä¸Šçš„é›†åˆâ€”â€”æ¯ä¸ªå…ƒç´ æœ€å¤šåªå‡ºç°ä¸€æ¬¡ï¼Œå¹¶ä¸” set ä¸­çš„å…ƒç´ å·²ç»ä»å°åˆ°å¤§æ’å¥½åºã€‚</p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>ä½¿ç”¨çº¢é»‘æ ‘å®ç°ï¼Œå…¶å†…éƒ¨å…ƒç´ ä¾æ®å…¶å€¼è‡ªåŠ¨æ’åºï¼Œæ¯ä¸ªå…ƒç´ å€¼åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œä¸å…è®¸é‡å¤ã€‚</li><li>æ¯æ¬¡æ’å…¥å€¼çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è°ƒæ•´çº¢é»‘æ ‘ï¼Œæ•ˆç‡æœ‰ä¸€å®šå½±å“ã€‚ï¼ˆç¼ºç‚¹ï¼‰</li><li>map å’Œ set çš„æ’å…¥æˆ–åˆ é™¤æ•ˆç‡æ¯”ç”¨å…¶ä»–åºåˆ—å®¹å™¨é«˜ï¼Œå› ä¸ºå¯¹äºå…³è”å®¹å™¨æ¥è¯´ï¼Œä¸éœ€è¦åšå†…å­˜æ‹·è´å’Œå†…å­˜ç§»åŠ¨ã€‚ï¼ˆä¼˜ç‚¹ï¼‰</li><li>æ€»ç»“ï¼šç”±çº¢é»‘æ ‘å®ç°ï¼Œå…¶å†…éƒ¨å…ƒç´ ä¾æ®å…¶å€¼è‡ªåŠ¨æ’åºï¼Œæ¯ä¸ªå…ƒç´ å€¼åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œä¸å…è®¸é‡å¤ï¼Œä¸”æ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”ç”¨å…¶ä»–åºåˆ—å®¹å™¨é«˜ã€‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯</strong></p><p>é€‚ç”¨äºç»å¸¸æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨æŸé›†åˆä¸­ä¸”éœ€è¦æ’åºçš„åœºæ™¯ã€‚</p><p><strong>ä¾‹å­</strong></p><p>ä¸‹é¢çš„ä¾‹å­æ¼”ç¤º setï¼ˆé›†åˆï¼‰çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; setTemp;</span><br><span class="line"></span><br><span class="line">setTemp.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line">setTemp.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">setTemp.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">setTemp.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::iterator it;</span><br><span class="line"><span class="keyword">for</span> (it = setTemp.<span class="built_in">begin</span>(); it != setTemp.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š1 2 3ã€‚ä¸€å…±æ’å…¥äº† 4 ä¸ªæ•°ï¼Œä½†æ˜¯é›†åˆä¸­åªæœ‰ 3 ä¸ªæ•°å¹¶ä¸”æ˜¯æœ‰åºçš„ï¼Œå¯è§ä¹‹å‰è¯´è¿‡çš„ set é›†åˆçš„ä¸¤ä¸ªç‰¹ç‚¹ï¼Œæœ‰åºå’Œä¸é‡å¤ã€‚</p><p>å½“ set é›†åˆä¸­çš„å…ƒç´ ä¸ºç»“æ„ä½“æ—¶ï¼Œè¯¥ç»“æ„ä½“å¿…é¡»å®ç°è¿ç®—ç¬¦ â€˜&lt;â€™ çš„é‡è½½ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">People</span></span><br><span class="line">&#123;</span><br><span class="line">string name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> People p) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> age &lt; p.age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;People&gt; setTemp;</span><br><span class="line"></span><br><span class="line">setTemp.<span class="built_in">insert</span>(&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="number">14</span>&#125;);</span><br><span class="line">setTemp.<span class="built_in">insert</span>(&#123; <span class="string">&quot;æå››&quot;</span>, <span class="number">16</span> &#125;);</span><br><span class="line">setTemp.<span class="built_in">insert</span>(&#123; <span class="string">&quot;éš”å£è€ç‹&quot;</span>, <span class="number">10</span> &#125;);</span><br><span class="line"></span><br><span class="line">set&lt;People&gt;::iterator it;</span><br><span class="line"><span class="keyword">for</span> (it = setTemp.<span class="built_in">begin</span>(); it != setTemp.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;å§“åï¼š%s å¹´é¾„ï¼š%d\n&quot;</span>, (*it).name.<span class="built_in">c_str</span>(), (*it).age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="comment">å§“åï¼šç‹äºŒéº»å­ å¹´é¾„ï¼š10</span></span><br><span class="line"><span class="comment">å§“åï¼šå¼ ä¸‰ å¹´é¾„ï¼š14</span></span><br><span class="line"><span class="comment">å§“åï¼šæå›› å¹´é¾„ï¼š16 </span></span><br><span class="line"><span class="comment">*/</span> </span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ç»“æœæ˜¯æŒ‰ç…§å¹´é¾„ç”±å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ã€‚å¦å¤– string è¦ä½¿ç”¨<code>c_str()</code>è½¬æ¢ä¸€ä¸‹ï¼Œå¦åˆ™æ‰“å°å‡ºçš„æ˜¯ä¹±ç ã€‚</p><p>å¦å¤– Multiset å’Œ set ç›¸åŒï¼Œåªä¸è¿‡å®ƒå…è®¸é‡å¤å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´ multiset å¯åŒ…æ‹¬å¤šä¸ªæ•°å€¼ç›¸åŒçš„å…ƒç´ ã€‚è¿™é‡Œä¸å†åšè¿‡å¤šä»‹ç»ã€‚</p><h4 id="2-5-map"><a href="#2-5-map" class="headerlink" title="2.5 map"></a>2.5 map</h4><p>map ç”±çº¢é»‘æ ‘å®ç°ï¼Œå…¶å…ƒç´ éƒ½æ˜¯ â€œé”®å€¼&#x2F;å®å€¼â€ æ‰€å½¢æˆçš„ä¸€ä¸ªå¯¹ç»„ï¼ˆkey&#x2F;value pairs)ã€‚</p><p>map ä¸»è¦ç”¨äºèµ„æ–™ä¸€å¯¹ä¸€æ˜ å°„çš„æƒ…å†µï¼Œmap å†…éƒ¨è‡ªå»ºä¸€é¢—çº¢é»‘æ ‘ï¼Œè¿™é¢—æ ‘å…·æœ‰å¯¹æ•°æ®è‡ªåŠ¨æ’åºçš„åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨ map å†…éƒ¨æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯æœ‰åºçš„ã€‚æ¯”å¦‚ä¸€ä¸ªç­çº§ä¸­ï¼Œæ¯ä¸ªå­¦ç”Ÿçš„å­¦å·è·Ÿä»–çš„å§“åå°±å­˜åœ¨ç€ä¸€å¯¹ä¸€æ˜ å°„çš„å…³ç³»ã€‚</p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªé”®ï¼Œä¸”åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œä¸å…è®¸é‡å¤ã€‚</li><li>æ ¹æ® key å€¼å¿«é€ŸæŸ¥æ‰¾è®°å½•ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦åŸºæœ¬æ˜¯ O(logN)ï¼Œå¦‚æœæœ‰ 1000 ä¸ªè®°å½•ï¼ŒäºŒåˆ†æŸ¥æ‰¾æœ€å¤šæŸ¥æ‰¾ 10æ¬¡(1024)ã€‚ï¼ˆä¼˜ç‚¹ï¼‰</li><li>æ¯æ¬¡æ’å…¥å€¼çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è°ƒæ•´çº¢é»‘æ ‘ï¼Œæ•ˆç‡æœ‰ä¸€å®šå½±å“ã€‚ï¼ˆç¼ºç‚¹ï¼‰</li><li>å¢åŠ å’Œåˆ é™¤èŠ‚ç‚¹å¯¹è¿­ä»£å™¨çš„å½±å“å¾ˆå°ï¼Œé™¤äº†é‚£ä¸ªæ“ä½œèŠ‚ç‚¹ï¼Œå¯¹å…¶ä»–çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ï¼ˆä¼˜ç‚¹ï¼‰</li><li>å¯¹äºè¿­ä»£å™¨æ¥è¯´ï¼Œå¯ä»¥ä¿®æ”¹å®å€¼ï¼Œè€Œä¸èƒ½ä¿®æ”¹ keyã€‚</li><li>æ€»ç»“ï¼šå…ƒç´ ä¸ºé”®å€¼å¯¹ï¼Œkey å’Œ value å¯ä»¥æ˜¯ä»»æ„ä½ éœ€è¦çš„ç±»å‹ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªé”®ï¼Œä¸”åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œä¸å…è®¸é‡å¤ï¼Œæ ¹æ® key å¿«é€ŸæŸ¥æ‰¾è®°å½•ã€‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯</strong></p><p>é€‚ç”¨äºéœ€è¦å­˜å‚¨ä¸€ä¸ªæ•°æ®å­—å…¸ï¼Œå¹¶è¦æ±‚æ–¹ä¾¿åœ°æ ¹æ®keyæ‰¾valueçš„åœºæ™¯ã€‚</p><p><strong>ä¾‹å­</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, string&gt; mapTemp;</span><br><span class="line"></span><br><span class="line">mapTemp.<span class="built_in">insert</span>(&#123; <span class="number">5</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span> &#125;);</span><br><span class="line">mapTemp.<span class="built_in">insert</span>(&#123; <span class="number">3</span>, <span class="string">&quot;æå››&quot;</span>&#125;);</span><br><span class="line">mapTemp.<span class="built_in">insert</span>(&#123; <span class="number">4</span>, <span class="string">&quot;éš”å£è€ç‹&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, string&gt;::iterator it;</span><br><span class="line"><span class="keyword">for</span> (it = mapTemp.<span class="built_in">begin</span>(); it != mapTemp.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;å­¦å·ï¼š%d å§“åï¼š%s\n&quot;</span>, (*it).first, (*it).second.<span class="built_in">c_str</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¾“å‡ºç»“æœï¼š</span></span><br><span class="line"><span class="comment">å­¦å·ï¼š3 å§“åï¼šæå››</span></span><br><span class="line"><span class="comment">å­¦å·ï¼š4 å§“åï¼šéš”å£è€ç‹</span></span><br><span class="line"><span class="comment">å­¦å·ï¼š5 å§“åï¼šå¼ ä¸‰</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>multimap å’Œ map ç›¸åŒï¼Œä½†å…è®¸é‡å¤å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´ multimap å¯åŒ…å«å¤šä¸ªé”®å€¼ï¼ˆkeyï¼‰ç›¸åŒçš„å…ƒç´ ã€‚è¿™é‡Œä¸å†åšè¿‡å¤šä»‹ç»ã€‚</p><h4 id="2-6-å®¹å™¨é…æ¥å™¨"><a href="#2-6-å®¹å™¨é…æ¥å™¨" class="headerlink" title="2.6 å®¹å™¨é…æ¥å™¨"></a>2.6 å®¹å™¨é…æ¥å™¨</h4><p>é™¤äº†ä»¥ä¸Šä¸ƒä¸ªåŸºæœ¬å®¹å™¨ç±»åˆ«ï¼Œä¸ºæ»¡è¶³ç‰¹æ®Šéœ€æ±‚ï¼ŒSTLè¿˜æä¾›äº†ä¸€äº›ç‰¹åˆ«çš„ï¼ˆå¹¶ä¸”é¢„å…ˆå®šä¹‰å¥½çš„ï¼‰å®¹å™¨é…æ¥å™¨ï¼Œæ ¹æ®åŸºæœ¬å®¹å™¨ç±»åˆ«å®ç°è€Œæˆã€‚åŒ…æ‹¬ï¼š</p><p><strong>1ã€stack</strong></p><p>åå­—è¯´æ˜äº†ä¸€åˆ‡ï¼Œstack å®¹å™¨å¯¹å…ƒç´ é‡‡å– LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰çš„ç®¡ç†ç­–ç•¥ã€‚</p><p><strong>2ã€queue</strong></p><p>queue å®¹å™¨å¯¹å…ƒç´ é‡‡å– FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰çš„ç®¡ç†ç­–ç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯ä¸ªæ™®é€šçš„ç¼“å†²åŒºï¼ˆbufferï¼‰ã€‚</p><p><strong>3ã€priority_queue</strong></p><p>priority_queue å®¹å™¨ä¸­çš„å…ƒç´ å¯ä»¥æ‹¥æœ‰ä¸åŒçš„ä¼˜å…ˆæƒã€‚æ‰€è°“ä¼˜å…ˆæƒï¼Œä¹ƒæ˜¯åŸºäºç¨‹åºå‘˜æä¾›çš„æ’åºå‡†åˆ™ï¼ˆç¼ºçœä½¿ç”¨ operatorsï¼‰è€Œå®šä¹‰ã€‚Priority queue çš„æ•ˆæœç›¸å½“äºè¿™æ ·ä¸€ä¸ª bufferï¼šâ€œä¸‹ä¸€å…ƒç´ æ°¸è¿œæ˜¯queueä¸­ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ â€ã€‚å¦‚æœåŒæ—¶æœ‰å¤šä¸ªå…ƒç´ å…·å¤‡æœ€é«™ä¼˜å…ˆæƒï¼Œåˆ™å…¶æ¬¡åºæ— æ˜ç¡®å®šä¹‰ã€‚</p><p><a href="https://www.cnblogs.com/linuxAndMcu/p/10254542.html#_labelTop">å›åˆ°é¡¶éƒ¨</a></p><h3 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h3><p><strong>å„å®¹å™¨çš„ç‰¹ç‚¹æ€»ç»“</strong></p><ul><li>vector æ”¯æŒéšæœºè®¿é—®ï¼Œåœ¨å¤´éƒ¨å’Œä¸­é—´æ’å…¥æˆ–åˆ é™¤æ•ˆç‡ä½ï¼Œä½†åœ¨å°¾éƒ¨æ’å…¥æˆ–åˆ é™¤æ•ˆç‡é«˜ã€‚</li><li>æ”¯æŒéšæœºè®¿é—®ï¼Œä½†æ•ˆç‡æ²¡æœ‰ vector é«˜ï¼Œåœ¨å¤´éƒ¨å’Œå°¾éƒ¨æ’å…¥æˆ–åˆ é™¤æ•ˆç‡é«˜ï¼Œä½†åœ¨ä¸­é—´æ’å…¥æˆ–åˆ é™¤æ•ˆç‡ä½ã€‚</li><li>list ä¸æ”¯æŒéšæœºè®¿é—®ï¼Œåœ¨ä»»æ„ä½ç½®çš„æ’å…¥å’Œåˆ é™¤æ•ˆç‡éƒ½è¾ƒé«˜ã€‚</li><li>set ç”±çº¢é»‘æ ‘å®ç°ï¼Œå…¶å†…éƒ¨å…ƒç´ ä¾æ®å…¶å€¼è‡ªåŠ¨æ’åºï¼Œæ¯ä¸ªå…ƒç´ å€¼åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œä¸å…è®¸é‡å¤ï¼Œä¸”æ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”ç”¨å…¶ä»–åºåˆ—å®¹å™¨é«˜ã€‚</li><li>map çš„å…ƒç´ ä¸ºé”®å€¼å¯¹ï¼Œkey å’Œ value å¯ä»¥æ˜¯ä»»æ„ä½ éœ€è¦çš„ç±»å‹ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªé”®ï¼Œä¸”åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œä¸å…è®¸é‡å¤ï¼Œæ ¹æ® key å¿«é€ŸæŸ¥æ‰¾è®°å½•ã€‚</li></ul><p>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œåˆ°åº•é€‰æ‹©è¿™å‡ ç§å®¹å™¨ä¸­çš„å“ªä¸€ä¸ªï¼Œåº”è¯¥æ ¹æ®éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p><p>1ã€å¦‚æœéœ€è¦é«˜æ•ˆçš„éšæœºè®¿é—®ï¼Œä¸åœ¨ä¹æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡ï¼Œä½¿ç”¨ vectorã€‚ 2ã€å¦‚æœéœ€è¦éšæœºè®¿é—®ï¼Œå¹¶ä¸”å…³å¿ƒä¸¤ç«¯æ•°æ®çš„æ’å…¥å’Œåˆ é™¤æ•ˆç‡ï¼Œä½¿ç”¨ dequeã€‚ 3ã€å¦‚æœéœ€è¦å¤§é‡çš„æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œä¸å…³å¿ƒéšæœºè®¿é—®çš„æ•ˆç‡ï¼Œä½¿ç”¨ listã€‚ 4ã€å¦‚æœç»å¸¸æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨æŸé›†åˆä¸­ä¸”éœ€è¦æ’åºï¼Œå”¯ä¸€å­˜åœ¨çš„æƒ…å†µä½¿ç”¨ setï¼Œä¸å”¯ä¸€å­˜åœ¨çš„æƒ…å†µä½¿ç”¨ multisetã€‚ 5ã€å¦‚æœæ‰“ç®—å­˜å‚¨æ•°æ®å­—å…¸ï¼Œå¹¶ä¸”è¦æ±‚æ–¹ä¾¿åœ°æ ¹æ® key æ‰¾åˆ° valueï¼Œä¸€å¯¹ä¸€çš„æƒ…å†µä½¿ç”¨ mapï¼Œä¸€å¯¹å¤šçš„æƒ…å†µä½¿ç”¨ multimapã€‚ </p><p><strong>å„å®¹å™¨çš„æ—¶é—´å¤æ‚åº¦åˆ†æ</strong></p><ul><li>vector åœ¨å¤´éƒ¨å’Œä¸­é—´ä½ç½®æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œåœ¨å°¾éƒ¨æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œéšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼›</li><li>deque åœ¨ä¸­é—´ä½ç½®æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œåœ¨å¤´éƒ¨å’Œå°¾éƒ¨æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œéšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼›</li><li>list åœ¨ä»»æ„ä½ç½®æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸º O(1)ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼›</li><li>set å’Œ map éƒ½æ˜¯é€šè¿‡çº¢é»‘æ ‘å®ç°ï¼Œå› æ­¤æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(log N)ã€‚</li></ul><p><strong>å„å®¹å™¨çš„å…±æ€§</strong></p><p>å„å®¹å™¨ä¸€èˆ¬æ¥è¯´éƒ½æœ‰ä¸‹åˆ—å‡½æ•°ï¼šé»˜è®¤æ„é€ å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€empty()ã€max_size()ã€size()ã€operator&#x3D;ã€operator&lt;ã€operator&lt;&#x3D;ã€operator&gt;ã€operator&gt;&#x3D;ã€operator&#x3D;&#x3D;ã€operator!&#x3D;ã€swap()ã€‚</p><p>é¡ºåºå®¹å™¨å’Œå…³è”å®¹å™¨éƒ½å…±æœ‰ä¸‹åˆ—å‡½æ•°ï¼š</p><ul><li><code>begin()</code> ï¼šè¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨æŒ‡é’ˆï¼›</li><li><code>end()</code>ï¼šè¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ åé¢ä¸€ä½çš„è¿­ä»£å™¨æŒ‡é’ˆï¼›</li><li><code>rbegin()</code>ï¼šè¿”å›ä¸€ä¸ªé€†å‘è¿­ä»£å™¨æŒ‡é’ˆï¼ŒæŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ï¼›</li><li><code>rend()</code>ï¼šè¿”å›ä¸€ä¸ªé€†å‘è¿­ä»£å™¨æŒ‡é’ˆï¼ŒæŒ‡å‘å®¹å™¨é¦–ä¸ªå…ƒç´ å‰é¢ä¸€ä½ï¼›</li><li><code>clear()</code>ï¼šåˆ é™¤å®¹å™¨ä¸­çš„æ‰€æœ‰çš„å…ƒç´ ï¼›</li><li><code>erase(it)</code>ï¼šåˆ é™¤è¿­ä»£å™¨æŒ‡é’ˆitå¤„å…ƒç´ ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ¨¡æ¿&quot;&gt;&lt;a href=&quot;#æ¨¡æ¿&quot; class=&quot;headerlink&quot; title=&quot;æ¨¡æ¿&quot;&gt;&lt;/a&gt;æ¨¡æ¿&lt;/h2&gt;&lt;h4 id=&quot;å‡½æ•°æ¨¡æ¿çš„æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#å‡½æ•°æ¨¡æ¿çš„æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°æ¨¡æ¿çš„æ¦‚å¿µ&quot;&gt;&lt;/</summary>
      
    
    
    
    <category term="C++" scheme="https://5m10v3.github.io/categories/C/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>C++å­¦ä¹ (äºŒ)-ç»§æ‰¿ä¸å¤šæ€</title>
    <link href="https://5m10v3.github.io/2024/04/22/C++%E5%AD%A6%E4%B9%A0(%E4%BA%8C)-%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81/"/>
    <id>https://5m10v3.github.io/2024/04/22/C++%E5%AD%A6%E4%B9%A0(%E4%BA%8C)-%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81/</id>
    <published>2024-04-21T16:00:00.000Z</published>
    <updated>2024-06-09T09:15:05.430Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p><img src="/../image/649.png" class="lazyload" data-srcset="/../image/649.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="649"></p><p>æˆ‘ä»¬å‘ç°ï¼Œå®šä¹‰è¿™äº›ç±»æ—¶ï¼Œä¸‹çº§åˆ«çš„æˆå‘˜é™¤äº†æ‹¥æœ‰ä¸Šä¸€çº§çš„å…±æ€§ï¼Œè¿˜æœ‰è‡ªå·±çš„ç‰¹æ€§ã€‚</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘åˆ©ç”¨ç»§æ‰¿çš„æŠ€æœ¯ï¼Œå‡å°‘é‡å¤ä»£ç </p><h3 id="ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•"><a href="#ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•"></a>ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•</h3><p>ä¾‹å¦‚æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¸­ï¼Œéƒ½æœ‰å…¬å…±çš„å¤´éƒ¨ï¼Œå…¬å…±çš„åº•éƒ¨ï¼Œç”šè‡³å…¬å…±çš„å·¦ä¾§åˆ—è¡¨ï¼Œåªæœ‰ä¸­å¿ƒå†…å®¹ä¸åŒ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œç»§æ‰¿çš„å†™æ³•æ¥å®ç°ç½‘é¡µä¸­çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹ç»§æ‰¿å­˜åœ¨çš„æ„ä¹‰ä»¥åŠå¥½å¤„</p><p><strong>æ™®é€šå®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šå®ç°ç•Œé¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Javaé¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Java</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...(å…¬å…±å¤´éƒ¨)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Javaã€Pythonã€C++...ï¼ˆå…¬å…±åˆ—è¡¨ä¿¡æ¯ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Javaå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pythoné¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Python</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...(å…¬å…±å¤´éƒ¨)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Javaã€Pythonã€C++...ï¼ˆå…¬å…±åˆ—è¡¨ä¿¡æ¯ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// C++é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPP</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...(å…¬å…±å¤´éƒ¨)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Javaã€Pythonã€C++...ï¼ˆå…¬å…±åˆ—è¡¨ä¿¡æ¯ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;C++ å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Java ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Java ja;</span><br><span class="line">    ja.<span class="built_in">header</span>();</span><br><span class="line">    ja.<span class="built_in">footer</span>();</span><br><span class="line">    ja.<span class="built_in">left</span>();</span><br><span class="line">    ja.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Python ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Python py;</span><br><span class="line">    py.<span class="built_in">header</span>();</span><br><span class="line">    py.<span class="built_in">footer</span>();</span><br><span class="line">    py.<span class="built_in">left</span>();</span><br><span class="line">    py.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;C++ ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    CPP Cpp;</span><br><span class="line">    Cpp.<span class="built_in">header</span>();</span><br><span class="line">    Cpp.<span class="built_in">footer</span>();</span><br><span class="line">    Cpp.<span class="built_in">left</span>();</span><br><span class="line">    Cpp.<span class="built_in">content</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»§æ‰¿å®ç°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿å®ç°é¡µé¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¬å…±é¡µé¢ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasePage</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...(å…¬å…±å¤´éƒ¨)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Javaã€Pythonã€C++...ï¼ˆå…¬å…±åˆ—è¡¨ä¿¡æ¯ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿çš„å¥½å¤„ï¼šå‡å°‘é‡å¤ä»£ç </span></span><br><span class="line"><span class="comment">// è¯­æ³•ï¼šclass å­ç±» : ç»§æ‰¿æ–¹å¼ çˆ¶ç±»</span></span><br><span class="line"><span class="comment">// å­ç±»  ä¹Ÿç§°ä¸º  æ´¾ç”Ÿç±»</span></span><br><span class="line"><span class="comment">// çˆ¶ç±»  ä¹Ÿç§°ä¸º  åŸºç±»</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Java é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Java</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Java å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Python é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Python</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Python å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// C++ é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPP</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;C++ å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Java ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Java ja;</span><br><span class="line">    ja.<span class="built_in">header</span>();</span><br><span class="line">    ja.<span class="built_in">footer</span>();</span><br><span class="line">    ja.<span class="built_in">left</span>();</span><br><span class="line">    ja.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Python ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Python py;</span><br><span class="line">    py.<span class="built_in">header</span>();</span><br><span class="line">    py.<span class="built_in">footer</span>();</span><br><span class="line">    py.<span class="built_in">left</span>();</span><br><span class="line">    py.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;C++ ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    CPP Cpp;</span><br><span class="line">    Cpp.<span class="built_in">header</span>();</span><br><span class="line">    Cpp.<span class="built_in">footer</span>();</span><br><span class="line">    Cpp.<span class="built_in">left</span>();</span><br><span class="line">    Cpp.<span class="built_in">content</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>ç»§æ‰¿çš„å¥½å¤„ï¼šå¯ä»¥å‡å°‘é‡å¤çš„ä»£ç </p><p>class A : public B;</p><p>A ç±»ç§°ä¸ºå­ç±» æˆ– æ´¾ç”Ÿç±»</p><p>B ç±»ç§°ä¸ºçˆ¶ç±» æˆ– åŸºç±»</p><p><strong>æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜ï¼ŒåŒ…å«ä¸¤å¤§éƒ¨åˆ†</strong>ï¼š</p><p>ä¸€ç±»æ˜¯ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„ï¼Œä¸€ç±»æ˜¯è‡ªå·±å¢åŠ çš„æˆå‘˜ã€‚</p><p>ä»åŸºç±»ç»§æ‰¿è¿‡è¿‡æ¥çš„è¡¨ç°å…¶å…±æ€§ï¼Œè€Œæ–°å¢çš„æˆå‘˜ä½“ç°äº†å…¶ä¸ªæ€§ã€‚</p><h3 id="ç»§æ‰¿æ–¹å¼"><a href="#ç»§æ‰¿æ–¹å¼" class="headerlink" title="ç»§æ‰¿æ–¹å¼"></a>ç»§æ‰¿æ–¹å¼</h3><p>ç»§æ‰¿çš„è¯­æ³•ï¼š<code>class å­ç±» : ç»§æ‰¿æ–¹å¼ çˆ¶ç±»</code></p><p><strong>ç»§æ‰¿æ–¹å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š</strong></p><ul><li>å…¬å…±ç»§æ‰¿</li><li>ä¿æŠ¤ç»§æ‰¿</li><li>ç§æœ‰ç»§æ‰¿</li></ul><p><img src="/../image/650.png" class="lazyload" data-srcset="/../image/650.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="650"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> m_B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_C;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¬å…±ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base1</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        m_A = <span class="number">10</span>; <span class="comment">// çˆ¶ç±»ä¸­çš„å…¬å…±æƒé™æˆå‘˜ åˆ°å­ç±»ä¸­ä¾ç„¶æ˜¯å…¬å…±æƒé™æˆå‘˜</span></span><br><span class="line">        m_B = <span class="number">20</span>; <span class="comment">// çˆ¶ç±»ä¸­çš„ä¿æŠ¤æƒé™æˆå‘˜ åˆ°å­ç±»ä¸­ä¾ç„¶æ˜¯ä¿æŠ¤æƒé™æˆå‘˜</span></span><br><span class="line">        <span class="comment">// m_C = 10; // çˆ¶ç±»ä¸­çš„ç§æœ‰æƒé™æˆå‘˜  å­ç±»è®¿é—®ä¸åˆ°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Son s1;</span><br><span class="line">    s1.m_A = <span class="number">100</span>;</span><br><span class="line">    <span class="comment">// s1.m_B = 100; // åˆ°äº† Son1 ä¸­ m_B æ˜¯ä¿æŠ¤æƒé™ ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿æŠ¤ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> m_B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son2</span> : <span class="keyword">protected</span> Base2</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        m_A = <span class="number">100</span>; <span class="comment">// çˆ¶ç±»ä¸­å…¬å…±æˆå‘˜ï¼Œåˆ°å­ç±»ä¸­å˜æˆä¿æŠ¤æˆå‘˜</span></span><br><span class="line">        m_B = <span class="number">100</span>; <span class="comment">// çˆ¶ç±»ä¸­ä¿æŠ¤æˆå‘˜ï¼Œåˆ°å­ç±»ä¸­å˜æˆä¿æŠ¤æˆå‘˜</span></span><br><span class="line">        <span class="comment">// m_C = 100; // çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ å­ç±»è®¿é—®ä¸åˆ°  </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Son2 s1;</span><br><span class="line">    <span class="comment">// s1.m_A = 1000; // åœ¨ Son2 ä¸­ m_Aå˜ä¸ºä¿æŠ¤æƒé™ï¼Œå› æ­¤ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line">    <span class="comment">// s1.m_B = 1000; // åœ¨ Son2 ä¸­ m_Bå˜ä¸ºä¿æŠ¤æƒé™ï¼Œå› æ­¤ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§æœ‰ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base3</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> m_B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son3</span> : <span class="keyword">private</span> Base3</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        m_A = <span class="number">100</span>; <span class="comment">// çˆ¶ç±»ä¸­å…¬å…±æˆå‘˜ï¼Œåˆ°å­ç±»ä¸­å˜æˆç§æœ‰æˆå‘˜</span></span><br><span class="line">        m_B = <span class="number">100</span>; <span class="comment">// çˆ¶ç±»ä¸­ä¿æŠ¤æˆå‘˜ï¼Œåˆ°å­ç±»ä¸­å˜æˆç§æœ‰æˆå‘˜</span></span><br><span class="line">        <span class="comment">// m_C = 100; // çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ï¼Œå­ç±»è®¿é—®ä¸åˆ°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Son3 s1;</span><br><span class="line">    <span class="comment">// s1.m_A = 1000; // åˆ° Sno3 ä¸­ å˜æˆç§æœ‰æˆå‘˜ ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line">    <span class="comment">// s1.m_B = 1000; // åˆ° Sno3 ä¸­ å˜æˆç§æœ‰æˆå‘˜ ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandSon3</span> : <span class="keyword">public</span> Son3</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// m_A = 1000; // åˆ°äº† Son3 ä¸­ m_A å˜ä¸ºäº†ç§æœ‰ï¼Œå³ä½¿æ˜¯å„¿å­ï¼Œä¹Ÿæ˜¯è®¿é—®ä¸åˆ°çš„</span></span><br><span class="line">        <span class="comment">// m_B = 1000; // åˆ°äº† Son3 ä¸­ m_A å˜ä¸ºäº†ç§æœ‰ï¼Œå³ä½¿æ˜¯å„¿å­ï¼Œä¹Ÿæ˜¯è®¿é—®ä¸åˆ°çš„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹"><a href="#ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹" class="headerlink" title="ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹"></a>ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹</h3><p><strong>é—®é¢˜ï¼š</strong>ä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ï¼Œå“ªäº›å±äºå­ç±»å¯¹è±¡ä¸­ï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> m_B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_D;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ©ç”¨å¼€å‘äººå‘˜å‘½ä»¤æç¤ºå·¥å…·æŸ¥çœ‹å¯¹è±¡æ¨¡å‹</span></span><br><span class="line"><span class="comment">// æŸ¥çœ‹å‘½ä»¤</span></span><br><span class="line"><span class="comment">// cl /d1 reportSingleClassLayoutç±»å &quot;æ–‡ä»¶å.cpp&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 16</span></span><br><span class="line">    <span class="comment">// çˆ¶ç±»ä¸­æ‰€æœ‰éé™æ€æˆå‘˜å±æ€§éƒ½ä¼šè¢«å­ç±»ç»§æ‰¿ä¸‹å»</span></span><br><span class="line">    <span class="comment">// çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜å±æ€§ æ˜¯è¢«ç¼–è¯‘å™¨éšè—äº†ï¼Œå› æ­¤è®¿é—®ä¸åˆ°ï¼Œä½†æ˜¯ç¡®å®è¢«ç»§æ‰¿ä¸‹å»äº†</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(Son) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“è®ºï¼š çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ä¹Ÿæ˜¯è¢«å­ç±»ç»§æ‰¿ä¸‹å»äº†ï¼Œåªæ˜¯ç”±ç¼–è¯‘å™¨ç»™éšè—åè®¿é—®ä¸åˆ°</p><h3 id="ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº"><a href="#ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº" class="headerlink" title="ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº"></a>ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº</h3><p>å­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</p><p>é—®é¢˜ï¼šçˆ¶ç±»å’Œå­ç±»çš„æ„é€ å’Œææ„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿ä¸­çš„æ„é€ å’Œææ„çš„é¡ºåº</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Base æ„é€ å‡½æ•°&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Base</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Base ææ„å‡½æ•°&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Son</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Son æ„é€ å‡½æ•°&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Son</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Son ææ„å‡½æ•°&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Base b;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»§æ‰¿ä¸­çš„æ„é€ å’Œææ„é¡ºåºå¦‚ä¸‹ï¼š</span></span><br><span class="line">    <span class="comment">// å…ˆæ„é€ çˆ¶ç±»ï¼Œå†æ„é€ å­ç±»ï¼Œææ„çš„é¡ºåºä¸æ„é€ çš„é¡ºåºç›¸å</span></span><br><span class="line">    Son s;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</p><h3 id="ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼"><a href="#ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼" class="headerlink" title="ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼"></a>ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼</h3><p>é—®é¢˜ï¼šå½“å­ç±»ä¸çˆ¶ç±»å‡ºç°åŒåçš„æˆå‘˜ï¼Œå¦‚ä½•é€šè¿‡å­ç±»å¯¹è±¡ï¼Œè®¿é—®åˆ°å­ç±»æˆ–çˆ¶ç±»ä¸­åŒåçš„æ•°æ®å‘¢ï¼Ÿ</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜ ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜ éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿ä¸­åŒåæˆå‘˜å¤„ç†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_A = <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Base - func() è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Base - func(int a) è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Son</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_A = <span class="number">200</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Son - func() è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒåæˆå‘˜å˜é‡å¤„ç†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Son s;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// å¦‚æœé€šè¿‡å­ç±»å¯¹è±¡ è®¿é—®åˆ°çˆ¶ç±»ä¸­åŒåæˆå‘˜ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒåæˆå‘˜å‡½æ•°å¤„ç†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Son s;</span><br><span class="line"></span><br><span class="line">    s.<span class="built_in">func</span>(); <span class="comment">// ç›´æ¥è°ƒç”¨ è°ƒç”¨çš„æ˜¯å­ç±»ä¸­çš„åŒåæˆå‘˜</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚ä½•è°ƒç”¨çˆ¶ç±»ä¸­çš„åŒåæˆå‘˜å‡½æ•°ï¼Ÿ</span></span><br><span class="line">    s.Base::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå­ç±»ä¸­å‡ºç°å’Œçˆ¶ç±»åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»çš„åŒåå‡½æ•°ä¼šéšè—æ‰çˆ¶ç±»ä¸­æ‰€æœ‰çš„åŒåå‡½æ•°</span></span><br><span class="line">    <span class="comment">// å¦‚æœæƒ³è®¿é—®åˆ°çˆ¶ç±»ä¸­è¢«éšè—çš„åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸ</span></span><br><span class="line">    s.Base::<span class="built_in">func</span>(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// test01();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ol><li>å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®åˆ°å­ç±»ä¸­åŒåæˆå‘˜</li><li>å­ç±»å¯¹è±¡åŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»åŒåæˆå‘˜</li><li>å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­åŒåæˆå‘˜å‡½æ•°ï¼ŒåŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»ä¸­åŒåå‡½æ•°</li></ol><h3 id="ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼"><a href="#ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼" class="headerlink" title="ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼"></a>ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼</h3><p>é—®é¢˜ï¼šç»§æ‰¿ä¸­åŒåçš„é™æ€æˆå‘˜åœ¨å­ç±»å¯¹è±¡ä¸Šå¦‚ä½•è¿›è¡Œè®¿é—®ï¼Ÿ</p><p>é™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜å‡ºç°åŒåï¼Œå¤„ç†æ–¹å¼ä¸€è‡´</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜ ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜ éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿ä¸­çš„åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç‰¹ç‚¹</span></span><br><span class="line">    <span class="comment">// 1ã€ç¼–è¯‘æœŸé—´åˆ†é…å†…å­˜</span></span><br><span class="line">    <span class="comment">// 2ã€æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</span></span><br><span class="line">    <span class="comment">// 3ã€ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> m_A;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Base - static void func() çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Base - static void func(int a) çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Base::m_A = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    </span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> m_A;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Son - static void func() çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Son::m_A = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒåé™æ€æˆå‘˜å±æ€§</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€é€šè¿‡å¯¹è±¡è®¿é—®</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Son s;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Son ä¸‹ m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2ã€é€šè¿‡ç±»åè®¿é—®</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Son ä¸‹ m_A = &quot;</span> &lt;&lt; Son::m_A &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ª :: ä»£è¡¨é€šè¿‡ç±»åæ–¹å¼è®¿é—®  ç¬¬äºŒä¸ª :: è¡¨ç¤ºè®¿é—®çˆ¶ç±»ä½œç”¨åŸŸ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; Son::Base::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒåé™æ€æˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€é€šè¿‡å¯¹è±¡è®¿é—®</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Son s;</span><br><span class="line">    s.<span class="built_in">func</span>();</span><br><span class="line">    s.Base::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2ã€é€šè¿‡ç±»åè®¿é—®</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">    Son::<span class="built_in">func</span>();</span><br><span class="line">    Son::Base::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­ç±»å‡ºç°å’Œçˆ¶ç±»åŒåé™æ€æˆå‘˜å‡½æ•°ï¼Œä¹Ÿä¼šéšè—çˆ¶ç±»ä¸­çš„æ‰€ç”¨åŒåæˆå‘˜å‡½æ•°</span></span><br><span class="line">    <span class="comment">// å¦‚æœæƒ³è®¿é—®çˆ¶ç±»ä¸­è¢«éšè—åŒåæˆå‘˜ï¼Œå¿…é¡»åŠ ä½œç”¨åŸŸ</span></span><br><span class="line">    Son::Base::<span class="built_in">func</span>(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// test01();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šåŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼å’Œéé™æ€å¤„ç†æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡æœ‰ä¸¤ç§è®¿é—®çš„æ–¹å¼ï¼ˆé€šè¿‡å¯¹è±¡ å’Œ é€šè¿‡ç±»åï¼‰</p><h3 id="å¤šç»§æ‰¿è¯­æ³•"><a href="#å¤šç»§æ‰¿è¯­æ³•" class="headerlink" title="å¤šç»§æ‰¿è¯­æ³•"></a>å¤šç»§æ‰¿è¯­æ³•</h3><p>C++å…è®¸<strong>ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªç±»</strong></p><p>è¯­æ³•ï¼š<code>class å­ç±» ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œ ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2...</code></p><p>å¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­æœ‰åŒåæˆå‘˜å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸåŒºåˆ†</p><p><strong>C++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šç»§æ‰¿è¯­æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Base1</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_A = <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Base2</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_A = <span class="number">200</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»  éœ€è¦ç»§æ‰¿ Base1 å’Œ Base2 </span></span><br><span class="line"><span class="comment">// è¯­æ³•ï¼š class å­ç±» : ç»§æ‰¿æ–¹æ³• çˆ¶ç±», ç»§æ‰¿æ–¹æ³• çˆ¶ç±» ...</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base1, <span class="keyword">public</span> Base2</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Son</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_C = <span class="number">300</span>;</span><br><span class="line">        m_D = <span class="number">400</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_C;</span><br><span class="line">    <span class="type">int</span> m_D;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Son s;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Son sizeof = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(Son) &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// å½“çˆ¶ç±»ä¸­å‡ºç°åŒåæˆå‘˜ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Base1::m_A = &quot;</span> &lt;&lt; s.Base1::m_A &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Base2::m_A = &quot;</span> &lt;&lt; s.Base2::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è±å½¢ç»§æ‰¿"><a href="#è±å½¢ç»§æ‰¿" class="headerlink" title="è±å½¢ç»§æ‰¿"></a>è±å½¢ç»§æ‰¿</h3><p><strong>è±å½¢ç»§æ‰¿æ¦‚å¿µï¼š</strong></p><p> ä¸¤ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿åŒä¸€ä¸ªåŸºç±»</p><p> åˆæœ‰æŸä¸ªç±»åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ´¾ç”Ÿç±»</p><p> è¿™ç§ç»§æ‰¿è¢«ç§°ä¸ºè±å½¢ç»§æ‰¿ï¼Œæˆ–è€…é’»çŸ³ç»§æ‰¿</p><p><strong>å…¸å‹çš„è±å½¢ç»§æ‰¿æ¡ˆä¾‹ï¼š</strong></p><p><img src="/../image/651.png" class="lazyload" data-srcset="/../image/651.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="651"></p><p><strong>è±å½¢ç»§æ‰¿é—®é¢˜ï¼š</strong></p><ol><li><pre><code class="undefined">ç¾Šç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œé©¼åŒæ ·ç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œå½“è‰æ³¥é©¬ä½¿ç”¨æ•°æ®æ—¶ï¼Œå°±ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```undefined</span><br><span class="line">   è‰æ³¥é©¬ç»§æ‰¿è‡ªåŠ¨ç‰©çš„æ•°æ®ç»§æ‰¿äº†ä¸¤ä»½ï¼Œå…¶å®æˆ‘ä»¬åº”è¯¥æ¸…æ¥šï¼Œè¿™ä»½æ•°æ®æˆ‘ä»¬åªéœ€è¦ä¸€ä»½å°±å¯ä»¥ã€‚</span><br></pre></td></tr></table></figure></code></pre></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨ç‰©ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ©ç”¨è™šç»§æ‰¿ è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜</span></span><br><span class="line"><span class="comment">// åœ¨ç»§æ‰¿ä¹‹å‰ åŠ ä¸Šå…³é”®å­— virtual å˜æˆä¸ºè™šç»§æ‰¿</span></span><br><span class="line"><span class="comment">// Animal ç±»ç§°ä¸º è™šåŸºç±»</span></span><br><span class="line"><span class="comment">// ç¾Šç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sheep</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éª†é©¼ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tuo</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¾Šé©¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SheepTuo</span> : <span class="keyword">public</span> Sheep, <span class="keyword">public</span> Tuo</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SheepTuo st;</span><br><span class="line"></span><br><span class="line">    st.Sheep::m_Age = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">    st.Tuo::m_Age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  å½“è±å½¢ç»§æ‰¿ï¼Œä¸¤ä¸ªçˆ¶ç±»æ‹¥æœ‰ç›¸åŒæ•°æ®ï¼Œéœ€è¦åŠ ä»¥ä½œç”¨åŸŸ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;st.Sheep::m_Age = &quot;</span> &lt;&lt; st.Sheep::m_Age &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;st.Tuo::m_Age = &quot;</span> &lt;&lt; st.Tuo::m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;st.m_Age = &quot;</span> &lt;&lt; st.m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™ä»½æ•°æ®æˆ‘ä»¬çŸ¥é“ï¼Œåªè¦ä¸€ä»½å°±å¯ä»¥äº†ï¼Œè±å½¢ç»§æ‰¿å¯¼è‡´æ•°æ®æœ‰ä¸¤ä»½ï¼Œèµ„æºæµªè´¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2><p>å¤šæ€åˆ†ä¸ºä¸¤ç±»</p><ul><li>é™æ€å¤šæ€: å‡½æ•°é‡è½½ å’Œ è¿ç®—ç¬¦é‡è½½å±äºé™æ€å¤šæ€ï¼Œå¤ç”¨å‡½æ•°å</li><li>åŠ¨æ€å¤šæ€: æ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€</li></ul><p>é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€åŒºåˆ«ï¼š</p><ul><li>é™æ€å¤šæ€çš„å‡½æ•°åœ°å€æ—©ç»‘å®š - ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li><li>åŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š - è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šæ€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨ç‰©ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// è™šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ¨ç‰©è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çŒ«ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// é‡å†™  å‡½æ•°è¿”å›å€¼ç±»å‹  å‡½æ•°å å‡½æ•°åˆ—è¡¨ å®Œå…¨ç›¸åŒ</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°çŒ«åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‹—ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°ç‹—åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œè¯´è¯çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">// åœ°å€æ—©ç»‘å®š  åœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</span></span><br><span class="line"><span class="comment">// å¦‚æœæƒ³æ‰§è¡Œè®©çŒ«è¯´è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°åœ°å€å°±ä¸èƒ½æå‰ç»‘å®šï¼Œéœ€è¦åœ¨è¿è¡Œé˜¶æ®µç»‘å®šï¼Œåœ°å€æ™šç»‘å®š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨æ€å¤šæ€æ»¡è¶³æ¡ä»¶</span></span><br><span class="line"><span class="comment">// 1ã€æœ‰ç»§æ‰¿å…³ç³»</span></span><br><span class="line"><span class="comment">// 2ã€å­ç±»é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨æ€å¤šæ€ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// çˆ¶ç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ æŒ‡å‘å­ç±»å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSpeak</span><span class="params">(Animal* animal)</span> <span class="comment">// Animal &amp;animal = cat;</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">animal-&gt;<span class="built_in">speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Cat cat;</span><br><span class="line"><span class="built_in">doSpeak</span>(&amp;cat);</span><br><span class="line"></span><br><span class="line">Dog dog;</span><br><span class="line"><span class="built_in">doSpeak</span>(&amp;dog);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¤šæ€æ»¡è¶³æ¡ä»¶</p><ul><li>æœ‰ç»§æ‰¿å…³ç³»</li><li>å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</li></ul><p>å¤šæ€ä½¿ç”¨æ¡ä»¶</p><ul><li>çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</li></ul><p>é‡å†™ï¼šå‡½æ•°è¿”å›å€¼ç±»å‹ å‡½æ•°å å‚æ•°åˆ—è¡¨ å®Œå…¨ä¸€è‡´ç§°ä¸ºé‡å†™</p><h3 id="åŠ¨æ€å¤šæ€â€”â€”è™šå‡½æ•°"><a href="#åŠ¨æ€å¤šæ€â€”â€”è™šå‡½æ•°" class="headerlink" title="åŠ¨æ€å¤šæ€â€”â€”è™šå‡½æ•°"></a>åŠ¨æ€å¤šæ€â€”â€”è™šå‡½æ•°</h3><p>è™šå‡½æ•°çš„äº§ç”Ÿï¼Œå…¶å®æ˜¯å› ä¸ºä¸Šé¢æåˆ°çš„ï¼ŒæŒ‡é’ˆå±…ç„¶å¯ä»¥æŒ‡å‘ä¸åŒäºæŒ‡é’ˆç±»å‹çš„ç±»å‹ã€‚è¿™å°±ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘å°±æƒ³ç”¨åŸºç±»æŒ‡é’ˆæŒ‡å‘çš„æ´¾ç”Ÿå¯¹è±¡çš„æ´¾ç”Ÿå‡½æ•°ï¼Œé‚£å’‹åŠå˜›ã€‚</p><p>äºæ˜¯ï¼Œè™šå‡½æ•°ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰ä¼šæ ¹æ®å…¶æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡æ˜¯åŸºç±»è¿˜æ˜¯æ´¾ç”Ÿç±»ï¼Œæ¥è¿›è¡Œå¯¹åº”çš„é‡è½½ã€‚è¿™ä¹Ÿæ­£æ˜¯åŠ¨æ€é‡è½½çš„å®šä¹‰â€”â€”åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå†è¿›è¡Œé‡è½½ã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼Œç°æœ‰ <code>ShoppingCard</code> ä¸å…¶æ´¾ç”Ÿç±» <code>MemberCard</code>ï¼Œæƒ³å¯¹ä¸€ä¸ª <code>ShoppingCard</code> å®ç°è™šå‡½æ•°ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. çˆ¶ç±»æˆå‘˜å‡½æ•°åŠ  virtual</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShoppingCard</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">consume</span><span class="params">(<span class="type">float</span> money)</span></span>; <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. æ´¾ç”Ÿç±»å‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼å®Œå…¨ä¸€è‡´</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MemberCard</span>: <span class="keyword">public</span> ShoppingCard</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">consume</span><span class="params">(<span class="type">float</span> money)</span></span>; <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. å¯¹æ´¾ç”Ÿç±»çš„å¯¹è±¡ä½¿ç”¨åŸºç±»çš„å¼•ç”¨/æŒ‡é’ˆ</span></span><br><span class="line">ShoppingCard * card = <span class="keyword">new</span> MemberCard;</span><br><span class="line">MemberCard.<span class="built_in">consume</span>(<span class="number">1.0</span>);</span><br></pre></td></tr></table></figure><p>æ³¨æ„è™šå‡½æ•°æœ‰æ¡ä»¶ï¼šä»–ä¸èƒ½ä¸ºä»¥ä¸‹å‡½æ•°ä¹‹ä¸€ï¼š</p><ul><li>é™æ€æˆå‘˜å‡½æ•°</li><li>å…¨å±€å‡½æ•°</li><li>å‹å…ƒå‡½æ•°</li></ul><h3 id="è™šå‡½æ•°çš„å®ç°"><a href="#è™šå‡½æ•°çš„å®ç°" class="headerlink" title="è™šå‡½æ•°çš„å®ç°"></a>è™šå‡½æ•°çš„å®ç°</h3><p>è¯¥éƒ¨åˆ†ä¸éš¾ï¼Œä¸è¿‡ä»…ä½œäº†è§£ã€‚</p><p>ç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯ä¸¤å¥è¯ï¼š</p><ol><li>ç¼–è¯‘æ—¶ï¼Œæ¯ä¸ªå®šä¹‰äº†è™šå‡½æ•°çš„ç±»ä¼šæœ‰å…¶å¯¹åº”çš„ <strong>è™šå‡½æ•°è¡¨</strong> VTABLEï¼Œå­˜æœ‰è¯¥ç±»ä¸­ã€‚ï¼ˆæ´¾ç”Ÿç±»çš„å­˜åœ¨æ´¾ç”Ÿç±»é‡Œï¼‰</li><li>åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæ¯ä¸ªå¯¹è±¡ä¼šè·å¾—æŒ‡å‘å…¶<strong>å¯¹åº”çš„ VTABLE</strong> çš„æŒ‡é’ˆã€‚</li></ol><h3 id="è™šæ„é€ å‡½æ•°å’Œææ„å‡½æ•°"><a href="#è™šæ„é€ å‡½æ•°å’Œææ„å‡½æ•°" class="headerlink" title="è™šæ„é€ å‡½æ•°å’Œææ„å‡½æ•°"></a>è™šæ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h3><p>è™šæ„é€ å‡½æ•°æ˜¯ä¸å­˜åœ¨çš„ã€‚è¯¥é—®é¢˜ç­‰ä»·äº <code>å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹</code>ã€‚ï¼ˆæƒ³æƒ³ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼‰</p><p>è€Œè™šææ„å‡½æ•°å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå…¶æœ¬è´¨å’Œå…¶ä»–è™šå‡½æ•°æ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»"><a href="#çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»" class="headerlink" title="çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»"></a>çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»</h3><p>åœ¨å¤šæ€ä¸­ï¼Œé€šå¸¸çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å®ç°æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œä¸»è¦éƒ½æ˜¯è°ƒç”¨å­ç±»é‡å†™çš„å†…å®¹</p><p>å› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸º<strong>çº¯è™šå‡½æ•°</strong></p><p>çº¯è™šå‡½æ•°è¯­æ³•ï¼š<code>virtual è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰= 0 ;</code></p><p>å½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ä¹Ÿç§°ä¸ºæŠ½è±¡ç±»</p><p><strong>æŠ½è±¡ç±»ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li><li>å­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¯è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">// åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ç§°ä¸ºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment">// æŠ½è±¡ç±»ç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">// 1ã€æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line"><span class="comment">// 2ã€æŠ½è±¡ç±»çš„å­ç±»  å¿…é¡»è¦é‡æ–°çˆ¶ç±»ä¸­çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;funcå‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// Base b; // æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line"><span class="comment">// new Base; // æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">Son s; <span class="comment">// å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">Base* base = <span class="keyword">new</span> Son;</span><br><span class="line">base-&gt;<span class="built_in">func</span>();</span><br><span class="line"><span class="comment">// è®°å¾—é”€æ¯</span></span><br><span class="line"><span class="keyword">delete</span> base;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è™šææ„å’Œçº¯è™šææ„"><a href="#è™šææ„å’Œçº¯è™šææ„" class="headerlink" title="è™šææ„å’Œçº¯è™šææ„"></a>è™šææ„å’Œçº¯è™šææ„</h3><p>å¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å±æ€§å¼€è¾Ÿåˆ°å †åŒºï¼Œé‚£ä¹ˆçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç </p><p>è§£å†³æ–¹å¼ï¼šå°†çˆ¶ç±»ä¸­çš„ææ„å‡½æ•°æ”¹ä¸º<strong>è™šææ„</strong>æˆ–è€…<strong>çº¯è™šææ„</strong></p><p>è™šææ„å’Œçº¯è™šææ„å…±æ€§ï¼š</p><ul><li>å¯ä»¥è§£å†³çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</li><li>éƒ½éœ€è¦æœ‰å…·ä½“çš„å‡½æ•°å®ç°</li></ul><p>è™šææ„å’Œçº¯è™šææ„åŒºåˆ«ï¼š</p><ul><li>å¦‚æœæ˜¯çº¯è™šææ„ï¼Œè¯¥ç±»å±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li></ul><p>è™šææ„è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtual ~ç±»å()&#123;&#125;</span><br></pre></td></tr></table></figure><p>çº¯è™šææ„è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">virtual ~ç±»å() = 0;</span><br><span class="line">ç±»å::~ç±»å()&#123;&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è™šææ„å’Œçº¯è™šææ„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Animal</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Animal æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ©ç”¨è™šææ„å¯ä»¥è§£å†³ çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡æ—¶ä¸å¹²å‡€çš„é—®é¢˜</span></span><br><span class="line"><span class="comment">//virtual ~Animal()</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;Animal è™šææ„å‡½æ•°è°ƒç”¨&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¯è™šææ„  éœ€è¦å£°æ˜ä¹Ÿéœ€è¦å®ç°</span></span><br><span class="line"><span class="comment">// æœ‰äº†çº¯è™šææ„ä¹‹åï¼Œè¿™ä¸ªç±»ä¹Ÿå±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¯è™šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Animal::~<span class="built_in">Animal</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Animal çº¯è™šææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Cat</span>(string name)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Cat æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">m_Name = <span class="keyword">new</span> <span class="built_in">string</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Cat</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (m_Name != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Cat ææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> m_Name;</span><br><span class="line">m_Name = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; *m_Name &lt;&lt; <span class="string">&quot;å°çŒ«åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string* m_Name;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Animal* animal = <span class="keyword">new</span> <span class="built_in">Cat</span>(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">animal-&gt;<span class="built_in">speak</span>();</span><br><span class="line"><span class="comment">// çˆ¶ç±»æŒ‡é’ˆåœ¨ææ„æ—¶å€™ ä¸ä¼šè°ƒç”¨å­ç±»ä¸­ææ„å‡½æ•°ï¼Œå¯¼è‡´å­ç±»å¦‚æœæœ‰å †åŒºå±æ€§ï¼Œå‡ºç°å†…å­˜æ³„æ¼</span></span><br><span class="line"><span class="keyword">delete</span> animal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ol><li><p>è™šææ„æˆ–çº¯è™šææ„å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</p></li><li><p>å¦‚æœå­ç±»ä¸­æ²¡æœ‰å †åŒºæ•°æ®ï¼Œå¯ä»¥ä¸å†™ä¸ºè™šææ„æˆ–çº¯è™šææ„</p></li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">3.</span> æ‹¥æœ‰çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿå±äºæŠ½è±¡ç±»</span><br></pre></td></tr></table></figure><h3 id="å¤šæ€çš„æ„ä¹‰"><a href="#å¤šæ€çš„æ„ä¹‰" class="headerlink" title="å¤šæ€çš„æ„ä¹‰"></a>å¤šæ€çš„æ„ä¹‰</h3><p>è¯´äº†é‚£ä¹ˆå¤šï¼Œé‚£åŠ¨æ€å¤šæ€æœ‰ä»€ä¹ˆç”¨å˜›ï¼Œè¿˜æå¾—å¥½å¤æ‚ï¼Œç”šè‡³è¿˜å¯èƒ½å‡ºç°æ¼æ´ã€‚</p><p>äºæ˜¯æˆ‘å»çŸ¥ä¹æœäº†ä¸€ä¸‹ï¼š</p><blockquote><p>é¦–å…ˆéœ€è¦æ˜ç¡®å¤šæ€æ€§çš„ç”¨é€”ï¼Œæ˜¯ä¸ºäº†<strong>æ¥å£çš„æœ€å¤§ç¨‹åº¦å¤ç”¨</strong>ï¼Œä»¥åŠå…¶å®šä¹‰ï¼š</p><p>å¤šæ€æ€§çš„å®šä¹‰ï¼Œå¯ä»¥ç®€å•åœ°æ¦‚æ‹¬ä¸ºâ€œ<strong>ä¸€ä¸ªæ¥å£ï¼Œå¤šç§æ–¹æ³•</strong>â€ï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶æ‰å†³å®šè°ƒç”¨çš„å‡½æ•°ï¼Œå®ƒæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹é¢†åŸŸçš„æ ¸å¿ƒæ¦‚å¿µã€‚å¤šæ€(polymorphism)ï¼Œå­—é¢æ„æ€å¤šç§å½¢çŠ¶ã€‚å¤šæ€åˆ†ä¸ºé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€ã€‚<br>é™æ€å¤šæ€æ˜¯é€šè¿‡é‡è½½å’Œæ¨¡æ¿æŠ€æœ¯å®ç°ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ç¡®å®šã€‚<br>åŠ¨æ€å¤šæ€é€šè¿‡è™šå‡½æ•°å’Œç»§æ‰¿å…³ç³»æ¥å®ç°ï¼Œæ‰§è¡ŒåŠ¨æ€ç»‘å®šï¼Œåœ¨è¿è¡Œçš„æ—¶å€™ç¡®å®šã€‚ â€”â€”<a href="https://zhuanlan.zhihu.com/p/47057750">https://zhuanlan.zhihu.com/p/47057750</a></p></blockquote><p>é™æ€å¤šæ€èƒ½å®ç°æ¥å£çš„å¾ˆå¤§ç¨‹åº¦çš„å¤ç”¨ï¼Œè€ŒåŠ¨æ€å¤šæ€å°±å¯ä»¥æœ€å¤§åŒ–å¤ç”¨çš„ç¨‹åº¦å§ã€‚</p><blockquote><p>2020.1.6 æ›´æ–°ï¼šåœ¨å†™äº†ä¸€ä¸ªå¤§å®éªŒä»¥åï¼Œæˆ‘å‘ç°äº†åŠ¨æ€å¤šæ€åœ¨å®æˆ˜ä¸­çš„ç”¨é€”ã€‚</p></blockquote><p>ç®€å•çš„æ¥è¯´ï¼Œç°åœ¨æœ‰ <code>class A</code> ä¸ºåŸºç±»ï¼Œå…¶æœ‰æ´¾ç”Ÿç±» <code>A1</code>ã€<code>A2</code>ã€<code>A3</code> ç­‰ã€‚æˆ‘ä»¬å®šä¹‰ <code>std::vector&lt;A*&gt;</code>ï¼Œé‡Œé¢çš„æŒ‡é’ˆå¯èƒ½æŒ‡å‘ <code>A1</code>ã€<code>A2</code>ã€<code>A3</code>ã€‚</p><p>ä½¿ç”¨åŠ¨æ€å¤šæ€çš„è¯ï¼Œå¯ä»¥å®ç°ï¼šå°†<strong>å¤šä¸ªä¸åŒçš„æ´¾ç”Ÿç±» <code>Ai</code> è£…åœ¨ä¸€ä¸ªé›†åˆä¸­</strong>ï¼Œä½†æ˜¯è°ƒç”¨çš„æ—¶å€™å´æ˜¯<strong>è°ƒç”¨ <code>Ai</code> å„è‡ªæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°</strong>ã€‚</p><p>é™æ€å¤šæ€åˆ™åšä¸åˆ°ï¼Œåœ¨ <code>Ai</code> è½¬ä¸º <code>A</code> çš„ä¸€ç¬é—´ï¼Œä»–å°±å¤±å»äº†ä»–çš„æ´¾ç”Ÿæˆå‘˜ã€‚å¦‚ä¸‹ç¨‹åºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;A&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A1</span> : <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;A1&quot;</span> &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span> <span class="comment">//å°è¯•é™æ€å¤šæ€</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">A a;</span><br><span class="line">A1 a1;</span><br><span class="line">vector&lt;A&gt; vA;</span><br><span class="line">vA.<span class="built_in">push_back</span>(a);</span><br><span class="line">vA.<span class="built_in">push_back</span>(a1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i : vA)</span><br><span class="line">i.<span class="built_in">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test2</span><span class="params">()</span> <span class="comment">//åŠ¨æ€å¤šæ€</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">A * a = <span class="keyword">new</span> A;</span><br><span class="line">A1 * a1 = <span class="keyword">new</span> A1;</span><br><span class="line">vector&lt;A*&gt; vA;</span><br><span class="line">vA.<span class="built_in">push_back</span>(a);</span><br><span class="line">vA.<span class="built_in">push_back</span>(a1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i : vA)</span><br><span class="line">i-&gt;<span class="built_in">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">test1</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test2</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/652.png" class="lazyload" data-srcset="/../image/652.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="652"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç»§æ‰¿&quot;&gt;&lt;a href=&quot;#ç»§æ‰¿&quot; class=&quot;headerlink&quot; title=&quot;ç»§æ‰¿&quot;&gt;&lt;/a&gt;ç»§æ‰¿&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/../image/649.png&quot; class=&quot;lazyload&quot; data-srcset=&quot;/../image/6</summary>
      
    
    
    
    <category term="C++" scheme="https://5m10v3.github.io/categories/C/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>C++å­¦ä¹ (ä¸€)-ç±»ä¸é‡è½½</title>
    <link href="https://5m10v3.github.io/2024/04/21/C++%E5%AD%A6%E4%B9%A0(%E4%B8%80)-%E7%B1%BB%E4%B8%8E%E9%87%8D%E8%BD%BD/"/>
    <id>https://5m10v3.github.io/2024/04/21/C++%E5%AD%A6%E4%B9%A0(%E4%B8%80)-%E7%B1%BB%E4%B8%8E%E9%87%8D%E8%BD%BD/</id>
    <published>2024-04-20T16:00:00.000Z</published>
    <updated>2024-06-09T09:15:16.435Z</updated>
    
    <content type="html"><![CDATA[<h2 id="newæ“ä½œç¬¦"><a href="#newæ“ä½œç¬¦" class="headerlink" title="newæ“ä½œç¬¦"></a>newæ“ä½œç¬¦</h2><h3 id="ä½¿ç”¨-new-è¿ç®—ç¬¦-åˆ†é…å†…å­˜-å¹¶-åˆå§‹åŒ–"><a href="#ä½¿ç”¨-new-è¿ç®—ç¬¦-åˆ†é…å†…å­˜-å¹¶-åˆå§‹åŒ–" class="headerlink" title="ä½¿ç”¨ new è¿ç®—ç¬¦ åˆ†é…å†…å­˜ å¹¶ åˆå§‹åŒ–"></a>ä½¿ç”¨ new è¿ç®—ç¬¦ åˆ†é…å†…å­˜ å¹¶ åˆå§‹åŒ–</h3><p>1.åˆ†é…å†…å­˜åˆå§‹åŒ–æ ‡é‡ç±»å‹ï¼ˆå¦‚ int æˆ– doubleï¼‰ï¼Œåœ¨ç±»å‹åååŠ åˆå§‹å€¼ï¼Œå¹¶ç”¨å°æ‹¬å·æ‹¬èµ·ï¼ŒC++11ä¸­ä¹Ÿæ”¯æŒå¤§æ‹¬å·ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int * pi = new int (6); </span><br><span class="line">double * pd = new double (9.99); </span><br><span class="line">//C++11ä¸­, æ”¯æŒä»¥ä¸‹å†™æ³•</span><br><span class="line">int * pi = new int &#123;6&#125;; </span><br><span class="line">double * pd = new double &#123;9.99&#125;;</span><br></pre></td></tr></table></figure><p>2.åˆå§‹åŒ–ç»“æ„æˆ–æ•°ç»„ï¼Œéœ€è¦ä½¿ç”¨å¤§æ‹¬å·åˆ—è¡¨åˆå§‹åŒ– ï¼Œéœ€ç¼–è¯‘å™¨ <strong>æ”¯æŒ C++11</strong>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">struct where&#123;double x; double y; double z;&#125;;</span><br><span class="line">where * one = new where &#123;1.2, 2.2, 3.2&#125;;</span><br><span class="line">int * ar = new int [4] &#123;1, 2, 3, 4&#125;;</span><br></pre></td></tr></table></figure><p>3.ä½¿ç”¨ delete é‡Šæ”¾ newåˆ†é…çš„å†…å­˜ ï¼ˆä»…é™äºå¸¸è§„ new åˆ†é…çš„ å †å†…å­˜ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">delete pi;</span><br><span class="line">delete pd;</span><br><span class="line">delete one;</span><br><span class="line">// é‡Šæ”¾æ•°ç»„ è®°ä½ åŠ []</span><br><span class="line">delete [] ar;</span><br></pre></td></tr></table></figure><p>4.åˆ›å»ºç±»å¯¹è±¡</p><p>ï¼ˆ1ï¼‰newåˆ›å»ºå¯¹è±¡ï¼ŒpTestç”¨æ¥æ¥æ”¶å¯¹è±¡æŒ‡é’ˆã€‚newç”³è¯·çš„å¯¹è±¡ï¼Œåˆ™åªæœ‰è°ƒç”¨åˆ°deleteæ—¶æ‰ä¼šæ‰§è¡Œææ„å‡½æ•°ï¼Œå¦‚æœç¨‹åºé€€å‡ºè€Œæ²¡æœ‰æ‰§è¡Œdeleteåˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CTest*  pTest = new  CTest();  delete pTest;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ä¸ç”¨newï¼Œç›´æ¥ä½¿ç”¨ç±»å®šä¹‰ç”³æ˜ï¼Œä½¿ç”¨å®Œåä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ï¼Œè¯¥ç±»ææ„å‡½æ•°ä¼šè‡ªåŠ¨æ‰§è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CTest  mTest;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰ä½¿ç”¨æ™®é€šæ–¹å¼åˆ›å»ºçš„ç±»å¯¹è±¡ï¼Œåœ¨åˆ›å»ºä¹‹åˆå°±å·²ç»åˆ†é…äº†å†…å­˜ç©ºé—´ã€‚è€Œç±»æŒ‡é’ˆï¼Œå¦‚æœæœªç»è¿‡å¯¹è±¡åˆå§‹åŒ–ï¼Œåˆ™ä¸éœ€è¦deleteé‡Šæ”¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CTest*  pTest = NULL;</span><br></pre></td></tr></table></figure><h3 id="new-å¤±è´¥æ—¶å¤„ç†æ–¹å¼"><a href="#new-å¤±è´¥æ—¶å¤„ç†æ–¹å¼" class="headerlink" title="new å¤±è´¥æ—¶å¤„ç†æ–¹å¼"></a>new å¤±è´¥æ—¶å¤„ç†æ–¹å¼</h3><p>1.å¸¸è§„åˆ†é…å†…å­˜ï¼Œè°ƒç”¨æ„é€ å‡½æ•°ã€‚åˆ†é…å¤±è´¥æ—¶ï¼Œ<strong>æŠ›å‡ºå¼‚å¸¸</strong>ã€‚å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>void* operator new(std::size_t) throw(std::bad_alloc);</p><p>void operator delete(void *) throw();</p><p><strong>åˆ†é…å¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸std::bad_allocï¼Œä¸æ˜¯è¿”å›NULLï¼Œæ‰€ä»¥åˆ¤æ–­è¿”å›å€¼æ˜¯å¦ä¸ºNULLæ˜¯æ²¡ç”¨çš„</strong>ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char *p=new char[size]; //åˆ†é…å¤±è´¥ï¼Œä¸æ˜¯è¿”å›NULL</span><br><span class="line"></span><br><span class="line">delete [] p;</span><br></pre></td></tr></table></figure><p>2.<strong>ä¸æŠ›å‡ºå¼‚å¸¸</strong>ã€‚åˆ†é…å¤±è´¥æ—¶ï¼Œè¿”å›NULLã€‚å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>void* operator new(std::size_t,const std::nothrow_t&amp;) throw();</p><p>void operator delete(void*) throw();</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">char *p=new(nothrow) char[size]; //åˆ†é…å¤±è´¥ï¼Œæ˜¯è¿”å›NULL</span><br><span class="line">if(NULL==p)</span><br><span class="line"></span><br><span class="line">cout&lt;&lt;&quot;alloc failure!&quot;&lt;&lt;endl;</span><br></pre></td></tr></table></figure><h3 id="new-è¿ç®—ç¬¦ã€å‡½æ•°å’Œæ›¿æ¢å‡½æ•°"><a href="#new-è¿ç®—ç¬¦ã€å‡½æ•°å’Œæ›¿æ¢å‡½æ•°" class="headerlink" title="new: è¿ç®—ç¬¦ã€å‡½æ•°å’Œæ›¿æ¢å‡½æ•°"></a>new: è¿ç®—ç¬¦ã€å‡½æ•°å’Œæ›¿æ¢å‡½æ•°</h3><p>è¿ç®—ç¬¦new å’Œ new [] åˆ†åˆ«è°ƒç”¨å¦‚ä¸‹å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">void * operator new(std::size_t);//use by new</span><br><span class="line">void * operator new [] (std::size_t);//use by new []</span><br></pre></td></tr></table></figure><p>è¿ç®—ç¬¦delete å’Œ delete [] åˆ†åˆ«è°ƒç”¨å¦‚ä¸‹å‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> * <span class="keyword">operator</span> <span class="title">delete</span><span class="params">(<span class="type">void</span> *)</span></span>;<span class="comment">//use by delete</span></span><br><span class="line"><span class="type">void</span> * <span class="keyword">operator</span> <span class="keyword">delete</span> [](<span class="type">void</span> *);<span class="comment">//use by delete []</span></span><br></pre></td></tr></table></figure><p>è¿™äº›å‡½æ•°ç§°ä¸º <strong>åˆ†é…å‡½æ•°</strong> ï¼Œä½äºå…¨å±€åç§°ç©ºé—´ä¸­ã€‚std::size_t æ˜¯ä¸€ä¸ª typedefã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> * pi = <span class="keyword">new</span> <span class="type">int</span>;</span><br><span class="line"><span class="comment">//å°†è½¬æ¢ä¸ºä¸‹é¢è¿™æ ·</span></span><br><span class="line"><span class="type">int</span> * pi = <span class="built_in">new</span> (<span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> * pi = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">40</span>];</span><br><span class="line"><span class="comment">//å°†è½¬æ¢ä¸ºä¸‹é¢è¿™æ ·</span></span><br><span class="line"><span class="type">int</span> * pi = <span class="built_in">new</span> (<span class="number">40</span> * <span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒæ ·çš„</span></span><br><span class="line"><span class="keyword">delete</span> pi;</span><br><span class="line"><span class="comment">//å°†è½¬æ¢ä¸ºä¸‹é¢è¿™æ ·</span></span><br><span class="line"><span class="built_in">delete</span> (pi);</span><br></pre></td></tr></table></figure><h3 id="å®šä½-placement-new-è¿ç®—ç¬¦"><a href="#å®šä½-placement-new-è¿ç®—ç¬¦" class="headerlink" title="å®šä½ placement new è¿ç®—ç¬¦"></a>å®šä½ placement new è¿ç®—ç¬¦</h3><p>é€šå¸¸ï¼Œnewè´Ÿè´£åœ¨ å † ä¸­åˆ†é…ä¸€ä¸ªè¶³ä»¥æ»¡è¶³è¦æ±‚çš„å†…å­˜å—ï¼Œä½† <strong>å®šä½newå¯ä»¥è®©ç¨‹åºå‘˜æŒ‡å®šè¦ä½¿ç”¨çš„å†…å­˜ä½ç½®</strong>ã€‚ä¸ä¼šå†…å­˜åˆ†é…å¤±è´¥ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸åˆ†é…å†…å­˜ï¼Œåªè°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚å®ƒå…è®¸åœ¨ä¸€å—å·²ç»åˆ†é…æˆåŠŸçš„å†…å­˜ä¸Šé‡æ–°æ„é€ å¯¹è±¡æˆ–å¯¹è±¡æ•°ç»„ã€‚å®šä¹‰å¦‚ä¸‹ï¼š</p><p>void* operator new(size_t,void*);</p><p>void operator delete(void*,void*);</p><p>1.ä½¿ç”¨ å®šä½newè¿ç®—ç¬¦ï¼Œé¦–å…ˆè¦åŒ…å« <strong>å¤´æ–‡ä»¶ new</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;new&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">chaff</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> dross[<span class="number">20</span>];</span><br><span class="line">    <span class="type">int</span> slag;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">char</span> buffer1[<span class="number">50</span>];</span><br><span class="line"><span class="type">char</span> buffer2[<span class="number">200</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    chaff * p1, p2;</span><br><span class="line">    p2 = <span class="built_in">new</span> (buffer1) chaff;<span class="comment">// åœ¨buffer1ä¸­</span></span><br><span class="line">    p2 = <span class="built_in">new</span> (buffer2) <span class="type">int</span>[<span class="number">20</span>]; <span class="comment">// åœ¨buffer2ä¸­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨placement newæ„é€ èµ·æ¥çš„å¯¹è±¡æˆ–æ•°ç»„ï¼Œè¦<strong>æ˜¾å¼è°ƒç”¨å®ƒä»¬çš„ææ„å‡½æ•°</strong>æ¥é”€æ¯ï¼ˆææ„å‡½æ•°å¹¶ä¸é‡Šæ”¾å¯¹è±¡çš„å†…å­˜ï¼‰ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨delete.è¿™æ˜¯å› ä¸ºplacement newæ„é€ èµ·æ¥çš„å¯¹è±¡æˆ–æ•°ç»„å¤§å°å¹¶ä¸ä¸€å®šç­‰äºåŸæ¥åˆ†é…çš„å†…å­˜å¤§å°ï¼Œä½¿ç”¨deleteä¼šé€ æˆå†…å­˜æ³„æ¼æˆ–è€…ä¹‹åé‡Šæ”¾å†…å­˜æ—¶å‡ºç°è¿è¡Œæ—¶é”™è¯¯ã€‚</p><p>3.å½“ä½¿ç”¨newè¿ç®—ç¬¦å®šä¹‰ä¸€ä¸ªå¤šç»´æ•°ç»„å˜é‡æˆ–æ•°ç»„å¯¹è±¡æ—¶ï¼Œå®ƒäº§ç”Ÿä¸€ä¸ªæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œè¿”å›çš„ç±»å‹ä¿æŒäº†é™¤æœ€å·¦è¾¹ç»´æ•°å¤–çš„æ‰€æœ‰ç»´æ•°ã€‚</p><h2 id="c-å¼•ç”¨"><a href="#c-å¼•ç”¨" class="headerlink" title="c++å¼•ç”¨"></a>c++å¼•ç”¨</h2><p>å¼•ç”¨æ˜¯C++çš„æ–°å¢å†…å®¹ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¼šç»å¸¸ä½¿ç”¨ï¼›C++ç”¨çš„å¼•ç”¨å°±å¦‚åŒCè¯­è¨€çš„æŒ‡é’ˆä¸€æ ·é‡è¦ï¼Œä½†å®ƒæ¯”æŒ‡é’ˆæ›´åŠ æ–¹ä¾¿å’Œæ˜“ç”¨ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå‚æ•°çš„ä¼ é€’æœ¬è´¨ä¸Šæ˜¯ä¸€æ¬¡èµ‹å€¼çš„è¿‡ç¨‹ï¼Œå³å°†ä¸€å—å†…å­˜ä¸Šçš„æ•°æ®å¤åˆ¶åˆ°å¦ä¸€å—å†…å­˜ä¸Šã€‚<br>å¯¹äºåƒ charã€boolã€intã€float ç­‰åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œå®ƒä»¬å ç”¨çš„å†…å­˜å¾€å¾€åªæœ‰å‡ ä¸ªå­—èŠ‚ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå†…å­˜æ‹·è´éå¸¸å¿«é€Ÿã€‚è€Œæ•°ç»„ã€ç»“æ„ä½“ã€å¯¹è±¡æ˜¯ä¸€ç³»åˆ—æ•°æ®çš„é›†åˆï¼Œæ•°æ®çš„æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œå¯èƒ½å¾ˆå°‘ï¼Œä¹Ÿå¯èƒ½æˆåƒä¸Šä¸‡ï¼Œå¯¹å®ƒä»¬è¿›è¡Œé¢‘ç¹çš„å†…å­˜æ‹·è´å¯èƒ½ä¼šæ¶ˆè€—å¾ˆå¤šæ—¶é—´ï¼Œæ‹–æ…¢ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚<br>C&#x2F;C++ ç¦æ­¢åœ¨å‡½æ•°è°ƒç”¨æ—¶ç›´æ¥ä¼ é€’æ•°ç»„çš„å†…å®¹ï¼Œè€Œæ˜¯å¼ºåˆ¶ä¼ é€’æ•°ç»„æŒ‡é’ˆã€‚è€Œå¯¹äºç»“æ„ä½“å’Œå¯¹è±¡æ²¡æœ‰è¿™ç§é™åˆ¶ï¼Œè°ƒç”¨å‡½æ•°æ—¶æ—¢å¯ä»¥ä¼ é€’æŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ é€’å†…å®¹ï¼›ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå»ºè®®ä¼ é€’æŒ‡é’ˆã€‚<br>ä½†æ˜¯åœ¨ C++ ä¸­ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ç§æ¯”æŒ‡é’ˆæ›´åŠ ä¾¿æ·çš„ä¼ é€’èšåˆç±»å‹æ•°æ®çš„æ–¹å¼ï¼Œé‚£å°±æ˜¯<strong>å¼•ç”¨ï¼ˆReferenceï¼‰</strong>ã€‚</p><hr><h3 id="ä¸€ï¼Œå¼•ç”¨çš„æ¦‚å¿µ"><a href="#ä¸€ï¼Œå¼•ç”¨çš„æ¦‚å¿µ" class="headerlink" title="ä¸€ï¼Œå¼•ç”¨çš„æ¦‚å¿µ"></a><strong>ä¸€ï¼Œå¼•ç”¨çš„æ¦‚å¿µ</strong></h3><p>å¼•ç”¨ï¼ˆReferenceï¼‰æ˜¯ C++ ç›¸å¯¹äºCè¯­è¨€çš„åˆä¸€ä¸ªæ‰©å……ã€‚å¼•ç”¨å¯ä»¥çœ‹åšæ˜¯æ•°æ®çš„ä¸€ä¸ªåˆ«åï¼Œé€šè¿‡è¿™ä¸ªåˆ«åå’ŒåŸæ¥çš„åå­—éƒ½èƒ½å¤Ÿæ‰¾åˆ°è¿™ä»½æ•°æ®ã€‚å¼•ç”¨ç±»ä¼¼äº Windows ä¸­çš„å¿«æ·æ–¹å¼ï¼Œä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºå¯ä»¥æœ‰å¤šä¸ªå¿«æ·æ–¹å¼ï¼Œé€šè¿‡è¿™äº›å¿«æ·æ–¹å¼å’Œå¯æ‰§è¡Œç¨‹åºæœ¬èº«éƒ½èƒ½å¤Ÿè¿è¡Œç¨‹åºï¼›å¼•ç”¨è¿˜ç±»ä¼¼äºäººçš„ç»°å·ï¼ˆç¬”åï¼‰ï¼Œä½¿ç”¨ç»°å·ï¼ˆç¬”åï¼‰å’Œæœ¬åéƒ½èƒ½è¡¨ç¤ºä¸€ä¸ªäººã€‚<br>å¼•ç”¨çš„å®šä¹‰æ–¹å¼ç±»ä¼¼äºæŒ‡é’ˆï¼Œåªæ˜¯**ç”¨<code>&amp;</code>å–ä»£äº†<code>*</code>**ï¼Œè¯­æ³•æ ¼å¼ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type &amp;name = data;</span><br></pre></td></tr></table></figure><p>type æ˜¯è¢«å¼•ç”¨çš„æ•°æ®çš„ç±»å‹ï¼Œname æ˜¯å¼•ç”¨çš„åç§°ï¼Œdata æ˜¯è¢«å¼•ç”¨çš„æ•°æ®ã€‚å¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„åŒæ—¶åˆå§‹åŒ–ï¼Œå¹¶ä¸”ä»¥åä¹Ÿè¦ä»ä¸€è€Œç»ˆï¼Œä¸èƒ½å†å¼•ç”¨å…¶å®ƒæ•°æ®ï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼äºå¸¸é‡ï¼ˆconst å˜é‡ï¼‰ã€‚</p><p><strong>ä¸‹é¢æ˜¯ä¸€ä¸ªæ¼”ç¤ºå¼•ç”¨çš„å®ä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span>&amp; b = a; <span class="comment">//å¼•ç”¨å®šä¹‰</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;\n&quot;</span> &lt;&lt; <span class="string">&quot;b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;açš„åœ°å€:&quot;</span> &lt;&lt; &amp;a &lt;&lt;<span class="string">&quot;\n&quot;</span> &lt;&lt; <span class="string">&quot;bçš„åœ°å€:&quot;</span> &lt;&lt; &amp;b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/645.png" class="lazyload" data-srcset="/../image/645.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="645"></p><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</strong></p><ul><li>å¼•ç”¨åœ¨å®šä¹‰æ—¶éœ€è¦æ·»åŠ <code>&amp;</code>ï¼Œåœ¨ä½¿ç”¨æ—¶ä¸èƒ½æ·»åŠ <code>&amp;</code>ï¼Œä½¿ç”¨æ—¶æ·»åŠ <code>&amp;</code>è¡¨ç¤ºå–åœ°å€ã€‚</li><li>å¯¹å˜é‡bè¿›è¡Œä¿®æ”¹æ—¶ï¼Œå˜é‡açš„å€¼ä¹Ÿä¼šæ”¹å˜ã€‚</li></ul><h3 id="äºŒï¼Œå¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°ï¼ˆå°†å½¢å‚å’Œå®å‚ç»‘å®šï¼‰"><a href="#äºŒï¼Œå¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°ï¼ˆå°†å½¢å‚å’Œå®å‚ç»‘å®šï¼‰" class="headerlink" title="äºŒï¼Œå¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°ï¼ˆå°†å½¢å‚å’Œå®å‚ç»‘å®šï¼‰"></a><strong>äºŒï¼Œå¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°ï¼ˆå°†å½¢å‚å’Œå®å‚ç»‘å®šï¼‰</strong></h3><p>å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°æ—¶æœ‰ä¸¤ç§åŸå› ï¼š</p><ol><li>åœ¨å‡½æ•°å†…éƒ¨ä¼šå¯¹æ­¤å‚æ•°è¿›è¡Œä¿®æ”¹</li><li>æé«˜å‡½æ•°è°ƒç”¨å’Œè¿è¡Œæ•ˆç‡</li></ol><p><strong>å…³äºç¬¬ä¸€ç‚¹ï¼š</strong></p><p>éƒ½çŸ¥é“C++é‡Œæåˆ°å‡½æ•°å°±ä¼šæåˆ°å½¢å‚å’Œå®å‚ã€‚å‡½æ•°çš„å‚æ•°å®è´¨å°±æ˜¯å½¢å‚ï¼Œä¸è¿‡è¿™ä¸ªå½¢å‚çš„ä½œç”¨åŸŸåªæ˜¯åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®å‚å’Œå½¢å‚æ˜¯ä¸¤ä¸ªä¸åŒçš„ä¸œè¥¿ï¼Œè¦æƒ³å½¢å‚ä»£æ›¿å®å‚ï¼Œè‚¯å®šæœ‰ä¸€ä¸ªå€¼çš„ä¼ é€’ã€‚å‡½æ•°è°ƒç”¨æ—¶ï¼Œå€¼çš„ä¼ é€’æœºåˆ¶æ˜¯é€šè¿‡â€œå½¢å‚&#x3D;å®å‚â€æ¥å¯¹å½¢å‚èµ‹å€¼è¾¾åˆ°ä¼ å€¼ç›®çš„ï¼Œäº§ç”Ÿäº†ä¸€ä¸ªå®å‚çš„å‰¯æœ¬ã€‚<strong>å³ä½¿å‡½æ•°å†…éƒ¨æœ‰å¯¹å‚æ•°çš„ä¿®æ”¹ï¼Œä¹Ÿåªæ˜¯é’ˆå¯¹å½¢å‚ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªå‰¯æœ¬ï¼Œå®å‚ä¸ä¼šæœ‰ä»»ä½•æ›´æ”¹ã€‚</strong>å‡½æ•°ä¸€æ—¦ç»“æŸï¼Œå½¢å‚ç”Ÿå‘½ä¹Ÿå®£å‘Šç»ˆç»“ï¼Œåšå‡ºçš„ä¿®æ”¹ä¸€æ ·æ²¡å¯¹ä»»ä½•å˜é‡äº§ç”Ÿå½±å“ã€‚<br><strong>ä¾‹å¦‚ï¼šï¼ˆå¯¹ä¸¤ä¸ªå˜é‡è¿›è¡Œäº¤æ¢å¤„ç†ã€‚æ­¤å¤„å‡½æ•°çš„å½¢å‚ä¸ºp1, p2ï¼Œæ²¡æœ‰å¼•ç”¨ï¼‰</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">void swap(int p1,int p2)</span><br><span class="line">&#123;</span><br><span class="line">    int temp;</span><br><span class="line">    temp = p1;</span><br><span class="line">    p1 = p2;</span><br><span class="line">    p2 = temp;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a, b;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b; //è¾“å…¥a,bä¸¤å˜é‡çš„å€¼</span><br><span class="line">    swap(a, b);//ç›´æ¥ä»¥å˜é‡aå’Œbä½œä¸ºå®å‚è°ƒç”¨swapå‡½æ•°</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;//è¾“å‡ºç»“æœ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ ä¼šå‘ç°è¾“å‡ºçš„aå’Œbè¿˜æ˜¯ä½ è¾“å…¥çš„å€¼ï¼Œæ²¡æœ‰äº¤æ¢ã€‚</p><p><strong>ä¿®æ”¹ä¸ºï¼šï¼ˆå¯¹ä¸¤ä¸ªå˜é‡è¿›è¡Œäº¤æ¢å¤„ç†ã€‚æ­¤å¤„å‡½æ•°çš„å½¢å‚ä¸ºp1, p2éƒ½æ˜¯å¼•ç”¨ï¼‰</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">void swap(int &amp;p1,int &amp;p2)</span><br><span class="line">&#123;</span><br><span class="line">    int temp;</span><br><span class="line">    temp = p1;</span><br><span class="line">    p1 = p2;</span><br><span class="line">    p2 = temp;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a, b;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b; //è¾“å…¥a,bä¸¤å˜é‡çš„å€¼</span><br><span class="line">    swap(a, b);//ç›´æ¥ä»¥å˜é‡aå’Œbä½œä¸ºå®å‚è°ƒç”¨swapå‡½æ•°</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;//è¾“å‡ºç»“æœ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œï¼Œå°±ä¼šå‘ç°å€¼äº¤æ¢äº†ã€‚</p><p>åŸç†å°±åœ¨äºé‡‡ç”¨&amp;p1å’Œ&amp;p2æ—¶ï¼Œp1å’Œp2æ˜¯å®å‚çš„åˆ«åè€Œå·²ï¼Œåƒä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å®å‚ã€‚æ”¹å˜p1å’Œp2å°±æ˜¯æ”¹å˜å®å‚çš„å€¼ã€‚</p><p><strong>å…³äºç¬¬äºŒç‚¹ï¼š</strong></p><p>å¯ä»¥ç»“åˆç¬¬ä¸€ç‚¹åˆ†æï¼Œp1å’Œp2æ˜¯å®å‚çš„å¼•ç”¨ï¼Œä¸ç”¨ç»è¿‡å€¼çš„ä¼ é€’æœºåˆ¶ï¼Œå·²ç»æœ‰äº†å®å‚å€¼çš„ä¿¡æ¯ã€‚æ‰€ä»¥æ²¡æœ‰äº†ä¼ å€¼å’Œç”Ÿæˆå‰¯æœ¬çš„æ—¶é—´å’Œç©ºé—´æ¶ˆè€—ã€‚å½“ç¨‹åºå¯¹æ•ˆç‡è¦æ±‚æ¯”è¾ƒé«˜æ—¶ï¼Œè¿™æ˜¯éå¸¸å¿…è¦çš„.</p><hr><p> <strong>æ‹“å±•ï¼š</strong></p><p>å‰é¢æ¼”ç¤ºäº†<strong>ç›´æ¥è½¬é€’å‚æ•°</strong>ï¼Œå’Œ<strong>å¼•ç”¨ä¼ å‚</strong>ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ç”¨<strong>ä¼ é€’æŒ‡é’ˆ</strong>æ¥å®ç°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">void swap(int *p1,int *p2)</span><br><span class="line">&#123;</span><br><span class="line">    int temp;</span><br><span class="line">    temp = *p1;</span><br><span class="line">    *p1 = *p2;</span><br><span class="line">    *p2 = temp;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a, b;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b; //è¾“å…¥a,bä¸¤å˜é‡çš„å€¼</span><br><span class="line">    swap(&amp;a, &amp;b);//ç›´æ¥ä»¥åœ°å€ä½œä¸ºå®å‚è°ƒç”¨swapå‡½æ•°</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;//è¾“å‡ºç»“æœ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="ä¸‰ï¼Œå¼•ç”¨ä½œä¸ºå‡½æ•°è¿”å›å€¼"><a href="#ä¸‰ï¼Œå¼•ç”¨ä½œä¸ºå‡½æ•°è¿”å›å€¼" class="headerlink" title="ä¸‰ï¼Œå¼•ç”¨ä½œä¸ºå‡½æ•°è¿”å›å€¼"></a><strong>ä¸‰ï¼Œå¼•ç”¨ä½œä¸ºå‡½æ•°è¿”å›å€¼</strong></h3><p>å¼•ç”¨é™¤äº†å¯ä»¥ä½œä¸ºå‡½æ•°å½¢å‚ï¼Œè¿˜å¯ä»¥ä½œä¸ºå‡½æ•°è¿”å›å€¼ã€‚</p><p><strong>è¯´æ˜ï¼š</strong></p><p>ï¼ˆ1ï¼‰ä»¥å¼•ç”¨è¿”å›å‡½æ•°å€¼ï¼Œå®šä¹‰å‡½æ•°æ—¶éœ€è¦åœ¨å‡½æ•°åå‰åŠ &amp;</p><p>ï¼ˆ2ï¼‰ç”¨å¼•ç”¨è¿”å›ä¸€ä¸ªå‡½æ•°å€¼çš„æœ€å¤§å¥½å¤„æ˜¯ï¼Œåœ¨å†…å­˜ä¸­ä¸äº§ç”Ÿè¢«è¿”å›å€¼çš„å‰¯æœ¬ã€‚</p><p>å½“å‡½æ•°è¿”å›ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œåˆ™è¿”å›ä¸€ä¸ªæŒ‡å‘è¿”å›å€¼çš„éšå¼æŒ‡é’ˆã€‚è¿™æ ·ï¼Œå‡½æ•°å°±å¯ä»¥æ”¾åœ¨èµ‹å€¼è¯­å¥çš„å·¦è¾¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">int function1(int&amp; aa)//ä»¥è¿”å›å€¼çš„æ–¹æ³•è¿”å›å‡½æ•°å€¼</span><br><span class="line">&#123;</span><br><span class="line">    return aa;</span><br><span class="line">&#125;</span><br><span class="line">int&amp; function2(int&amp; aa)//ä»¥å¼•ç”¨æ–¹å¼è¿”å›å‡½æ•°å€¼</span><br><span class="line">&#123;</span><br><span class="line">    return aa;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a = 10;</span><br><span class="line">    //ç¬¬ä¸€ç§æƒ…å†µï¼Œç³»ç»Ÿç”Ÿæˆè¦è¿”å›å€¼çš„å‰¯æœ¬ï¼ˆå³ä¸´æ—¶å˜é‡ï¼‰</span><br><span class="line">   int b = function1(a);//function1()çš„è¿”å›å€¼å…ˆå‚¨å­˜åœ¨ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸­ï¼Œ</span><br><span class="line">                     //ç„¶åå†æŠŠä¸´æ—¶å˜é‡èµ‹å€¼ç»™b</span><br><span class="line">   //ç¬¬äºŒç§æƒ…å†µï¼ŒæŠ¥é”™</span><br><span class="line">   // function1(a) = 20;// function1()çš„è¿”å›å€¼ä¸ºä¸´æ—¶å˜é‡ï¼Œä¸èƒ½èµ‹å€¼ï¼ˆå³ä¸èƒ½ä¸ºå·¦å€¼ï¼‰</span><br><span class="line">   //ç¬¬ä¸‰ç§æƒ…å†µï¼Œç³»ç»Ÿä¸ä¼šç”Ÿæˆè¿”å›å€¼çš„å‰¯æœ¬</span><br><span class="line">    function2(a) = 20;//OK  æ­¤æ—¶açš„å€¼å˜æˆäº†20</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šè‹¥å‡½æ•°çš„è¿”å›å€¼ä¸ºå¼•ç”¨(&amp;)ï¼Œåˆ™ç¼–è¯‘å™¨å°±ä¸ä¸ºè¿”å›å€¼åˆ›å»ºä¸´æ—¶å˜é‡äº†ã€‚ç›´æ¥è¿”å›é‚£ä¸ªå˜é‡çš„å¼•ç”¨ã€‚æ‰€ä»¥åƒä¸‡ä¸è¦è¿”å›ä¸´æ—¶å˜é‡çš„å¼•ç”¨ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">int &amp; function()</span><br><span class="line">&#123;</span><br><span class="line">    int b = 10;</span><br><span class="line">    return b;//ä¸OK ç­‰å‡½æ•°è¿”å›åï¼Œbå°±æ¶ˆå¤±äº†ï¼Œå¼•ç”¨äº†ä¸€ä¸ªæ¶ˆå¤±çš„ä¸œè¥¿</span><br><span class="line">             //ç¨‹åºä¼šæ‡µé€¼çš„ã€‚æŒ‡é’ˆä¹Ÿä¸€æ ·ã€‚</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a;</span><br><span class="line">    a = function();//function()è¿”å›çš„ä¸œè¥¿å·²ç»æ¶ˆå¤±äº†ï¼Œå¼•ç”¨ä¹Ÿå°±ä¸å­˜åœ¨äº†</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h2><p>ä»€ä¹ˆæ˜¯å‡½æ•°é‡è½½å‘¢ï¼Ÿè¿™é‡Œå¼•ç”¨ä¸€æ®µè¯</p><p>å‡½æ•°é‡è½½æ˜¯æŒ‡åœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œå¯ä»¥æœ‰ä¸€ç»„å…·æœ‰ç›¸åŒå‡½æ•°åï¼Œä¸åŒå‚æ•°åˆ—è¡¨çš„å‡½æ•°ï¼Œè¿™ç»„å‡½æ•°è¢«ç§°ä¸ºé‡è½½å‡½æ•°ã€‚é‡è½½å‡½æ•°é€šå¸¸ç”¨æ¥å‘½åä¸€ç»„åŠŸèƒ½ç›¸ä¼¼çš„å‡½æ•°ï¼Œè¿™æ ·åšå‡å°‘äº†å‡½æ•°åçš„æ•°é‡ï¼Œé¿å…äº†åå­—ç©ºé—´çš„æ±¡æŸ“ï¼Œå¯¹äºç¨‹åºçš„å¯è¯»æ€§æœ‰å¾ˆå¤§çš„å¥½å¤„ã€‚</p><blockquote><p>When two or more different declarations are specified for a single name in the same scope, that name is said to <em>overloaded</em>. By extension, two declarations in the same scope that declare the same name but with different types are called <em>overloaded declarations</em>. Only function declarations can be overloaded; object and type declarations cannot be overloaded. â€”â€”æ‘˜è‡ªã€ŠANSI C++ Standard. P290ã€‹</p></blockquote><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;print a integer :&quot;</span> &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(string str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;print a string :&quot;</span> &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">12</span>);</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>*å‡½æ•°é‡è½½çš„è§„åˆ™ï¼š*</strong></em></p><ul><li><strong>å‡½æ•°åç§°å¿…é¡»ç›¸åŒã€‚</strong></li><li><strong>å‚æ•°åˆ—è¡¨å¿…é¡»ä¸åŒï¼ˆä¸ªæ•°ä¸åŒã€ç±»å‹ä¸åŒã€å‚æ•°æ’åˆ—é¡ºåºä¸åŒç­‰ï¼‰ã€‚</strong></li><li><strong>å‡½æ•°çš„è¿”å›ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸ç›¸åŒã€‚</strong></li><li><strong>ä»…ä»…è¿”å›ç±»å‹ä¸åŒä¸è¶³ä»¥æˆä¸ºå‡½æ•°çš„é‡è½½ã€‚</strong></li></ul><h2 id="ç±»å’Œå¯¹è±¡"><a href="#ç±»å’Œå¯¹è±¡" class="headerlink" title="ç±»å’Œå¯¹è±¡"></a>ç±»å’Œå¯¹è±¡</h2><p>C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾:å°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€</p><p>C++è®¤ä¸ºä¸‡äº‹ä¸‡ç‰©çš†ä¸ºå¯¹è±¡ï¼Œå¯¹è±¡ä¸Šæœ‰å…¶å±æ€§å’Œè¡Œä¸º</p><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><p>å°è£…çš„æ„ä¹‰ï¼š</p><ul><li>å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</li><li>å°†å±æ€§å’Œè¡Œä¸ºåŠ ä»¥æƒé™æ§åˆ¶</li></ul><p><strong>å°è£…æ„ä¹‰ä¸€ï¼š</strong></p><p> åœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œå±æ€§å’Œè¡Œä¸ºå†™åœ¨ä¸€èµ·ï¼Œè¡¨ç°äº‹ç‰©</p><p><strong>è¯­æ³•ï¼š</strong> <code>class ç±»å&#123; è®¿é—®æƒé™ï¼š å±æ€§ / è¡Œä¸º &#125;;</code></p><p>ç¤ºä¾‹ä¸€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">double</span> pi = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æƒé™</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">      <span class="comment">//å±æ€§</span></span><br><span class="line">      <span class="type">int</span> m_r; <span class="comment">// åŠå¾„</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">//è¡Œä¸º</span></span><br><span class="line">      <span class="function"><span class="type">double</span> <span class="title">calculateZC</span><span class="params">()</span></span></span><br><span class="line"><span class="function">      </span>&#123;</span><br><span class="line">          <span class="comment">//è·å–åœ†çš„å‘¨é•¿</span></span><br><span class="line">          <span class="keyword">return</span> <span class="number">2</span>*pi*m_r;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Circle c1;</span><br><span class="line">    c1.m_r =<span class="number">10</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;c1çš„å‘¨é•¿:&quot;</span>&lt;&lt;c1.<span class="built_in">calculateZC</span>()&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å°è£…æ„ä¹‰äºŒï¼š</strong></p><p>ç±»åœ¨è®¾è®¡æ—¶ï¼Œå¯ä»¥æŠŠå±æ€§å’Œè¡Œä¸ºæ”¾åœ¨ä¸åŒçš„æƒé™ä¸‹ï¼ŒåŠ ä»¥æ§åˆ¶</p><p>è®¿é—®æƒé™æœ‰ä¸‰ç§ï¼š</p><ol><li>public å…¬å…±æƒé™</li><li>protected ä¿æŠ¤æƒé™</li><li>private ç§æœ‰æƒé™</li></ol><p>private ç§æœ‰æƒé™<br>ç¤ºä¾‹ï¼š</p><pre><code>//ä¸‰ç§æƒé™//å…¬å…±æƒé™  public     ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–å¯ä»¥è®¿é—®//ä¿æŠ¤æƒé™  protected  ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®//ç§æœ‰æƒé™  private    ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®//protectedå’Œprivateçš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨ç»§æ‰¿ä¸Š//ä¾‹å¦‚ï¼šå„¿å­å¯ä»¥è®¿é—®çˆ¶äº²ä¸­protectedçš„å†…å®¹ï¼Œä½†æ˜¯ä¸å¯ä»¥è®¿é—®privateçš„å†…å®¹class Person&#123;    //å§“å  å…¬å…±æƒé™public:    string m_Name;    //æ±½è½¦  ä¿æŠ¤æƒé™protected:    string m_Car;    //é“¶è¡Œå¡å¯†ç   ç§æœ‰æƒé™</code></pre><p>â€‹<br>â€‹private:<br>â€‹int m_Password;<br>â€‹<br>â€‹public:<br>â€‹void func()<br>â€‹{<br>â€‹m_Name &#x3D; â€œå¼ ä¸‰â€;<br>â€‹m_Car &#x3D; â€œæ‹–æ‹‰æœºâ€;<br>â€‹m_Password &#x3D; 123456;<br>â€‹}<br>â€‹};<br>â€‹int main() {<br>â€‹Person p;<br>â€‹p.m_Name &#x3D; â€œæå››â€;<br>â€‹&#x2F;&#x2F;p.m_Car &#x3D; â€œå¥”é©°â€;  &#x2F;&#x2F;ä¿æŠ¤æƒé™ç±»å¤–è®¿é—®ä¸åˆ°<br>â€‹&#x2F;&#x2F;p.m_Password &#x3D; 123; &#x2F;&#x2F;ç§æœ‰æƒé™ç±»å¤–è®¿é—®ä¸åˆ°<br>â€‹<br>â€‹system(â€œpauseâ€);<br>â€‹<br>â€‹return 0;<br>â€‹}</p><p>1.2 structå’ŒclassåŒºåˆ«<br>åœ¨C++ä¸­ structå’Œclasså”¯ä¸€çš„åŒºåˆ«å°±åœ¨äº é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒ</p><p>åŒºåˆ«ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> é»˜è®¤æƒé™ä¸ºå…¬å…±</span><br><span class="line"><span class="keyword">class</span> é»˜è®¤æƒé™ä¸ºç§æœ‰</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span>  m_A; <span class="comment">//é»˜è®¤æ˜¯ç§æœ‰æƒé™</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">C2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> m_A;  <span class="comment">//é»˜è®¤æ˜¯å…¬å…±æƒé™</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">C1 c1;</span><br><span class="line">c1.m_A = <span class="number">10</span>; <span class="comment">//é”™è¯¯ï¼Œè®¿é—®æƒé™æ˜¯ç§æœ‰</span></span><br><span class="line"></span><br><span class="line">C2 c2;</span><br><span class="line">c2.m_A = <span class="number">10</span>; <span class="comment">//æ­£ç¡®ï¼Œè®¿é—®æƒé™æ˜¯å…¬å…±</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.3 æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰<br><strong>ä¼˜ç‚¹1ï¼š</strong>å°†æ‰€æœ‰æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ï¼Œå¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™</p><p><strong>ä¼˜ç‚¹2ï¼š</strong>å¯¹äºå†™æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//å§“åè®¾ç½®å¯è¯»å¯å†™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(string name)</span> </span>&#123;</span><br><span class="line">m_Name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">getName</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è·å–å¹´é¾„ </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®å¹´é¾„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setAge</span><span class="params">(<span class="type">int</span> age)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (age &lt; <span class="number">0</span> || age &gt; <span class="number">150</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä½ ä¸ªè€å¦–ç²¾!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…äººè®¾ç½®ä¸ºåªå†™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setLover</span><span class="params">(string lover)</span> </span>&#123;</span><br><span class="line">m_Lover = lover;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_Name; <span class="comment">//å¯è¯»å¯å†™  å§“å</span></span><br><span class="line"><span class="type">int</span> m_Age; <span class="comment">//åªè¯»  å¹´é¾„</span></span><br><span class="line">    string m_Lover; <span class="comment">//åªå†™  æƒ…äºº</span></span><br><span class="line">&#125;;    </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Person p;</span><br><span class="line"><span class="comment">//å§“åè®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setName</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.<span class="built_in">getName</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹´é¾„è®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setAge</span>(<span class="number">50</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.<span class="built_in">getAge</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…äººè®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setLover</span>(<span class="string">&quot;è‹äº•&quot;</span>);</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;æƒ…äººï¼š &quot; &lt;&lt; p.m_Lover &lt;&lt; endl;  //åªå†™å±æ€§ï¼Œä¸å¯ä»¥è¯»å–</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†"><a href="#å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†" class="headerlink" title="å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†"></a>å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†</h2><h3 id="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°"><a href="#æ„é€ å‡½æ•°å’Œææ„å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°"></a>æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h3><p><strong>æ„é€ å‡½æ•°è¯­æ³•</strong>: ç±»å(){}</p><p>1.æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void</p><p>2.å‡½æ•°åç§°ä¸ç±»åç›¸åŒ</p><p>3.æ„é€ å‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤å¯ä»¥å‘ç”Ÿé‡è½½</p><p>4.ç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ï¼Œè€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</p><p><strong>ææ„å‡½æ•°è¯­æ³•</strong>:~ç±»å(){}</p><p>1.ææ„å‡½æ•°,æ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void</p><p>2.å‡½æ•°åç§°ä¸ç±»åç›¸åŒ,åœ¨åç§°å‰åŠ ä¸Šç¬¦å· ~</p><p>3.ææ„å‡½æ•°ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¸å¯ä»¥å‘ç”Ÿé‡è½½</p><p>4.ç¨‹åºåœ¨å¯¹è±¡é”€æ¯å‰ä¼šè‡ªåŠ¨è°ƒç”¨ææ„ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ï¼Œè€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>();</span><br><span class="line">~<span class="built_in">Person</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">Person::<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personå‡½æ•°çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person::~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personå‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨</p><p>ä¸¤ç§åˆ†ç±»æ–¹å¼</p><ul><li>æŒ‰å‚æ•°åˆ†ä¸º ï¼š æœ‰å‚æ„é€ å’Œæ— å‚æ„é€ </li><li>æŒ‰ç±»å‹åˆ†ä¸º ï¼š æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </li></ul><p>ä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š</p><ul><li>æ‹¬å·æ³•</li><li>æ˜¾ç¤ºæ³•</li><li>éšå¼è½¬æ¢æ³•</li></ul><p>ç¤ºä¾‹:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//1.æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨</span></span><br><span class="line"><span class="comment">//åˆ†ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personå‡½æ•°çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personçš„æœ‰å‚å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personå‡½æ•°çš„æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">age = p.age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„:å®šä¹‰æœ€åˆå§‹çš„æ„é€ å‡½æ•°çš„æ—¶å€™ä¸å¯åŠ ();</p><h3 id="æ‹·è´æ„é€ å‡½æ•°çš„æ—¶æœº"><a href="#æ‹·è´æ„é€ å‡½æ•°çš„æ—¶æœº" class="headerlink" title="æ‹·è´æ„é€ å‡½æ•°çš„æ—¶æœº"></a>æ‹·è´æ„é€ å‡½æ•°çš„æ—¶æœº</h3><p>C++ä¸­æ‹·è´å‡½æ•°è°ƒç”¨æ—¶æœºé€šå¸¸æœ‰ä¸‰ç§æƒ…å†µ</p><ul><li>ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</li><li>å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</li><li>ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</li></ul><p>ç¤ºä¾‹:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personå‡½æ•°çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personçš„æœ‰å‚å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personå‡½æ•°çš„æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">age = p.age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Person p=dWork1;</span><br><span class="line">    cout &lt;&lt;(<span class="type">int</span>*)&amp;p&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Person <span class="title">dWork1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Person p1;</span><br><span class="line">    cout &lt;&lt;(<span class="type">int</span>*)&amp;p1&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test1</span>();</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/646.png" class="lazyload" data-srcset="/../image/646.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="646"></p><p>æˆ‘ä»¬å‘ç°æ˜¯åˆ›é€ äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡</p><h3 id="æ„é€ å‡½æ•°çš„è°ƒç”¨è§„åˆ™"><a href="#æ„é€ å‡½æ•°çš„è°ƒç”¨è§„åˆ™" class="headerlink" title="æ„é€ å‡½æ•°çš„è°ƒç”¨è§„åˆ™"></a>æ„é€ å‡½æ•°çš„è°ƒç”¨è§„åˆ™</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œc++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 3ä¸ªå‡½æ•°</p><p>1.é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>2.é»˜è®¤ææ„å‡½æ•°(æ— å‚,å‡½æ•°ä½“ä¸ºç©º)</p><p>3.é»˜è®¤æ‹·è´æ„é€ å‡½æ•°,å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</p><p>æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™å¦‚ä¸‹:</p><ul><li>å¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸å†æä¾›é»˜è®¤æ— å‚æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ä¼šæä¾›é»˜è®¤æ‹·è´æ„é€ </li><li>å¦‚æœç”¨æˆ·å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œåˆ™c++ä¸å†æä¾›å…¶å®ƒæ„é€ å‡½æ•°</li></ul><h3 id="æ·±æ‹·è´ä¸æµ…æ‹·è´"><a href="#æ·±æ‹·è´ä¸æµ…æ‹·è´" class="headerlink" title="æ·±æ‹·è´ä¸æµ…æ‹·è´"></a>æ·±æ‹·è´ä¸æµ…æ‹·è´</h3><h4 id="æµ…æ‹·è´ï¼ˆshallowCopyï¼‰ï¼š"><a href="#æµ…æ‹·è´ï¼ˆshallowCopyï¼‰ï¼š" class="headerlink" title="æµ…æ‹·è´ï¼ˆshallowCopyï¼‰ï¼š"></a>æµ…æ‹·è´ï¼ˆshallowCopyï¼‰ï¼š</h4><p>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹å’Œç®€å•å¯¹è±¡ï¼Œä»–ä»¬ä¹‹é—´çš„æ‹·è´éå¸¸ç®€å•ï¼Œå°±æ˜¯æŒ‰ä½å¤åˆ¶å†…å­˜ï¼Œè¿™ç§é»˜è®¤çš„æ‹·è´è¡Œä¸ºå°±æ˜¯æµ…æ‹·è´ï¼Œè¿™å’Œ<code>memcpy()</code>å‡½æ•°çš„è°ƒç”¨æ•ˆæœç±»ä¼¼ã€‚</p><h4 id="æ·±æ‹·è´ï¼ˆdeepCopyï¼‰ï¼š"><a href="#æ·±æ‹·è´ï¼ˆdeepCopyï¼‰ï¼š" class="headerlink" title="æ·±æ‹·è´ï¼ˆdeepCopyï¼‰ï¼š"></a>æ·±æ‹·è´ï¼ˆdeepCopyï¼‰ï¼š</h4><p>æ·±æ‹·è´ä¼šå°†åŸæœ‰å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡æ‹·è´ç»™æ–°å¯¹è±¡ï¼Œå¯¹äºæŒ‡é’ˆç­‰æ•°æ®è¿˜ä¼šä¸ºæ–°å¯¹è±¡é‡æ–°åœ¨å †ä¸Šåˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶å°†åŸæœ‰å¯¹è±¡æ‰€æŒæœ‰çš„å †ä¸Šçš„æ•°æ®ä¹Ÿæ‹·è´è¿‡æ¥ï¼Œè¿™æ ·èƒ½ä¿è¯åŸæœ‰å¯¹è±¡å’Œæ–°å¯¹è±¡æ‰€æŒæœ‰çš„åŠ¨æ€å†…å­˜éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ›´æ”¹ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®ä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šé€ æˆ<code>double free</code>çš„é”™è¯¯ã€‚</p><h4 id="ä¸€ä¸ªé€šä¿—çš„ç†è§£"><a href="#ä¸€ä¸ªé€šä¿—çš„ç†è§£" class="headerlink" title="ä¸€ä¸ªé€šä¿—çš„ç†è§£"></a>ä¸€ä¸ªé€šä¿—çš„ç†è§£</h4><p>æµ…æ‹·è´åªæ˜¯å¯¹æŒ‡é’ˆçš„æ‹·è´ï¼Œæ‹·è´åä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œæ·±æ‹·è´ä¸ä½†å¯¹æŒ‡é’ˆè¿›è¡Œæ‹·è´ï¼Œè€Œä¸”å¯¹æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹è¿›è¡Œæ‹·è´ï¼Œç»æ·±æ‹·è´åçš„æŒ‡é’ˆæ˜¯æŒ‡å‘ä¸¤ä¸ªä¸åŒåœ°å€çš„æŒ‡é’ˆã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">shallowCopy</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">shallowCopy</span>(<span class="type">int</span> len) : <span class="built_in">m_len</span>(len) &#123;</span><br><span class="line">        m_ptr = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">0</span>); <span class="comment">// m_ptræŒ‡å‘ä¸€ä¸ªå€¼ä¸º0çš„int</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">shallowCopy</span>() &#123;&#125;</span><br><span class="line"> </span><br><span class="line">    ~<span class="built_in">shallowCopy</span>() &#123;</span><br><span class="line">        <span class="keyword">delete</span> m_ptr;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span>: <span class="comment">// å®šä¹‰ä¸ºpublicï¼Œæ–¹ä¾¿è¾“å‡º</span></span><br><span class="line">    <span class="type">int</span>* m_ptr;</span><br><span class="line">    <span class="type">int</span> m_len;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">deepCopy</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">deepCopy</span>(<span class="type">int</span> len) : <span class="built_in">m_len</span>(len) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;call deepCopy(int len) &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        m_ptr = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">deepCopy</span>(<span class="type">const</span> deepCopy&amp; deepcopy) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;call deepCopy(const deepCopy&amp; deepcopy) &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        m_len = deepcopy.m_len;</span><br><span class="line">        m_ptr = <span class="keyword">new</span> <span class="built_in">int</span>(*(deepcopy.m_ptr)); <span class="comment">// é‡æ–°åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”èµ‹å€¼</span></span><br><span class="line">    &#125; <span class="comment">// æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    ~<span class="built_in">deepCopy</span>() &#123;</span><br><span class="line">        <span class="keyword">delete</span> m_ptr;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span>* m_ptr;</span><br><span class="line">    <span class="type">int</span> m_len;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">shallowCopy <span class="title">sc</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> sc1 = sc; <span class="comment">// æµ…æ‹·è´</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;shallowCopy: &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;sc.m_ptr = &quot;</span> &lt;&lt; sc.m_ptr &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;sc1.m_ptr = &quot;</span> &lt;&lt; sc1.m_ptr &lt;&lt; std::endl;</span><br><span class="line"> </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;deepCopy: &quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="function">deepCopy <span class="title">dc</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">deepCopy <span class="title">dc1</span><span class="params">(dc)</span></span>; <span class="comment">// æ·±æ‹·è´</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;dc.m_ptr = &quot;</span> &lt;&lt; dc.m_ptr &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;dc1.m_ptr = &quot;</span> &lt;&lt; dc1.m_ptr &lt;&lt; std::endl;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/648.png" class="lazyload" data-srcset="/../image/648.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="648"></p><h3 id="åˆå§‹åŒ–åˆ—è¡¨"><a href="#åˆå§‹åŒ–åˆ—è¡¨" class="headerlink" title="åˆå§‹åŒ–åˆ—è¡¨"></a>åˆå§‹åŒ–åˆ—è¡¨</h3><p><strong>ä½œç”¨</strong>ï¼š</p><p>C++æä¾›äº†åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•ï¼Œç”¨æ¥åˆå§‹åŒ–å±æ€§</p><p><strong>è¯­æ³•:</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ„é€ å‡½æ•°(): å±æ€§1(å€¼1)ï¼Œå±æ€§2(å€¼2)...&#123;&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a,<span class="type">int</span> b,<span class="type">int</span> c)</span><br><span class="line">&#123;</span><br><span class="line">m_A = a;</span><br><span class="line">m_B = b;</span><br><span class="line">m_C = c;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;m_A:&quot;</span> &lt;&lt; p1.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;m_B:&quot;</span> &lt;&lt; p1.m_B &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;m_C:&quot;</span> &lt;&lt; p1.m_C &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">test1</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜"><a href="#ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜" class="headerlink" title="ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜"></a>ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜</h3><p>C++ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸ºå¯¹è±¡æˆå‘˜</p><p>ä¾‹å¦‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span></span><br><span class="line">&#123;</span><br><span class="line">    A a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Phone</span>(string pName)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Phoneæ„é€ å‡½æ•°è¢«è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">m_PName = pName;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Phone</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Phoneææ„å‡½æ•°è¢«è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">string m_PName;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name,string pName): <span class="built_in">m_Name</span>(name),<span class="built_in">m_Phone</span>(pName)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;Personæ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personææ„å‡½æ•°è¢«è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å§“å</span></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="comment">//æ‰‹æœº</span></span><br><span class="line">Phone m_Phone;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;iphone14&quot;</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; p.m_Name &lt;&lt;<span class="string">&quot;æ‹¿ç€&quot;</span> &lt;&lt; p.m_Phone.m_PName &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">test1</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../image/647.png" class="lazyload" data-srcset="/../image/647.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="647"></p><h3 id="é™æ€æˆå‘˜"><a href="#é™æ€æˆå‘˜" class="headerlink" title="é™æ€æˆå‘˜"></a>é™æ€æˆå‘˜</h3><p>å°±æ˜¯static</p><h2 id="C-å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ"><a href="#C-å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ" class="headerlink" title="C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ"></a>C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ</h2><h3 id="æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å‚¨å­˜"><a href="#æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å‚¨å­˜" class="headerlink" title="æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å‚¨å­˜"></a>æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å‚¨å­˜</h3><p>åœ¨C++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</p><p>åªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆå‘˜å˜é‡ å’Œæˆå‘˜å‡½æ•° åˆ†å¼€å­˜å‚¨çš„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> m_A; <span class="comment">// éé™æ€æˆå‘˜å˜é‡  å±äºç±»çš„å¯¹è±¡ä¸Šçš„</span></span><br><span class="line"></span><br><span class="line">string m_C;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_B; <span class="comment">// é™æ€æˆå‘˜å˜é‡  ä¸å±äºç±»çš„å¯¹è±¡ä¸Š</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> <span class="comment">// éé™æ€æˆå‘˜å‡½æ•°  ä¸å±äºç±»çš„å¯¹è±¡ä¸Š</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func2</span><span class="params">()</span> <span class="comment">// é™æ€æˆå‘˜å‡½æ•° ä¸å±å®ç±»çš„å¯¹è±¡ä¸Š</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Person::m_B = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç©ºå¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´ä¸ºï¼š</span></span><br><span class="line"><span class="comment">// C++ç¼–è¯‘å™¨ä¼šç»™æ¯ä¸ªç©ºå¯¹è±¡ä¹Ÿåˆ†é…ä¸€ä¸ªå­—èŠ‚ç©ºé—´ï¼Œæ˜¯ä¸ºäº†åŒºåˆ†ç©ºå¯¹è±¡å å†…å­˜çš„ä½ç½®</span></span><br><span class="line"><span class="comment">// æ¯ä¸ªç©ºå¯¹è±¡ä¹Ÿåº”è¯¥æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å†…å­˜åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sizeof p = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sizeof p = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="thisæŒ‡é’ˆ"><a href="#thisæŒ‡é’ˆ" class="headerlink" title="thisæŒ‡é’ˆ"></a>thisæŒ‡é’ˆ</h3><p>æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç </p><p>é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ</p><p>c++é€šè¿‡æä¾›ç‰¹æ®Šçš„å¯¹è±¡æŒ‡é’ˆï¼ŒthisæŒ‡é’ˆï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚<strong>thisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡</strong></p><p>thisæŒ‡é’ˆæ˜¯éšå«æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ</p><p>thisæŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯</p><p>thisæŒ‡é’ˆçš„ç”¨é€”ï¼š</p><ul><li>å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</li><li>åœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä½¿ç”¨return *this</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// this æŒ‡é’ˆæŒ‡å‘ è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•° æ‰€å±çš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Person&amp; <span class="title">PersonAddAge</span><span class="params">(Person &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;age += p.age;</span><br><span class="line"><span class="comment">// this æŒ‡å‘ p2 çš„æŒ‡é’ˆï¼Œè€Œ *this æŒ‡å‘çš„å°±æ˜¯ p2 è¿™ä¸ªå¯¹è±¡æœ¬ä½“</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ã€è§£å†³åç§°å†²çª</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; p1.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€è¿”å›å¯¹è±¡æœ¬èº«ç”¨ *this</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè°ƒç”¨çš„å‡½æ•°è¿”å›çš„æ˜¯ Person</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// p2.PersonAddAge(p1); ä¿®æ”¹äº† p2 çš„ age (p2.age += p1.age)</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// p2.PersonAddAge(p1).PersonAddAge(p1); </span></span><br><span class="line"><span class="comment">// å…ˆè°ƒç”¨äº† p2.PersonAddAge(p1); è¿”å›äº†ä¸€ä¸ªæ‹·è´ p2 çš„å‡½æ•°ï¼Œç„¶å p2`.PersonAddAge(p1);</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// p2.PersonAddAge(p1).PersonAddAge(p1).PersonAddAge(p1); </span></span><br><span class="line"><span class="comment">// å…ˆè°ƒç”¨äº† p2.PersonAddAge(p1); è¿”å›äº†ä¸€ä¸ªæ‹·è´ p2 çš„å‡½æ•°ï¼Œç„¶å p2`.PersonAddAge(p1), æœ€å p2``.PersonAddAge(p1)</span></span><br><span class="line"><span class="comment">// p2` å’Œ p2`` å‡ä¸ºæ–°åˆ›å»ºçš„å‡½æ•°ï¼Œä¸ä¼šå½±å“ p2 çš„å€¼</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè°ƒç”¨çš„å‡½æ•°è¿”å›çš„æ˜¯ Person&amp;</span></span><br><span class="line"><span class="comment">// p2.PersonAddAge(p1); ä¿®æ”¹äº† p2 çš„ age (p2.age += p1.age)</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// p2.PersonAddAge(p1).PersonAddAge(p1).PersonAddAge(p1); å› ä¸ºè¿”å›çš„æ˜¯ p2 çš„åœ°å€ï¼Œæ‰€ä»¥å‡½æ•°çš„è°ƒç”¨æ˜¯è¿™æ ·çš„  </span></span><br><span class="line"><span class="comment">// p2.PersonAddAge(p1); p2.PersonAddAge(p1); p2.PersonAddAge(p1);  ç›¸å½“äº p2 è°ƒç”¨äº† 3 æ¬¡ PersonAddAge(p1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é“¾å¼ç¼–ç¨‹æ€æƒ³</span></span><br><span class="line">p2.<span class="built_in">PersonAddAge</span>(p1).<span class="built_in">PersonAddAge</span>(p1).<span class="built_in">PersonAddAge</span>(p1);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; p2.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°"><a href="#ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°" class="headerlink" title="ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°"></a>ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</h3><p>C++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„æœ‰æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ</p><p>å¦‚æœç”¨åˆ°thisæŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„å¥å£®æ€§</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç©ºæŒ‡é’ˆè°ƒç”¨æˆå‘˜å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showClassName</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;this is Person class&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPersonAge</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// æŠ¥é”™åŸå› æ˜¯å› ä¸ºä¼ å…¥çš„æŒ‡é’ˆæ˜¯ä¸º NULL</span></span><br><span class="line"><span class="comment">// è§£å†³æ–¹æ³•ï¼Œåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;age = &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person* p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">p-&gt;<span class="built_in">showClassName</span>();</span><br><span class="line"></span><br><span class="line">p-&gt;<span class="built_in">showPersonAge</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="constä¿®é¥°æˆå‘˜å‡½æ•°"><a href="#constä¿®é¥°æˆå‘˜å‡½æ•°" class="headerlink" title="constä¿®é¥°æˆå‘˜å‡½æ•°"></a>constä¿®é¥°æˆå‘˜å‡½æ•°</h3><p><strong>å¸¸å‡½æ•°ï¼š</strong></p><ul><li>æˆå‘˜å‡½æ•°ååŠ conståæˆ‘ä»¬ç§°ä¸ºè¿™ä¸ªå‡½æ•°ä¸º<strong>å¸¸å‡½æ•°</strong></li><li>å¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§</li><li>æˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­—mutableåï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹</li></ul><p><strong>å¸¸å¯¹è±¡ï¼š</strong></p><ul><li>å£°æ˜å¯¹è±¡å‰åŠ constç§°è¯¥å¯¹è±¡ä¸ºå¸¸å¯¹è±¡</li><li>å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¸å‡½æ•°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">// this æŒ‡é’ˆçš„æœ¬è´¨  æ˜¯æŒ‡é’ˆå¸¸é‡  æŒ‡é’ˆçš„æŒ‡å‘æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„</span></span><br><span class="line"><span class="comment">// const Person* const this;</span></span><br><span class="line"><span class="comment">// åœ¨æˆå‘˜å‡½æ•°åé¢åŠ  constï¼Œä¿®é¥°çš„æ˜¯ this æŒ‡å‘ï¼Œè®©æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = <span class="number">100</span>;</span><br><span class="line"><span class="comment">// this-&gt;m_A = 100;</span></span><br><span class="line"><span class="comment">// this = NULL; // this æŒ‡é’ˆæ˜¯ä¸å¯ä»¥ä¿®æ”¹æŒ‡é’ˆçš„æŒ‡å‘çš„</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">mutable</span> <span class="type">int</span> m_B; <span class="comment">// ç‰¹æ®Šå˜é‡ï¼Œå³ä½¿åœ¨å¸¸å‡½æ•°ä¸­ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼ï¼ŒåŠ å…³é”®å­— mutable</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¸å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> Person p; <span class="comment">// åœ¨å¯¹è±¡å‰åŠ  constï¼Œå˜ä¸ºå¸¸å¯¹è±¡</span></span><br><span class="line"><span class="comment">// p.m_A = 1100;</span></span><br><span class="line">p.m_B = <span class="number">100</span>; <span class="comment">// m_B æ˜¯ç‰¹æ®Šå€¼ï¼Œåœ¨å¸¸å¯¹è±¡ä¸‹ä¹Ÿå¯ä»¥ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°</span></span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line"><span class="comment">//p.func(); // å¸¸å¯¹è±¡ ä¸å¯ä»¥è°ƒç”¨æ™®é€šæˆå‘˜å‡½æ•°ï¼Œå› ä¸ºæ™®é€šæˆå‘˜å‡½æ•°å¯ä»¥ä¿®æ”¹å±æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test02</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‹å…ƒ"><a href="#å‹å…ƒ" class="headerlink" title="å‹å…ƒ"></a>å‹å…ƒ</h2><p>ç”Ÿæ´»ä¸­ä½ çš„å®¶æœ‰å®¢å…(Public)ï¼Œæœ‰ä½ çš„å§å®¤(Private)</p><p>å®¢å…æ‰€æœ‰æ¥çš„å®¢äººéƒ½å¯ä»¥è¿›å»ï¼Œä½†æ˜¯ä½ çš„å§å®¤æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä½ èƒ½è¿›å»</p><p>ä½†æ˜¯å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥å…è®¸ä½ çš„å¥½é—ºèœœå¥½åŸºå‹è¿›å»ã€‚</p><p>åœ¨ç¨‹åºé‡Œï¼Œæœ‰äº›ç§æœ‰å±æ€§ ä¹Ÿæƒ³è®©ç±»å¤–ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯</p><p>å‹å…ƒçš„ç›®çš„å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­ç§æœ‰æˆå‘˜</p><p>å‹å…ƒçš„å…³é”®å­—ä¸º friend</p><p>å‹å…ƒçš„ä¸‰ç§å®ç°</p><ul><li>å…¨å±€å‡½æ•°åšå‹å…ƒ</li><li>ç±»åšå‹å…ƒ</li><li>æˆå‘˜å‡½æ•°åšå‹å…ƒ</li></ul><p>è¯­æ³•:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">friend</span> [ä½ æƒ³å®ç°çš„æ–¹å¼]</span><br></pre></td></tr></table></figure><h3 id="å…¨å±€å‡½æ•°åšå‹å…ƒ"><a href="#å…¨å±€å‡½æ•°åšå‹å…ƒ" class="headerlink" title="å…¨å±€å‡½æ•°åšå‹å…ƒ"></a>å…¨å±€å‡½æ•°åšå‹å…ƒ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºç­‘ç‰©ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// goodGay å…¨å±€å‡½æ•°æ˜¯ Building å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—® Building ä¸­çš„ç§æœ‰æˆå‘˜</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">goodGay</span><span class="params">(Building* building)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line">m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">string m_SittingRoom; <span class="comment">// å®¢å…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">string m_BedRoom; <span class="comment">// å§å®¤</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay</span><span class="params">(Building* building)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹å…¨å±€å‡½æ•° æ­£åœ¨è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹å…¨å±€å‡½æ•° æ­£åœ¨è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Building building;</span><br><span class="line"><span class="built_in">goodGay</span>(&amp;building);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç±»åšå‹å…ƒ"><a href="#ç±»åšå‹å…ƒ" class="headerlink" title="ç±»åšå‹å…ƒ"></a>ç±»åšå‹å…ƒ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»åšå‹å…ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GoodGay</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">GoodGay</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span></span>; <span class="comment">// å‚è§‚å‡½æ•° è®¿é—® Building ä¸­çš„å±æ€§</span></span><br><span class="line"></span><br><span class="line">Building* building;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// GoodGay ç±»æ˜¯æœ¬ç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®æœ¬ç±»ä¸­ç§æœ‰</span></span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">GoodGay</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Building</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">string m_SittingRoom; <span class="comment">// å®¢å…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">string m_BedRoom; <span class="comment">// å§å®¤</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å¤–å†™æˆå‘˜å‡½æ•°</span></span><br><span class="line">Building::<span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line">m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GoodGay::<span class="built_in">GoodGay</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// åˆ›å»ºå»ºç­‘ç‰©å¯¹è±¡</span></span><br><span class="line">building = <span class="keyword">new</span> Building;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GoodGay::visit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹ç±»æ­£åœ¨è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹ç±»æ­£åœ¨è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">GoodGay gg;</span><br><span class="line">gg.<span class="built_in">visit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æˆå‘˜å‡½æ•°åšå‹å…ƒ"><a href="#æˆå‘˜å‡½æ•°åšå‹å…ƒ" class="headerlink" title="æˆå‘˜å‡½æ•°åšå‹å…ƒ"></a>æˆå‘˜å‡½æ•°åšå‹å…ƒ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GoodGay</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">GoodGay</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span></span>; <span class="comment">// è®© visit å‡½æ•°å¯ä»¥è®¿é—® building ä¸­ç§æœ‰æˆå‘˜</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit2</span><span class="params">()</span></span>; <span class="comment">// è®© visit2 å‡½æ•°ä¸å¯ä»¥è®¿é—® Building ä¸­ç§æœ‰æˆå‘˜</span></span><br><span class="line"></span><br><span class="line">Building* building;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å‘Šè¯‰ç¼–è¯‘å™¨ GoodGay ç±»ä¸‹çš„ visit æˆå‘˜å‡½æ•°ä½œä¸ºæœ¬ç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç§æœ‰æˆå‘˜</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">GoodGay::visit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Building</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">string m_SittingRoom; <span class="comment">// å®¢å…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">string m_BedRoom; <span class="comment">// å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å¤–å®ç°æˆå‘˜å‡½æ•°</span></span><br><span class="line">Building::<span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line">m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GoodGay::<span class="built_in">GoodGay</span>()</span><br><span class="line">&#123;</span><br><span class="line">building = <span class="keyword">new</span> Building;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GoodGay::visit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;visit å‡½æ•°æ­£åœ¨è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;visit å‡½æ•°æ­£åœ¨è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GoodGay::visit2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;visit2 å‡½æ•°æ­£åœ¨è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line"><span class="comment">// cout &lt;&lt; &quot;visit å‡½æ•°æ­£åœ¨è®¿é—®ï¼š&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">GoodGay gg;</span><br><span class="line">gg.<span class="built_in">visit</span>();</span><br><span class="line">gg.<span class="built_in">visit2</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿ç®—ç¬¦é‡è½½"><a href="#è¿ç®—ç¬¦é‡è½½" class="headerlink" title="è¿ç®—ç¬¦é‡è½½"></a>è¿ç®—ç¬¦é‡è½½</h2><p>è¿ç®—ç¬¦é‡è½½æ¦‚å¿µï¼šå¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹</p><h3 id="åŠ å·è¿ç®—ç¬¦é‡è½½"><a href="#åŠ å·è¿ç®—ç¬¦é‡è½½" class="headerlink" title="åŠ å·è¿ç®—ç¬¦é‡è½½"></a>åŠ å·è¿ç®—ç¬¦é‡è½½</h3><p>ä½œç”¨ï¼šå®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®—</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ å·è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ã€æˆå‘˜å‡½æ•°é‡è½½ + å·</span></span><br><span class="line"><span class="comment">//Person operator+ (Person&amp; p)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//Person temp;</span></span><br><span class="line"><span class="comment">//temp.m_A = this-&gt;m_A + p.m_A;</span></span><br><span class="line"><span class="comment">//temp.m_B = this-&gt;m_B + p.m_B;</span></span><br><span class="line"><span class="comment">//return temp;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°çš„å£°æ˜</span></span><br><span class="line">Person <span class="keyword">operator</span>+(Person&amp; p1, Person&amp; p2);</span><br><span class="line">Person <span class="keyword">operator</span>+(Person&amp; p, <span class="type">int</span> num);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p1;</span><br><span class="line">p1.m_A = <span class="number">10</span>;</span><br><span class="line">p1.m_B = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">Person p2;</span><br><span class="line">p2.m_A = <span class="number">10</span>;</span><br><span class="line">p2.m_B = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆå‘˜å‡½æ•°é‡è½½æœ¬è´¨è°ƒç”¨</span></span><br><span class="line"><span class="comment">// Person p3 = p1.operator+(p2);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€å‡½æ•°é‡è½½æœ¬è´¨è°ƒç”¨</span></span><br><span class="line"><span class="comment">// Person p3 = operator+(p1, p2);</span></span><br><span class="line"></span><br><span class="line">Person p3 = p1 + p2;</span><br><span class="line"><span class="comment">// è¿ç®—ç¬¦é‡è½½ ä¹Ÿå¯ä»¥å‘ç”Ÿå‡½æ•°é‡è½½</span></span><br><span class="line"></span><br><span class="line">Person p4 = p1 + <span class="number">100</span>; <span class="comment">// Person + int</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p3.m_Aï¼š&quot;</span> &lt;&lt; p3.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p3.m_Bï¼š&quot;</span> &lt;&lt; p3.m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p4.m_Aï¼š&quot;</span> &lt;&lt; p4.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p4.m_Bï¼š&quot;</span> &lt;&lt; p4.m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€å…¨å±€å‡½æ•°é‡è½½ + å·</span></span><br><span class="line">Person <span class="keyword">operator</span>+(Person&amp; p1, Person&amp; p2)</span><br><span class="line">&#123;</span><br><span class="line">Person temp;</span><br><span class="line">temp.m_A = p1.m_A + p2.m_A;</span><br><span class="line">temp.m_B = p1.m_B + p2.m_B;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°é‡è½½çš„ç‰ˆæœ¬</span></span><br><span class="line">Person <span class="keyword">operator</span>+(Person&amp; p, <span class="type">int</span> num)</span><br><span class="line">&#123;</span><br><span class="line">Person temp;</span><br><span class="line">temp.m_A = p.m_A + num;</span><br><span class="line">temp.m_B = p.m_B + num;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“1ï¼šå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„</p></blockquote><blockquote><p>æ€»ç»“2ï¼šä¸è¦æ»¥ç”¨è¿ç®—ç¬¦é‡è½½</p></blockquote><h3 id="å·¦ç§»è¿ç®—ç¬¦é‡è½½"><a href="#å·¦ç§»è¿ç®—ç¬¦é‡è½½" class="headerlink" title="å·¦ç§»è¿ç®—ç¬¦é‡è½½"></a>å·¦ç§»è¿ç®—ç¬¦é‡è½½</h3><p>ä½œç”¨ï¼šå¯ä»¥è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¦ç§»è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å‹å…ƒ</span></span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; cout, Person&amp; p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">    &#123;</span><br><span class="line">        m_A = a;</span><br><span class="line">        m_B = b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ©ç”¨æˆå‘˜å‡½æ•°é‡è½½ å·¦ç§»è¿ç®—ç¬¦  p.operator&lt;&lt;(cout) ç®€åŒ–ç‰ˆæœ¬ p &lt;&lt; cout</span></span><br><span class="line">    <span class="comment">// ä¸ä¼šåˆ©ç”¨æˆå‘˜å‡½æ•°é‡è½½ &lt;&lt; è¿ç®—ç¬¦ï¼Œå› ä¸ºæ— æ³•å®ç° cout åœ¨å·¦ä¾§</span></span><br><span class="line">    <span class="comment">//void operator&lt;&lt;(Person&amp; p) </span></span><br><span class="line">    <span class="comment">//&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_A;</span><br><span class="line">    <span class="type">int</span> m_B;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åªèƒ½åˆ©ç”¨å…¨å±€å‡½æ•°é‡è½½å·¦ç§»è¿ç®—ç¬¦</span></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; cout, Person&amp; p) <span class="comment">// æœ¬è´¨ operator &lt;&lt; (cout , p)ï¼Œç®€åŒ– cout &lt;&lt; p</span></span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;m_A = &quot;</span> &lt;&lt; p.m_A &lt;&lt; <span class="string">&quot; m_B = &quot;</span> &lt;&lt; p.m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cout;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Person <span class="title">p</span><span class="params">(<span class="number">10</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; p &lt;&lt; <span class="string">&quot; Hello World&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé‡è½½å·¦ç§»è¿ç®—ç¬¦é…åˆå‹å…ƒå¯ä»¥å®ç°è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p><h3 id="é€’å¢è¿ç®—ç¬¦é‡è½½"><a href="#é€’å¢è¿ç®—ç¬¦é‡è½½" class="headerlink" title="é€’å¢è¿ç®—ç¬¦é‡è½½"></a>é€’å¢è¿ç®—ç¬¦é‡è½½</h3><p>ä½œç”¨ï¼š é€šè¿‡é‡è½½é€’å¢é€’å‡è¿ç®—ç¬¦ï¼Œå®ç°è‡ªå·±çš„æ•´å‹æ•°æ®</p><p>é€’å¢ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è½½é€’å¢è¿ç®—ç¬¦</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰æ•´å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyInteger</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‹å…ƒ</span></span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; cout, <span class="type">const</span> MyInteger&amp; myint);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyInteger</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_Num = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½å‰ç½® ++ è¿ç®—ç¬¦  è¿”å›å¼•ç”¨æ˜¯ä¸ºäº†ä¸€ç›´å¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œé€’å¢æ“ä½œ</span></span><br><span class="line">    MyInteger&amp; <span class="keyword">operator</span>++()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å…ˆè¿›è¡Œ ++ è¿ç®—</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Num++;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å†å°†è‡ªèº«è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½åç½® ++ è¿ç®—ç¬¦</span></span><br><span class="line">    <span class="comment">// void operator++(int)  intä»£è¡¨å ä½å‚æ•°ï¼Œå¯ä»¥ç”¨äºåŒºåˆ†å‰ç½®å’Œåç½®é€’å¢</span></span><br><span class="line">    MyInteger <span class="keyword">operator</span>++(<span class="type">int</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å…ˆ è®°å½•å½“æ—¶ç»“æœ</span></span><br><span class="line">        MyInteger temp = *<span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// å é€’å¢</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Num++;</span><br><span class="line">        <span class="comment">// æœ€åå°†è®°å½•ç»“æœåšè¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_Num;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è½½å·¦ç§»è¿ç®—ç¬¦</span></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; cout, <span class="type">const</span> MyInteger&amp; myint)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; myint.m_Num &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cout;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰ç½®é€’å¢æµ‹è¯•å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MyInteger myint;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ++(++myint) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; myint &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åç½®é€’å¢æµ‹è¯•å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MyInteger myint;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; (myint++) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; myint &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// test01();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€’å‡ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è½½é€’å‡è¿ç®—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰æ•´å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyInteger</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å‹å…ƒ</span></span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; cout, <span class="type">const</span> MyInteger&amp; myInt);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyInteger</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        m_Num = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‰ç½®é€’å‡</span></span><br><span class="line">    MyInteger&amp; <span class="keyword">operator</span>--()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Num--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åç½®é€’å‡</span></span><br><span class="line">    MyInteger <span class="keyword">operator</span>--(<span class="type">int</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å…ˆè®°å½•å½“å‰çš„å€¼</span></span><br><span class="line">        MyInteger temp;</span><br><span class="line">        temp.m_Num = <span class="keyword">this</span>-&gt;m_Num;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å†è¿›è¡Œé€’å‡</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Num--;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æœ€åè¿”å›è®°å½•çš„å€¼</span></span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_Num;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è½½ &lt;&lt; è¿ç®—ç¬¦</span></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; cout, <span class="type">const</span> MyInteger&amp; myInt)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; myInt.m_Num &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> cout;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MyInteger myInt;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; --(--myInt) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; myInt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MyInteger myInt;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; myInt-- &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; myInt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// test01();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èµ‹å€¼è¿ç®—ç¬¦é‡è½½"><a href="#èµ‹å€¼è¿ç®—ç¬¦é‡è½½" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦é‡è½½"></a>èµ‹å€¼è¿ç®—ç¬¦é‡è½½</h3><p>c++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 4ä¸ªå‡½æ•°</p><ol><li>é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li><li>èµ‹å€¼è¿ç®—ç¬¦ operator&#x3D;, å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li></ol><p>å¦‚æœç±»ä¸­æœ‰å±æ€§æŒ‡å‘å †åŒºï¼Œåšèµ‹å€¼æ“ä½œæ—¶ä¹Ÿä¼šå‡ºç°æ·±æµ…æ‹·è´é—®é¢˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ‹å€¼è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">    &#123;</span><br><span class="line">        m_Age = <span class="keyword">new</span> <span class="built_in">int</span>(age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">Person</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (m_Age != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">delete</span> m_Age;</span><br><span class="line">            m_Age = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½ èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line">    Person&amp; <span class="keyword">operator</span>=(Person&amp; p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç¼–è¯‘å™¨æ˜¯æä¾›æµ…æ‹·è´</span></span><br><span class="line">        <span class="comment">// m_Age = p.m_Age;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åº”è¯¥å…ˆåˆ¤æ–­æ˜¯å¦æœ‰å±æ€§åœ¨å †åŒºï¼Œå¦‚æœæœ‰å…ˆé‡Šæ”¾å¹²å‡€ï¼Œç„¶åæ·±æ‹·è´</span></span><br><span class="line">        <span class="keyword">if</span> (m_Age != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">delete</span> m_Age;</span><br><span class="line">            m_Age = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·±æ‹·è´</span></span><br><span class="line">        m_Age = <span class="keyword">new</span> <span class="built_in">int</span>(*p.m_Age);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›å¯¹è±¡æœ¬èº«</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>* m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Person <span class="title">p3</span><span class="params">(<span class="number">30</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    p3 = p1 = p2; <span class="comment">// èµ‹å€¼æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p1 çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p1.m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p2 çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p2.m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;p3 çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p3.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line">    <span class="type">int</span> c = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">    c = b = a;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…³ç³»è¿ç®—ç¬¦é‡è½½"><a href="#å…³ç³»è¿ç®—ç¬¦é‡è½½" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦é‡è½½"></a>å…³ç³»è¿ç®—ç¬¦é‡è½½</h3><p><strong>ä½œç”¨ï¼š</strong>é‡è½½å…³ç³»è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡è¿›è¡Œå¯¹æ¯”æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è½½å…³ç³»è¿ç®—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">    &#123;</span><br><span class="line">        m_Name = name;</span><br><span class="line">        m_Age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½  == å·</span></span><br><span class="line"></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>==(Person&amp; p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Age == p.m_Age &amp;&amp; <span class="keyword">this</span>-&gt;m_Name == p.m_Name)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½ != å·</span></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>!=(Person&amp; p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Age == p.m_Age &amp;&amp; <span class="keyword">this</span>-&gt;m_Name == p.m_Name)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    string m_Name;</span><br><span class="line">    <span class="type">int</span> m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p1 == p2)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p1 å’Œ p2 æ˜¯ç›¸ç­‰çš„ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p1 å’Œ p2 æ˜¯ä¸ç›¸ç­‰çš„&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p1 != p2)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p1 å’Œ p2 æ˜¯ä¸ç›¸ç­‰çš„ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;p1 å’Œ p2 æ˜¯ç›¸ç­‰çš„&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½"><a href="#å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½" class="headerlink" title="å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½"></a>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½</h3><ul><li>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ () ä¹Ÿå¯ä»¥é‡è½½</li><li>ç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•°</li><li>ä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´»</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°è¾“å‡ºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è½½å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string test)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; test &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyPrint02</span><span class="params">(string test)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; test &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MyPrint myPrint;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">myPrint</span>(<span class="string">&quot;Hello World&quot;</span>); <span class="comment">// ç”±äºä½¿ç”¨èµ·æ¥éå¸¸ç±»ä¼¼å‡½æ•°è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">MyPrint02</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¿å‡½æ•°éå¸¸çµæ´»ï¼Œæ²¡æœ‰å›ºå®šçš„å†™æ³•</span></span><br><span class="line"><span class="comment">// åŠ æ³•ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> num1 + num2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MyAdd myAdd;</span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">myAdd</span>(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; ret &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒ¿åå‡½æ•°å¯¹è±¡</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">MyAdd</span>()(<span class="number">100</span>, <span class="number">100</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;newæ“ä½œç¬¦&quot;&gt;&lt;a href=&quot;#newæ“ä½œç¬¦&quot; class=&quot;headerlink&quot; title=&quot;newæ“ä½œç¬¦&quot;&gt;&lt;/a&gt;newæ“ä½œç¬¦&lt;/h2&gt;&lt;h3 id=&quot;ä½¿ç”¨-new-è¿ç®—ç¬¦-åˆ†é…å†…å­˜-å¹¶-åˆå§‹åŒ–&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨-new-è¿ç®—ç¬¦-åˆ†é…å†…å­˜-</summary>
      
    
    
    
    <category term="C++" scheme="https://5m10v3.github.io/categories/C/"/>
    
    
    <category term="å­¦ä¹ " scheme="https://5m10v3.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>AliyunCTF2023-å­—èŠ‚ç è·³åŠ¨å¤ç°</title>
    <link href="https://5m10v3.github.io/2024/04/18/AliyunCTF2023-%E5%AD%97%E8%8A%82%E7%A0%81%E8%B7%B3%E5%8A%A8%E5%A4%8D%E7%8E%B0/"/>
    <id>https://5m10v3.github.io/2024/04/18/AliyunCTF2023-%E5%AD%97%E8%8A%82%E7%A0%81%E8%B7%B3%E5%8A%A8%E5%A4%8D%E7%8E%B0/</id>
    <published>2024-04-17T16:00:00.000Z</published>
    <updated>2024-06-09T09:14:25.494Z</updated>
    
    <content type="html"><![CDATA[<p>å¤ç°æœ¬é¢˜ä¸»è¦æ˜¯ä¸ºäº†å­¦ä¹ jså­—èŠ‚ç ï¼Œè‹¥æœ‰ä¸è¶³ä¹‹å¤„ï¼Œè¯·å„ä½å¸ˆå‚…å¤šå¤šæŒ‡å‡º</p><p>V8 æ˜¯ Google å¼€å‘çš„å¼€æº JavaScript å¼•æ“ã€‚ Chromeã€Node.jså’Œè®¸å¤šå…¶ä»–åº”ç”¨ç¨‹åºéƒ½åœ¨ä½¿ç”¨ V8ã€‚<br>å¦‚æœåªå‘å¸ƒV8å¼•æ“ç¼–è¯‘åçš„å­—èŠ‚ç ï¼Œå°±å¯ä»¥ä¿æŠ¤æºç ã€‚</p><p>å¯ä»¥ä»ä¸‹é¢è¿™ç¯‡æ–‡ç« ä¸­å­¦ä¹ å˜é‡å£°æ˜ã€æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯ã€å‡½æ•°å£°æ˜ã€ç±»ç­‰æœ€åŸºæœ¬è¯­æ³•å¯¹åº”çš„å­—èŠ‚ç ã€‚</p><p><a href="https://tw.coderbridge.com/series/817c07dc8e1c46f2b0a604b3b4e195c1">https://tw.coderbridge.com/series/817c07dc8e1c46f2b0a604b3b4e195c1</a></p><p>ä¸‹é¢è¿™ä¸ªé“¾æ¥å¯ä»¥å½“v8çš„javascriptå­—èŠ‚ç é˜…è¯»å®˜æ–¹æ–‡æ¡£æ¥ç”¨ã€‚<br><a href="https://github.com/v8/v8/blob/d84e9496d23cf1dc776ae32199d81accfabaafb5/src/interpreter/interpreter-generator.cc">https://github.com/v8/v8/blob/d84e9496d23cf1dc776ae32199d81accfabaafb5/src/interpreter/interpreter-generator.cc</a></p><h2 id="é¢˜ç›®ä»‹ç»"><a href="#é¢˜ç›®ä»‹ç»" class="headerlink" title="é¢˜ç›®ä»‹ç»"></a>é¢˜ç›®ä»‹ç»</h2><p>æ ¹æ®é¢˜ç›®ç»™å‡ºçš„bytecode.txt,åˆ†æå‡ºæ¥å®ƒçš„åŠ å¯†å‡½æ•°å·²ç»å­—ç¬¦ä¸²çš„æ¯”è¾ƒ</p><h3 id="é€‰æ‰‹è·å¾—çš„æ–‡ä»¶"><a href="#é€‰æ‰‹è·å¾—çš„æ–‡ä»¶" class="headerlink" title="é€‰æ‰‹è·å¾—çš„æ–‡ä»¶"></a>é€‰æ‰‹è·å¾—çš„æ–‡ä»¶</h3><ul><li>nodejs äºŒè¿›åˆ¶ç¨‹åº</li><li>flagchecker.jscï¼Œjsæºç é€šè¿‡Bytenodeç¼–è¯‘åå¾—åˆ°çš„å­—èŠ‚ç å½¢å¼ï¼Œèƒ½å¤Ÿæ­£å¸¸è¿è¡Œ</li><li>flagchecker_bytecode.txtï¼Œnodejsè¿è¡Œflagchecker.jsæ—¶æ·»åŠ  <code>-bytecode</code> è·å¾—çš„jså­—èŠ‚ç æ±‡ç¼–æ–‡æœ¬æ–‡ä»¶ã€‚</li><li>runner.jsã€run.shï¼Œç”¨äºå¼•å¯¼nodejsè¿è¡Œflagchecker.jsc</li></ul><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><p>æˆ‘ä»¬å¯ä»¥æ ¹æ®flagchecker.jsc çš„è¿è¡Œç»“æœå¾—å‡ºè¿”å›å€¼</p><p>Right!  or  Wrong!</p><p>ç„¶åæˆ‘ä»¬åœ¨æµ·é‡çš„å‡½æ•°é‡Œé¢å°±å¯ä»¥å®šä½åˆ°ä¸€ä¸ªå‡½æ•°</p><h3 id="Mainå‡½æ•°-å‰–æå­—èŠ‚ç "><a href="#Mainå‡½æ•°-å‰–æå­—èŠ‚ç " class="headerlink" title="Mainå‡½æ•°-å‰–æå­—èŠ‚ç "></a>Mainå‡½æ•°-å‰–æå­—èŠ‚ç </h3><p>mainå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[generated bytecode <span class="keyword">for</span> <span class="attr">function</span>: main (<span class="number">0x3711a3bdfd81</span> &lt;<span class="title class_">SharedFunctionInfo</span> main&gt;)]</span><br><span class="line"><span class="title class_">Bytecode</span> <span class="attr">length</span>: <span class="number">69</span></span><br><span class="line"><span class="title class_">Parameter</span> count <span class="number">1</span></span><br><span class="line"><span class="title class_">Register</span> count <span class="number">4</span></span><br><span class="line"><span class="title class_">Frame</span> size <span class="number">32</span></span><br><span class="line"><span class="variable constant_">OSR</span> nesting <span class="attr">level</span>: <span class="number">0</span></span><br><span class="line"><span class="title class_">Bytecode</span> <span class="title class_">Age</span>: <span class="number">0</span></span><br><span class="line"> <span class="number">1207</span> S&gt; <span class="number">0x3711a3be0a56</span> @    <span class="number">0</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a59</span> @    <span class="number">3</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line"> <span class="number">1215</span> E&gt; <span class="number">0x3711a3be0a5a</span> @    <span class="number">4</span> : 2d f9 <span class="number">01</span> <span class="number">02</span>       <span class="title class_">LdaNamedProperty</span> r1, [<span class="number">1</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a5e</span> @    <span class="number">8</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line">         <span class="number">0x3711a3be0a5f</span> @    <span class="number">9</span> : 0d <span class="number">02</span>             <span class="title class_">LdaSmi</span> [<span class="number">2</span>]</span><br><span class="line"> <span class="number">1219</span> E&gt; <span class="number">0x3711a3be0a61</span> @   <span class="number">11</span> : 2f f9 <span class="number">04</span>          <span class="title class_">LdaKeyedProperty</span> r1, [<span class="number">4</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a64</span> @   <span class="number">14</span> : c3                <span class="title class_">Star0</span> </span><br><span class="line"> <span class="number">1270</span> S&gt; <span class="number">0x3711a3be0a65</span> @   <span class="number">15</span> : <span class="number">96</span> <span class="number">23</span>             <span class="title class_">JumpIfToBooleanFalse</span> [<span class="number">35</span>] (<span class="number">0x3711a3be0a88</span> @ <span class="number">50</span>)</span><br><span class="line">         <span class="number">0x3711a3be0a67</span> @   <span class="number">17</span> : <span class="number">17</span> <span class="number">03</span>             <span class="title class_">LdaImmutableCurrentContextSlot</span> [<span class="number">3</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a69</span> @   <span class="number">19</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line"> <span class="number">1279</span> E&gt; <span class="number">0x3711a3be0a6a</span> @   <span class="number">20</span> : <span class="number">61</span> f9 fa <span class="number">06</span>       <span class="title class_">CallUndefinedReceiver1</span> r1, r0, [<span class="number">6</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a6e</span> @   <span class="number">24</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line">         <span class="number">0x3711a3be0a6f</span> @   <span class="number">25</span> : <span class="number">11</span>                <span class="title class_">LdaTrue</span> </span><br><span class="line"> <span class="number">1286</span> E&gt; <span class="number">0x3711a3be0a70</span> @   <span class="number">26</span> : 6a f9 <span class="number">08</span>          <span class="title class_">TestEqual</span> r1, [<span class="number">8</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a73</span> @   <span class="number">29</span> : <span class="number">98</span> <span class="number">15</span>             <span class="title class_">JumpIfFalse</span> [<span class="number">21</span>] (<span class="number">0x3711a3be0a88</span> @ <span class="number">50</span>)</span><br><span class="line"> <span class="number">1305</span> S&gt; <span class="number">0x3711a3be0a75</span> @   <span class="number">31</span> : <span class="number">21</span> <span class="number">02</span> <span class="number">09</span>          <span class="title class_">LdaGlobal</span> [<span class="number">2</span>], [<span class="number">9</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a78</span> @   <span class="number">34</span> : c1                <span class="title class_">Star2</span> </span><br><span class="line"> <span class="number">1313</span> E&gt; <span class="number">0x3711a3be0a79</span> @   <span class="number">35</span> : 2d f8 <span class="number">03</span> 0b       <span class="title class_">LdaNamedProperty</span> r2, [<span class="number">3</span>], [<span class="number">11</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a7d</span> @   <span class="number">39</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line">         <span class="number">0x3711a3be0a7e</span> @   <span class="number">40</span> : <span class="number">13</span> <span class="number">04</span>             <span class="title class_">LdaConstant</span> [<span class="number">4</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a80</span> @   <span class="number">42</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line"> <span class="number">1313</span> E&gt; <span class="number">0x3711a3be0a81</span> @   <span class="number">43</span> : 5d f9 f8 f7 0d    <span class="title class_">CallProperty1</span> r1, r2, r3, [<span class="number">13</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a86</span> @   <span class="number">48</span> : <span class="number">89</span> <span class="number">13</span>             <span class="title class_">Jump</span> [<span class="number">19</span>] (<span class="number">0x3711a3be0a99</span> @ <span class="number">67</span>)</span><br><span class="line"> <span class="number">1349</span> S&gt; <span class="number">0x3711a3be0a88</span> @   <span class="number">50</span> : <span class="number">21</span> <span class="number">02</span> <span class="number">09</span>          <span class="title class_">LdaGlobal</span> [<span class="number">2</span>], [<span class="number">9</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a8b</span> @   <span class="number">53</span> : c1                <span class="title class_">Star2</span> </span><br><span class="line"> <span class="number">1357</span> E&gt; <span class="number">0x3711a3be0a8c</span> @   <span class="number">54</span> : 2d f8 <span class="number">03</span> 0b       <span class="title class_">LdaNamedProperty</span> r2, [<span class="number">3</span>], [<span class="number">11</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a90</span> @   <span class="number">58</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line">         <span class="number">0x3711a3be0a91</span> @   <span class="number">59</span> : <span class="number">13</span> <span class="number">05</span>             <span class="title class_">LdaConstant</span> [<span class="number">5</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a93</span> @   <span class="number">61</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line"> <span class="number">1357</span> E&gt; <span class="number">0x3711a3be0a94</span> @   <span class="number">62</span> : 5d f9 f8 f7 0f    <span class="title class_">CallProperty1</span> r1, r2, r3, [<span class="number">15</span>]</span><br><span class="line">         <span class="number">0x3711a3be0a99</span> @   <span class="number">67</span> : 0e                <span class="title class_">LdaUndefined</span> </span><br><span class="line"> <span class="number">1378</span> S&gt; <span class="number">0x3711a3be0a9a</span> @   <span class="number">68</span> : a8                <span class="title class_">Return</span> </span><br><span class="line"><span class="title class_">Constant</span> pool (size = <span class="number">6</span>)</span><br><span class="line"><span class="number">0x3711a3be09e1</span>: [<span class="title class_">FixedArray</span>] <span class="keyword">in</span> <span class="title class_">OldSpace</span></span><br><span class="line"> - <span class="attr">map</span>: <span class="number">0x2546cb1c12c1</span> &lt;<span class="title class_">Map</span>&gt;</span><br><span class="line"> - <span class="attr">length</span>: <span class="number">6</span></span><br><span class="line">           <span class="number">0</span>: <span class="number">0x39ea5930f9e9</span> &lt;<span class="title class_">String</span>[<span class="number">7</span>]: #process&gt;</span><br><span class="line">           <span class="number">1</span>: <span class="number">0x20e3b754b6d9</span> &lt;<span class="title class_">String</span>[<span class="number">4</span>]: #argv&gt;</span><br><span class="line">           <span class="number">2</span>: <span class="number">0x26784b2e1619</span> &lt;<span class="title class_">String</span>[<span class="number">7</span>]: #<span class="variable language_">console</span>&gt;</span><br><span class="line">           <span class="number">3</span>: <span class="number">0x0ef123a28e69</span> &lt;<span class="title class_">String</span>[<span class="number">3</span>]: #log&gt;</span><br><span class="line">           <span class="number">4</span>: <span class="number">0x3711a3be0961</span> &lt;<span class="title class_">String</span>[<span class="number">6</span>]: #<span class="title class_">Right</span>!&gt;</span><br><span class="line">           <span class="number">5</span>: <span class="number">0x3711a3be0979</span> &lt;<span class="title class_">String</span>[<span class="number">6</span>]: #<span class="title class_">Wrong</span>!&gt;</span><br><span class="line"><span class="title class_">Handler</span> <span class="title class_">Table</span> (size = <span class="number">0</span>)</span><br><span class="line"><span class="title class_">Source</span> <span class="title class_">Position</span> <span class="title class_">Table</span> (size = <span class="number">31</span>)</span><br><span class="line"><span class="number">0x3711a3be0aa1</span> &lt;<span class="title class_">ByteArray</span>[<span class="number">31</span>]&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">LdaGlobal [0], [0]//å®šä¹‰å…¨å±€å˜é‡console å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ä»Constant poolå–,å¹¶å­˜å‚¨åˆ°accå¯„å­˜å™¨,acc=global.process</span><br><span class="line">Star1 // r1=acc</span><br><span class="line">LdaNamedProperty r1, [1], [2] //ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¦ä½œç”¨çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯å–Constant poolé‡Œé¢çš„å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯å‚æ•°çš„æ•°é‡</span><br><span class="line">Star1  // r1=global.process.argv</span><br><span class="line">LdaSmi [2] //acc=2</span><br><span class="line">LdaKeyedProperty r1, [4] // acc=global.process.argv[2]</span><br><span class="line">Star0 //r0=acc</span><br><span class="line">JumpIfToBooleanFalse [35] (0x3711a3be0a88 @ 50) //ä½œç”¨æ˜¯åˆ¤ç©ºï¼Œå¦‚æœç»“æœä¸ºfalse ï¼Œå°±ä¼šè¿”å›Wrong!</span><br><span class="line">LdaImmutableCurrentContextSlot [3] //è°ƒç”¨å¤–éƒ¨å‡½æ•°</span><br><span class="line">Star1 </span><br><span class="line">CallUndefinedReceiver1 r1, r0, [6]  //è°ƒç”¨å¤–éƒ¨å‡½æ•° acc=æŸå¤–éƒ¨å‡½æ•°</span><br><span class="line">Star1 //r1=acc  </span><br><span class="line">//è°ƒç”¨r1ï¼Œå‚æ•°ä¸ªæ•°ä¸º1ï¼Œå‚æ•°æ”¾åœ¨r0ï¼Œå³è°ƒç”¨æŸå¤–éƒ¨å‡½æ•°(global.process.argv[2])</span><br><span class="line">LdaTrue // acc=true</span><br><span class="line">TestEqual r1, [8] // åˆ¤æ–­r1æ˜¯å¦å’Œaccå¯„å­˜å™¨ç›¸ç­‰</span><br><span class="line">JumpIfFalse [21] (0x3711a3be0a88 @ 50)  //å¦‚æœç»“æœä¸ºfalse ï¼Œå°±ä¼šè¿”å›Wrong!</span><br><span class="line">//å› ä¸ºä¸Šè¿°å­—èŠ‚ç æœ‰ä¸ªç›¸åŒçš„ç»“æœï¼Œæ‰€ä»¥åœ¨æ­¤ç»Ÿä¸€è§£é‡Šä¸€ä¸‹</span><br><span class="line">1349 S&gt; 0x3711a3be0a88 @   50 : 21 02 09           LdaGlobal [2], [9]</span><br><span class="line">         0x3711a3be0a8b @   53 : c1                Star2 </span><br><span class="line"> 1357 E&gt; 0x3711a3be0a8c @   54 : 2d f8 03 0b       LdaNamedProperty r2, [3], [11]</span><br><span class="line">         0x3711a3be0a90 @   58 : c2                Star1 </span><br><span class="line">         0x3711a3be0a91 @   59 : 13 05             LdaConstant [5]</span><br><span class="line">         0x3711a3be0a93 @   61 : c0                Star3 </span><br><span class="line"> 1357 E&gt; 0x3711a3be0a94 @   62 : 5d f9 f8 f7 0f    CallProperty1 r1, r2, r3, [15]</span><br><span class="line"> ç¿»è¯‘ä¸€ä¸‹å°±æ˜¯  :   console.log(&#x27;Wrong!&#x27;) //å°±æ˜¯ä¼šè¾“å‡ºWrongï¼</span><br><span class="line"> //ä¸‹é¢ç»“æ„è·Ÿä¸Šé¢ç›¸ä¼¼</span><br><span class="line"> 1305 S&gt; 0x3711a3be0a75 @   31 : 21 02 09          LdaGlobal [2], [9]</span><br><span class="line">         0x3711a3be0a78 @   34 : c1                Star2 </span><br><span class="line"> 1313 E&gt; 0x3711a3be0a79 @   35 : 2d f8 03 0b       LdaNamedProperty r2, [3], [11]</span><br><span class="line">         0x3711a3be0a7d @   39 : c2                Star1 </span><br><span class="line">         0x3711a3be0a7e @   40 : 13 04             LdaConstant [4]</span><br><span class="line">         0x3711a3be0a80 @   42 : c0                Star3 </span><br><span class="line"> 1313 E&gt; 0x3711a3be0a81 @   43 : 5d f9 f8 f7 0d    CallProperty1 r1, r2, r3, [13]</span><br><span class="line"> ç¿»è¯‘ä¸€ä¸‹å°±æ˜¯   :  console.log(&#x27;Right!&#x27;) //å°±æ˜¯ä¼šè¾“å‡ºRightï¼</span><br></pre></td></tr></table></figure><p> å¯è§è¿™ä¸ªmainå‡½æ•°çš„å…³é”®å°±æ˜¯å¤–éƒ¨è°ƒç”¨çš„å‡½æ•°</p><p>æˆ‘ä»¬åœ¨æµ·é‡çš„å‡½æ•°æ‰¾åˆ°å…¶å®ƒä¸¤ä¸ªå¯ä»¥å‡½æ•° aaa,cccå‡½æ•°</p><h3 id="aaaå‡½æ•°-å‰–æå­—èŠ‚ç "><a href="#aaaå‡½æ•°-å‰–æå­—èŠ‚ç " class="headerlink" title="aaaå‡½æ•°-å‰–æå­—èŠ‚ç "></a>aaaå‡½æ•°-å‰–æå­—èŠ‚ç </h3><p>aaaå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">[generated bytecode <span class="keyword">for</span> <span class="attr">function</span>: aaa (<span class="number">0x3711a3bdfd31</span> &lt;<span class="title class_">SharedFunctionInfo</span> aaa&gt;)]</span><br><span class="line"><span class="title class_">Bytecode</span> <span class="attr">length</span>: <span class="number">91</span></span><br><span class="line"><span class="title class_">Parameter</span> count <span class="number">2</span></span><br><span class="line"><span class="title class_">Register</span> count <span class="number">7</span></span><br><span class="line"><span class="title class_">Frame</span> size <span class="number">56</span></span><br><span class="line"><span class="variable constant_">OSR</span> nesting <span class="attr">level</span>: <span class="number">0</span></span><br><span class="line"><span class="title class_">Bytecode</span> <span class="title class_">Age</span>: <span class="number">0</span></span><br><span class="line">  <span class="number">757</span> S&gt; <span class="number">0x3711a3be0cde</span> @    <span class="number">0</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">         <span class="number">0x3711a3be0ce1</span> @    <span class="number">3</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">  <span class="number">768</span> E&gt; <span class="number">0x3711a3be0ce2</span> @    <span class="number">4</span> : 2d f7 <span class="number">01</span> <span class="number">02</span>       <span class="title class_">LdaNamedProperty</span> r3, [<span class="number">1</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be0ce6</span> @    <span class="number">8</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">         <span class="number">0x3711a3be0ce7</span> @    <span class="number">9</span> : 0b f7             <span class="title class_">Ldar</span> r3</span><br><span class="line">  <span class="number">757</span> E&gt; <span class="number">0x3711a3be0ce9</span> @   <span class="number">11</span> : <span class="number">68</span> f7 <span class="number">03</span> <span class="number">01</span> <span class="number">04</span>    <span class="title class_">Construct</span> r3, a0-a0, [<span class="number">4</span>]</span><br><span class="line">         <span class="number">0x3711a3be0cee</span> @   <span class="number">16</span> : c3                <span class="title class_">Star0</span> </span><br><span class="line">  <span class="number">792</span> S&gt; <span class="number">0x3711a3be0cef</span> @   <span class="number">17</span> : 2d fa <span class="number">02</span> <span class="number">06</span>       <span class="title class_">LdaNamedProperty</span> r0, [<span class="number">2</span>], [<span class="number">6</span>]</span><br><span class="line">         <span class="number">0x3711a3be0cf3</span> @   <span class="number">21</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">         <span class="number">0x3711a3be0cf4</span> @   <span class="number">22</span> : 0d 2b             <span class="title class_">LdaSmi</span> [<span class="number">43</span>]</span><br><span class="line">  <span class="number">799</span> E&gt; <span class="number">0x3711a3be0cf6</span> @   <span class="number">24</span> : 6a f7 <span class="number">08</span>          <span class="title class_">TestEqual</span> r3, [<span class="number">8</span>]</span><br><span class="line">         <span class="number">0x3711a3be0cf9</span> @   <span class="number">27</span> : <span class="number">97</span> <span class="number">04</span>             <span class="title class_">JumpIfTrue</span> [<span class="number">4</span>] (<span class="number">0x3711a3be0cfd</span> @ <span class="number">31</span>)</span><br><span class="line">  <span class="number">806</span> S&gt; <span class="number">0x3711a3be0cfb</span> @   <span class="number">29</span> : <span class="number">12</span>                <span class="title class_">LdaFalse</span> </span><br><span class="line">  <span class="number">819</span> S&gt; <span class="number">0x3711a3be0cfc</span> @   <span class="number">30</span> : a8                <span class="title class_">Return</span> </span><br><span class="line">  <span class="number">835</span> S&gt; <span class="number">0x3711a3be0cfd</span> @   <span class="number">31</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d00</span> @   <span class="number">34</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">  <span class="number">846</span> E&gt; <span class="number">0x3711a3be0d01</span> @   <span class="number">35</span> : 2d f7 <span class="number">03</span> <span class="number">09</span>       <span class="title class_">LdaNamedProperty</span> r3, [<span class="number">3</span>], [<span class="number">9</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d05</span> @   <span class="number">39</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">         <span class="number">0x3711a3be0d06</span> @   <span class="number">40</span> : 0d 2b             <span class="title class_">LdaSmi</span> [<span class="number">43</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d08</span> @   <span class="number">42</span> : bf                <span class="title class_">Star4</span> </span><br><span class="line">         <span class="number">0x3711a3be0d09</span> @   <span class="number">43</span> : 0b f7             <span class="title class_">Ldar</span> r3</span><br><span class="line">  <span class="number">835</span> E&gt; <span class="number">0x3711a3be0d0b</span> @   <span class="number">45</span> : <span class="number">68</span> f7 f6 <span class="number">01</span> 0b    <span class="title class_">Construct</span> r3, r4-r4, [<span class="number">11</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d10</span> @   <span class="number">50</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line">  <span class="number">942</span> S&gt; <span class="number">0x3711a3be0d11</span> @   <span class="number">51</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d14</span> @   <span class="number">54</span> : bf                <span class="title class_">Star4</span> </span><br><span class="line">  <span class="number">949</span> E&gt; <span class="number">0x3711a3be0d15</span> @   <span class="number">55</span> : 2d f6 <span class="number">01</span> <span class="number">02</span>       <span class="title class_">LdaNamedProperty</span> r4, [<span class="number">1</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d19</span> @   <span class="number">59</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">         <span class="number">0x3711a3be0d1a</span> @   <span class="number">60</span> : <span class="number">13</span> <span class="number">04</span>             <span class="title class_">LdaConstant</span> [<span class="number">4</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d1c</span> @   <span class="number">62</span> : be                <span class="title class_">Star5</span> </span><br><span class="line">         <span class="number">0x3711a3be0d1d</span> @   <span class="number">63</span> : <span class="number">13</span> <span class="number">05</span>             <span class="title class_">LdaConstant</span> [<span class="number">5</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d1f</span> @   <span class="number">65</span> : bd                <span class="title class_">Star6</span> </span><br><span class="line">  <span class="number">949</span> E&gt; <span class="number">0x3711a3be0d20</span> @   <span class="number">66</span> : 5e f7 f6 f5 f4 0d <span class="title class_">CallProperty2</span> r3, r4, r5, r6, [<span class="number">13</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d26</span> @   <span class="number">72</span> : c1                <span class="title class_">Star2</span> </span><br><span class="line"> <span class="number">1056</span> S&gt; <span class="number">0x3711a3be0d27</span> @   <span class="number">73</span> : <span class="number">17</span> <span class="number">02</span>             <span class="title class_">LdaImmutableCurrentContextSlot</span> [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be0d29</span> @   <span class="number">75</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">         <span class="number">0x3711a3be0d2a</span> @   <span class="number">76</span> : <span class="number">19</span> fa f6          <span class="title class_">Mov</span> r0, r4</span><br><span class="line">         <span class="number">0x3711a3be0d2d</span> @   <span class="number">79</span> : <span class="number">19</span> f9 f5          <span class="title class_">Mov</span> r1, r5</span><br><span class="line">         <span class="number">0x3711a3be0d30</span> @   <span class="number">82</span> : <span class="number">19</span> f8 f4          <span class="title class_">Mov</span> r2, r6</span><br><span class="line"> <span class="number">1063</span> E&gt; <span class="number">0x3711a3be0d33</span> @   <span class="number">85</span> : 5f f7 f6 <span class="number">03</span> 0f    <span class="title class_">CallUndefinedReceiver</span> r3, r4-r6, [<span class="number">15</span>]</span><br><span class="line"> <span class="number">1087</span> S&gt; <span class="number">0x3711a3be0d38</span> @   <span class="number">90</span> : a8                <span class="title class_">Return</span> </span><br><span class="line"><span class="title class_">Constant</span> pool (size = <span class="number">6</span>)</span><br><span class="line"><span class="number">0x3711a3be0c69</span>: [<span class="title class_">FixedArray</span>] <span class="keyword">in</span> <span class="title class_">OldSpace</span></span><br><span class="line"> - <span class="attr">map</span>: <span class="number">0x2546cb1c12c1</span> &lt;<span class="title class_">Map</span>&gt;</span><br><span class="line"> - <span class="attr">length</span>: <span class="number">6</span></span><br><span class="line">           <span class="number">0</span>: <span class="number">0x3adf78836561</span> &lt;<span class="title class_">String</span>[<span class="number">6</span>]: #<span class="title class_">Buffer</span>&gt;</span><br><span class="line">           <span class="number">1</span>: <span class="number">0x2546cb1c4999</span> &lt;<span class="title class_">String</span>[<span class="number">4</span>]: #<span class="keyword">from</span>&gt;</span><br><span class="line">           <span class="number">2</span>: <span class="number">0x2546cb1c4d41</span> &lt;<span class="title class_">String</span>[<span class="number">6</span>]: #length&gt;</span><br><span class="line">           <span class="number">3</span>: <span class="number">0x3adf78836c31</span> &lt;<span class="title class_">String</span>[<span class="number">5</span>]: #alloc&gt;</span><br><span class="line">           <span class="number">4</span>: <span class="number">0x3711a3be0bb1</span> &lt;<span class="title class_">String</span>[<span class="number">86</span>]: #3edd7925cd6e04ab44f25bef57bc53bd20b74b8c11f893090fdcdfddad0709100100fe6a9230333234fbae&gt;</span><br><span class="line">           <span class="number">5</span>: <span class="number">0x3adf78838741</span> &lt;<span class="title class_">String</span>[<span class="number">3</span>]: #hex&gt;</span><br><span class="line"><span class="title class_">Handler</span> <span class="title class_">Table</span> (size = <span class="number">0</span>)</span><br><span class="line"><span class="title class_">Source</span> <span class="title class_">Position</span> <span class="title class_">Table</span> (size = <span class="number">38</span>)</span><br><span class="line"><span class="number">0x3711a3be0d41</span> &lt;<span class="title class_">ByteArray</span>[<span class="number">38</span>]&gt;</span><br></pre></td></tr></table></figure><p>ç”±äºä¸Šé¢çš„ç®€å•é“ºå«ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å¿«é€Ÿä¸”ç®€æ´åœ°åˆ†æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">LdaGlobal [0], [0]</span><br><span class="line">Star3  // r3 =Buffer  </span><br><span class="line">LdaNamedProperty r3, [1], [2]</span><br><span class="line">Star3  //r3=Buffer.from</span><br><span class="line">Ldar r3  //acc=r3=Buffer.from</span><br><span class="line">Construct r3, a0-a0, [4] //æ–‡æ¡£çš„æ„æ€æ˜¯åˆ›å»º r3 è¿™ä¸ªå‡½æ•° ï¼Œç„¶åå‚æ•°æ˜¯ a0</span><br><span class="line">Star0 //r0= new Buffer.from(a0)</span><br><span class="line">//çŒœæµ‹æ­¤å¤„çš„a0å°±æ˜¯mainä¼ è¿›æ¥çš„ç”¨æˆ·è¾“å…¥ã€‚å§‘ä¸”ç§°ä¸ºinputã€‚</span><br><span class="line">LdaNamedProperty r0, [2], [6]</span><br><span class="line">Star3 // r3= input.length</span><br><span class="line">LdaSmi [43] // acc=43</span><br><span class="line">TestEqual r3, [8]  // if input.length == 43</span><br><span class="line">JumpIfTrue [4] (0x3711a3be0cfd @ 31) //å¦‚æœè¿”å›True </span><br><span class="line">LdaFalse //acc=False</span><br><span class="line">Return //è¿”å›</span><br><span class="line">LdaGlobal [0], [0] // acc =Buffer</span><br><span class="line">Star3 //r3=acc=Buffer</span><br><span class="line"> 846 E&gt; 0x3711a3be0d01 @   35 : 2d f7 03 09       LdaNamedProperty r3, [3], [9]</span><br><span class="line">        0x3711a3be0d05 @   39 : c0                Star3 </span><br><span class="line">        0x3711a3be0d06 @   40 : 0d 2b             LdaSmi [43]</span><br><span class="line">        0x3711a3be0d08 @   42 : bf                Star4 </span><br><span class="line">        0x3711a3be0d09 @   43 : 0b f7             Ldar r3</span><br><span class="line"> 835 E&gt; 0x3711a3be0d0b @   45 : 68 f7 f6 01 0b    Construct r3, r4-r4, [11]</span><br><span class="line">        0x3711a3be0d10 @   50 : c2                Star1 </span><br><span class="line">//è¿™ä¸ªå‡½æ•° ç¿»è¯‘ä¸€ä¸‹å°±æ˜¯ r1=new Buffer.alloc(43)    </span><br><span class="line">LdaSmi [43]</span><br><span class="line">Star4  //r4 =Buffer</span><br><span class="line">LdaNamedProperty r4, [1], [2]</span><br><span class="line">Star3 //r3=Buffer.from</span><br><span class="line">LdaConstant [4]</span><br><span class="line">Star5 //r5 = &#x27;3edd7925cd6e04ab44f25bef57bc53bd20b74b8c11f893090fdcdfddad0709100100fe6a9230333234fbae&#x27;</span><br><span class="line">LdaConstant [5]</span><br><span class="line">Star6  r6 = hex</span><br><span class="line">CallProperty2 r3, r4, r5, r6, [13]</span><br><span class="line">Star2 //r2=Buffer.from(r5,hex)</span><br><span class="line">LdaImmutableCurrentContextSlot [2]</span><br><span class="line">Star3 //r3=å¤–éƒ¨å‡½æ•°</span><br><span class="line">Mov r0, r4 // r4=r0</span><br><span class="line">Mov r1, r5 // r5=r1</span><br><span class="line">Mov r2, r6 // r6=r2</span><br><span class="line">CallUndefinedReceiver r3, r4-r6, [15]</span><br><span class="line">Return  //return r3(r4,r5,r6)</span><br></pre></td></tr></table></figure><p>ç»è¿‡å‰–ææˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œaaaè¿™ä¸ªå‡½æ•°æ›´åƒä¸€ä¸ªåˆå§‹åŒ–çš„å‡½æ•°ï¼Œé‚£ä¹ˆçœ‹æ¥è¿™ä¸ªå¤–éƒ¨å‡½æ•°æ‰æ˜¯åŠ å¯†çš„å…³é”®</p><h3 id="cccå‡½æ•°-å‰–æå­—èŠ‚ç "><a href="#cccå‡½æ•°-å‰–æå­—èŠ‚ç " class="headerlink" title="cccå‡½æ•°-å‰–æå­—èŠ‚ç "></a>cccå‡½æ•°-å‰–æå­—èŠ‚ç </h3><p>cccå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">[generated bytecode <span class="keyword">for</span> <span class="attr">function</span>: ccc (<span class="number">0x3711a3bdfce1</span> &lt;<span class="title class_">SharedFunctionInfo</span> ccc&gt;)]</span><br><span class="line"><span class="title class_">Bytecode</span> <span class="attr">length</span>: <span class="number">188</span></span><br><span class="line"><span class="title class_">Parameter</span> count <span class="number">4</span></span><br><span class="line"><span class="title class_">Register</span> count <span class="number">4</span></span><br><span class="line"><span class="title class_">Frame</span> size <span class="number">32</span></span><br><span class="line"><span class="variable constant_">OSR</span> nesting <span class="attr">level</span>: <span class="number">0</span></span><br><span class="line"><span class="title class_">Bytecode</span> <span class="title class_">Age</span>: <span class="number">0</span></span><br><span class="line">  <span class="number">173</span> S&gt; <span class="number">0x3711a3be1216</span> @    <span class="number">0</span> : <span class="number">00</span> 0d aa <span class="number">00</span>       <span class="title class_">LdaSmi</span>.<span class="property">Wide</span> [<span class="number">170</span>]</span><br><span class="line">         <span class="number">0x3711a3be121a</span> @    <span class="number">4</span> : c3                <span class="title class_">Star0</span> </span><br><span class="line">  <span class="number">188</span> S&gt; <span class="number">0x3711a3be121b</span> @    <span class="number">5</span> : 0c                <span class="title class_">LdaZero</span> </span><br><span class="line">  <span class="number">189</span> E&gt; <span class="number">0x3711a3be121c</span> @    <span class="number">6</span> : <span class="number">23</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">StaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">  <span class="number">194</span> S&gt; <span class="number">0x3711a3be121f</span> @    <span class="number">9</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be1222</span> @   <span class="number">12</span> : c1                <span class="title class_">Star2</span> </span><br><span class="line">         <span class="number">0x3711a3be1223</span> @   <span class="number">13</span> : 0d <span class="number">13</span>             <span class="title class_">LdaSmi</span> [<span class="number">19</span>]</span><br><span class="line">  <span class="number">194</span> E&gt; <span class="number">0x3711a3be1225</span> @   <span class="number">15</span> : 6c f8 <span class="number">04</span>          <span class="title class_">TestLessThan</span> r2, [<span class="number">4</span>]</span><br><span class="line">         <span class="number">0x3711a3be1228</span> @   <span class="number">18</span> : <span class="number">98</span> 2a             <span class="title class_">JumpIfFalse</span> [<span class="number">42</span>] (<span class="number">0x3711a3be1252</span> @ <span class="number">60</span>)</span><br><span class="line">  <span class="number">274</span> S&gt; <span class="number">0x3711a3be122a</span> @   <span class="number">20</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">  <span class="number">273</span> E&gt; <span class="number">0x3711a3be122d</span> @   <span class="number">23</span> : 2f <span class="number">03</span> <span class="number">06</span>          <span class="title class_">LdaKeyedProperty</span> a0, [<span class="number">6</span>]</span><br><span class="line">  <span class="number">265</span> E&gt; <span class="number">0x3711a3be1230</span> @   <span class="number">26</span> : <span class="number">38</span> fa <span class="number">08</span>          <span class="title class_">Add</span> r0, [<span class="number">8</span>]</span><br><span class="line">  <span class="number">277</span> E&gt; <span class="number">0x3711a3be1233</span> @   <span class="number">29</span> : <span class="number">44</span> <span class="number">33</span> <span class="number">09</span>          <span class="title class_">AddSmi</span> [<span class="number">51</span>], [<span class="number">9</span>]</span><br><span class="line">  <span class="number">285</span> E&gt; <span class="number">0x3711a3be1236</span> @   <span class="number">32</span> : <span class="number">00</span> 4c ff <span class="number">00</span> <span class="number">05</span> <span class="number">00</span> <span class="title class_">BitwiseAndSmi</span>.<span class="property">Wide</span> [<span class="number">255</span>], [<span class="number">5</span>]</span><br><span class="line">         <span class="number">0x3711a3be123c</span> @   <span class="number">38</span> : c3                <span class="title class_">Star0</span> </span><br><span class="line">  <span class="number">305</span> S&gt; <span class="number">0x3711a3be123d</span> @   <span class="number">39</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be1240</span> @   <span class="number">42</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">         <span class="number">0x3711a3be1241</span> @   <span class="number">43</span> : 0b fa             <span class="title class_">Ldar</span> r0</span><br><span class="line">  <span class="number">308</span> E&gt; <span class="number">0x3711a3be1243</span> @   <span class="number">45</span> : <span class="number">34</span> <span class="number">04</span> f7 0a       <span class="title class_">StaKeyedProperty</span> a1, r3, [<span class="number">10</span>]</span><br><span class="line">  <span class="number">200</span> S&gt; <span class="number">0x3711a3be1247</span> @   <span class="number">49</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be124a</span> @   <span class="number">52</span> : <span class="number">50</span> 0c             <span class="title class_">Inc</span> [<span class="number">12</span>]</span><br><span class="line">  <span class="number">200</span> E&gt; <span class="number">0x3711a3be124c</span> @   <span class="number">54</span> : <span class="number">23</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">StaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">  <span class="number">183</span> E&gt; <span class="number">0x3711a3be124f</span> @   <span class="number">57</span> : <span class="number">88</span> <span class="number">30</span> <span class="number">00</span>          <span class="title class_">JumpLoop</span> [<span class="number">48</span>], [<span class="number">0</span>] (<span class="number">0x3711a3be121f</span> @ <span class="number">9</span>)</span><br><span class="line">  <span class="number">337</span> S&gt; <span class="number">0x3711a3be1252</span> @   <span class="number">60</span> : 0d <span class="number">55</span>             <span class="title class_">LdaSmi</span> [<span class="number">85</span>]</span><br><span class="line">         <span class="number">0x3711a3be1254</span> @   <span class="number">62</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line">  <span class="number">352</span> S&gt; <span class="number">0x3711a3be1255</span> @   <span class="number">63</span> : 0d <span class="number">13</span>             <span class="title class_">LdaSmi</span> [<span class="number">19</span>]</span><br><span class="line">  <span class="number">353</span> E&gt; <span class="number">0x3711a3be1257</span> @   <span class="number">65</span> : <span class="number">23</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">StaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">  <span class="number">359</span> S&gt; <span class="number">0x3711a3be125a</span> @   <span class="number">68</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be125d</span> @   <span class="number">71</span> : c1                <span class="title class_">Star2</span> </span><br><span class="line">         <span class="number">0x3711a3be125e</span> @   <span class="number">72</span> : 0d 2b             <span class="title class_">LdaSmi</span> [<span class="number">43</span>]</span><br><span class="line">  <span class="number">359</span> E&gt; <span class="number">0x3711a3be1260</span> @   <span class="number">74</span> : 6c f8 0d          <span class="title class_">TestLessThan</span> r2, [<span class="number">13</span>]</span><br><span class="line">         <span class="number">0x3711a3be1263</span> @   <span class="number">77</span> : <span class="number">98</span> <span class="number">34</span>             <span class="title class_">JumpIfFalse</span> [<span class="number">52</span>] (<span class="number">0x3711a3be1297</span> @ <span class="number">129</span>)</span><br><span class="line">  <span class="number">383</span> S&gt; <span class="number">0x3711a3be1265</span> @   <span class="number">79</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be1268</span> @   <span class="number">82</span> : c0                <span class="title class_">Star3</span> </span><br><span class="line">  <span class="number">403</span> E&gt; <span class="number">0x3711a3be1269</span> @   <span class="number">83</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">  <span class="number">402</span> E&gt; <span class="number">0x3711a3be126c</span> @   <span class="number">86</span> : 2f <span class="number">03</span> <span class="number">10</span>          <span class="title class_">LdaKeyedProperty</span> a0, [<span class="number">16</span>]</span><br><span class="line">  <span class="number">394</span> E&gt; <span class="number">0x3711a3be126f</span> @   <span class="number">89</span> : <span class="number">38</span> f9 0f          <span class="title class_">Add</span> r1, [<span class="number">15</span>]</span><br><span class="line">  <span class="number">407</span> E&gt; <span class="number">0x3711a3be1272</span> @   <span class="number">92</span> : <span class="number">00</span> 4c ff <span class="number">00</span> 0e <span class="number">00</span> <span class="title class_">BitwiseAndSmi</span>.<span class="property">Wide</span> [<span class="number">255</span>], [<span class="number">14</span>]</span><br><span class="line">  <span class="number">386</span> E&gt; <span class="number">0x3711a3be1278</span> @   <span class="number">98</span> : <span class="number">34</span> <span class="number">04</span> f7 <span class="number">12</span>       <span class="title class_">StaKeyedProperty</span> a1, r3, [<span class="number">18</span>]</span><br><span class="line">  <span class="number">442</span> S&gt; <span class="number">0x3711a3be127c</span> @  <span class="number">102</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">  <span class="number">441</span> E&gt; <span class="number">0x3711a3be127f</span> @  <span class="number">105</span> : 2f <span class="number">04</span> <span class="number">16</span>          <span class="title class_">LdaKeyedProperty</span> a1, [<span class="number">22</span>]</span><br><span class="line">  <span class="number">436</span> E&gt; <span class="number">0x3711a3be1282</span> @  <span class="number">108</span> : 3f f9 <span class="number">15</span>          <span class="title class_">BitwiseXor</span> r1, [<span class="number">21</span>]</span><br><span class="line">  <span class="number">446</span> E&gt; <span class="number">0x3711a3be1285</span> @  <span class="number">111</span> : <span class="number">00</span> 4c ff <span class="number">00</span> <span class="number">14</span> <span class="number">00</span> <span class="title class_">BitwiseAndSmi</span>.<span class="property">Wide</span> [<span class="number">255</span>], [<span class="number">20</span>]</span><br><span class="line">         <span class="number">0x3711a3be128b</span> @  <span class="number">117</span> : c2                <span class="title class_">Star1</span> </span><br><span class="line">  <span class="number">365</span> S&gt; <span class="number">0x3711a3be128c</span> @  <span class="number">118</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be128f</span> @  <span class="number">121</span> : <span class="number">50</span> <span class="number">18</span>             <span class="title class_">Inc</span> [<span class="number">24</span>]</span><br><span class="line">  <span class="number">365</span> E&gt; <span class="number">0x3711a3be1291</span> @  <span class="number">123</span> : <span class="number">23</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">StaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">  <span class="number">347</span> E&gt; <span class="number">0x3711a3be1294</span> @  <span class="number">126</span> : <span class="number">88</span> 3a <span class="number">00</span>          <span class="title class_">JumpLoop</span> [<span class="number">58</span>], [<span class="number">0</span>] (<span class="number">0x3711a3be125a</span> @ <span class="number">68</span>)</span><br><span class="line">  <span class="number">531</span> S&gt; <span class="number">0x3711a3be1297</span> @  <span class="number">129</span> : <span class="number">00</span> 0d 9f <span class="number">00</span>       <span class="title class_">LdaSmi</span>.<span class="property">Wide</span> [<span class="number">159</span>]</span><br><span class="line">  <span class="number">540</span> E&gt; <span class="number">0x3711a3be129b</span> @  <span class="number">133</span> : 6a f9 <span class="number">19</span>          <span class="title class_">TestEqual</span> r1, [<span class="number">25</span>]</span><br><span class="line">         <span class="number">0x3711a3be129e</span> @  <span class="number">136</span> : <span class="number">98</span> <span class="number">32</span>             <span class="title class_">JumpIfFalse</span> [<span class="number">50</span>] (<span class="number">0x3711a3be12d0</span> @ <span class="number">186</span>)</span><br><span class="line">  <span class="number">563</span> S&gt; <span class="number">0x3711a3be12a0</span> @  <span class="number">138</span> : 0c                <span class="title class_">LdaZero</span> </span><br><span class="line">  <span class="number">564</span> E&gt; <span class="number">0x3711a3be12a1</span> @  <span class="number">139</span> : <span class="number">23</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">StaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">  <span class="number">569</span> S&gt; <span class="number">0x3711a3be12a4</span> @  <span class="number">142</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be12a7</span> @  <span class="number">145</span> : c1                <span class="title class_">Star2</span> </span><br><span class="line">         <span class="number">0x3711a3be12a8</span> @  <span class="number">146</span> : 0d 2b             <span class="title class_">LdaSmi</span> [<span class="number">43</span>]</span><br><span class="line">  <span class="number">569</span> E&gt; <span class="number">0x3711a3be12aa</span> @  <span class="number">148</span> : 6c f8 1a          <span class="title class_">TestLessThan</span> r2, [<span class="number">26</span>]</span><br><span class="line">         <span class="number">0x3711a3be12ad</span> @  <span class="number">151</span> : <span class="number">98</span> <span class="number">21</span>             <span class="title class_">JumpIfFalse</span> [<span class="number">33</span>] (<span class="number">0x3711a3be12ce</span> @ <span class="number">184</span>)</span><br><span class="line">  <span class="number">604</span> S&gt; <span class="number">0x3711a3be12af</span> @  <span class="number">153</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">  <span class="number">603</span> E&gt; <span class="number">0x3711a3be12b2</span> @  <span class="number">156</span> : 2f <span class="number">05</span> 1b          <span class="title class_">LdaKeyedProperty</span> a2, [<span class="number">27</span>]</span><br><span class="line">         <span class="number">0x3711a3be12b5</span> @  <span class="number">159</span> : c1                <span class="title class_">Star2</span> </span><br><span class="line">  <span class="number">614</span> E&gt; <span class="number">0x3711a3be12b6</span> @  <span class="number">160</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">  <span class="number">613</span> E&gt; <span class="number">0x3711a3be12b9</span> @  <span class="number">163</span> : 2f <span class="number">04</span> 1d          <span class="title class_">LdaKeyedProperty</span> a1, [<span class="number">29</span>]</span><br><span class="line">  <span class="number">607</span> E&gt; <span class="number">0x3711a3be12bc</span> @  <span class="number">166</span> : 6a f8 1f          <span class="title class_">TestEqual</span> r2, [<span class="number">31</span>]</span><br><span class="line">         <span class="number">0x3711a3be12bf</span> @  <span class="number">169</span> : <span class="number">97</span> <span class="number">04</span>             <span class="title class_">JumpIfTrue</span> [<span class="number">4</span>] (<span class="number">0x3711a3be12c3</span> @ <span class="number">173</span>)</span><br><span class="line">  <span class="number">636</span> S&gt; <span class="number">0x3711a3be12c1</span> @  <span class="number">171</span> : <span class="number">12</span>                <span class="title class_">LdaFalse</span> </span><br><span class="line">  <span class="number">649</span> S&gt; <span class="number">0x3711a3be12c2</span> @  <span class="number">172</span> : a8                <span class="title class_">Return</span> </span><br><span class="line">  <span class="number">575</span> S&gt; <span class="number">0x3711a3be12c3</span> @  <span class="number">173</span> : <span class="number">21</span> <span class="number">00</span> <span class="number">02</span>          <span class="title class_">LdaGlobal</span> [<span class="number">0</span>], [<span class="number">2</span>]</span><br><span class="line">         <span class="number">0x3711a3be12c6</span> @  <span class="number">176</span> : <span class="number">50</span> <span class="number">20</span>             <span class="title class_">Inc</span> [<span class="number">32</span>]</span><br><span class="line">  <span class="number">575</span> E&gt; <span class="number">0x3711a3be12c8</span> @  <span class="number">178</span> : <span class="number">23</span> <span class="number">00</span> <span class="number">00</span>          <span class="title class_">StaGlobal</span> [<span class="number">0</span>], [<span class="number">0</span>]</span><br><span class="line">  <span class="number">558</span> E&gt; <span class="number">0x3711a3be12cb</span> @  <span class="number">181</span> : <span class="number">88</span> <span class="number">27</span> <span class="number">00</span>          <span class="title class_">JumpLoop</span> [<span class="number">39</span>], [<span class="number">0</span>] (<span class="number">0x3711a3be12a4</span> @ <span class="number">142</span>)</span><br><span class="line">  <span class="number">682</span> S&gt; <span class="number">0x3711a3be12ce</span> @  <span class="number">184</span> : <span class="number">11</span>                <span class="title class_">LdaTrue</span> </span><br><span class="line">  <span class="number">694</span> S&gt; <span class="number">0x3711a3be12cf</span> @  <span class="number">185</span> : a8                <span class="title class_">Return</span> </span><br><span class="line">  <span class="number">705</span> S&gt; <span class="number">0x3711a3be12d0</span> @  <span class="number">186</span> : <span class="number">12</span>                <span class="title class_">LdaFalse</span> </span><br><span class="line">  <span class="number">718</span> S&gt; <span class="number">0x3711a3be12d1</span> @  <span class="number">187</span> : a8                <span class="title class_">Return</span> </span><br><span class="line"><span class="title class_">Constant</span> pool (size = <span class="number">1</span>)</span><br><span class="line"><span class="number">0x3711a3be11c9</span>: [<span class="title class_">FixedArray</span>] <span class="keyword">in</span> <span class="title class_">OldSpace</span></span><br><span class="line"> - <span class="attr">map</span>: <span class="number">0x2546cb1c12c1</span> &lt;<span class="title class_">Map</span>&gt;</span><br><span class="line"> - <span class="attr">length</span>: <span class="number">1</span></span><br><span class="line">           <span class="number">0</span>: <span class="number">0x2546cb1c9159</span> &lt;<span class="title class_">String</span>[<span class="number">1</span>]: #i&gt;</span><br><span class="line"><span class="title class_">Handler</span> <span class="title class_">Table</span> (size = <span class="number">0</span>)</span><br><span class="line"><span class="title class_">Source</span> <span class="title class_">Position</span> <span class="title class_">Table</span> (size = <span class="number">119</span>)</span><br><span class="line"><span class="number">0x3711a3be12d9</span> &lt;<span class="title class_">ByteArray</span>[<span class="number">119</span>]&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">LdaSmi.Wide [170]</span><br><span class="line">Star0 //r0=170 </span><br><span class="line">LdaZero //acc=0</span><br><span class="line">StaGlobal [0], [0]</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">Star2 //r2=i</span><br><span class="line">LdaSmi [19]//acc=19</span><br><span class="line">TestLessThan r2, [4] // if i &lt;19</span><br><span class="line">JumpIfFalse [42] (0x3711a3be1252 @ 60) // å¦‚æœè¿”å›False å°±è·³åˆ°60</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">LdaKeyedProperty a0,[6] //acc=a0[i]</span><br><span class="line">Add r0, [8]//acc+=r0</span><br><span class="line">AddSmi [51], [9] //acc+=51</span><br><span class="line">BitwiseAndSmi.Wide [255], [5] //acc&amp;=0xff</span><br><span class="line">Star0 //r0=acc</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">Star3  //r3=i</span><br><span class="line">Ldar r0 //acc=r0</span><br><span class="line">StaKeyedProperty a1, r3, [10] //è¿™ä¸ªå°±ç±»ä¼¼äºpythoné‡Œé¢çš„é”®å€¼å¯¹ a1[a3]=acc ï¼ˆå³a1[i]=accï¼‰</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">Inc [12]//i+=1</span><br><span class="line">StaGlobal [0], [0]</span><br><span class="line">JumpLoop [48], [0] (0x3711a3be121f @ 9)//åˆ°è¿™é‡Œå½¢æˆç¬¬ä¸€ä¸ªå¾ªç¯ä½“</span><br><span class="line">ç»è¿‡19æ¬¡åŠ å¯†ä¹‹åå¼€å§‹æ–°çš„å¾ªç¯ä½“</span><br><span class="line">LdaSmi [85]</span><br><span class="line">Star1//r1=85 </span><br><span class="line">LdaSmi [19]</span><br><span class="line">StaGlobal [0], [0] //i=19</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">Star2 //r2=i</span><br><span class="line">LdaSmi [43]</span><br><span class="line">estLessThan r2, [13]</span><br><span class="line">JumpIfFalse [52] (0x3711a3be1297 @ 129)//if i&lt;43 å¦‚æœè¿”å›False jmp 129</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">Star3  //r3=i</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">LdaKeyedProperty a0, [16] //acc=a0[i]</span><br><span class="line">Add r1, [15]// acc+=r1</span><br><span class="line">BitwiseAndSmi.Wide [255], [14] //acc&amp;=0xff</span><br><span class="line">StaKeyedProperty a1, r3, [18] //a1[r3]=acc</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">LdaKeyedProperty a1, [22] //acc=a1[i]</span><br><span class="line">BitwiseXor r1, [21] //acc^=r1</span><br><span class="line">BitwiseAndSmi.Wide [255], [20] // acc &amp;= 0xff</span><br><span class="line">Star1  //r1=acc</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">Inc [24] //i+=1</span><br><span class="line">StaGlobal [0], [0]</span><br><span class="line">JumpLoop [58], [0] (0x3711a3be125a @ 68) //åˆ°è¿™é‡Œç¬¬äºŒä¸ªå¾ªç¯ä½“ç»“æŸ</span><br><span class="line">LdaSmi.Wide [159]</span><br><span class="line">TestEqual r1, [25]</span><br><span class="line">JumpIfFalse [50] (0x3711a3be12d0 @ 186)// if i&lt;159 </span><br><span class="line">LdaZero  //acc=0</span><br><span class="line">StaGlobal [0], [0]</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">Star2 //r2=i</span><br><span class="line">LdaSmi [43]</span><br><span class="line">TestLessThan r2, [26]</span><br><span class="line">JumpIfFalse [33] (0x3711a3be12ce @ 184) // if r2&gt;43  return False</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">LdaKeyedProperty a2, [27]</span><br><span class="line">Star2 //r2=a2[i]</span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">LdaKeyedProperty a1, [29]</span><br><span class="line">TestEqual r2, [31] //if(a1[i]==a2[i])  ä¸ç›¸ç­‰ return False</span><br><span class="line">JumpIfTrue [4] (0x3711a3be12c3 @ 173)</span><br><span class="line">LdaFalse </span><br><span class="line">Return </span><br><span class="line">LdaGlobal [0], [2]</span><br><span class="line">Inc [32] //i+=1</span><br><span class="line">StaGlobal [0], [0]</span><br><span class="line">JumpLoop [39], [0] (0x3711a3be12a4 @ 142) //ç»“æŸå¾ªç¯</span><br></pre></td></tr></table></figure><h3 id="åŠ å¯†å‡½æ•°-å®ç°"><a href="#åŠ å¯†å‡½æ•°-å®ç°" class="headerlink" title="åŠ å¯†å‡½æ•°-å®ç°"></a>åŠ å¯†å‡½æ•°-å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">end=<span class="string">&#x27;3edd7925cd6e04ab44f25bef57bc53bd20b74b8c11f893090fdcdfddad0709100100fe6a9230333234fbae&#x27;</span></span><br><span class="line">r0 = <span class="number">170</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">43</span>): </span><br><span class="line">    dst=<span class="built_in">int</span>(end[<span class="number">2</span>*i:<span class="number">2</span>*i+<span class="number">2</span>],<span class="number">16</span>)</span><br><span class="line">    <span class="built_in">input</span>[i]+=r0</span><br><span class="line">    <span class="built_in">input</span>[i]+=<span class="number">51</span></span><br><span class="line">    <span class="built_in">input</span>[i]&amp;=<span class="number">0xff</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">input</span>[i] == dst:</span><br><span class="line">        r0=<span class="built_in">input</span>[i]</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">r1 = <span class="number">85</span>        </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">19</span>,<span class="number">43</span>):</span><br><span class="line">    dst=<span class="built_in">int</span>(end[<span class="number">2</span>*i:<span class="number">2</span>*i+<span class="number">2</span>],<span class="number">16</span>)</span><br><span class="line">    <span class="built_in">input</span>[i]+=r1</span><br><span class="line">    <span class="built_in">input</span>[i]&amp;=<span class="number">0xff</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">input</span>[i] == dst:</span><br><span class="line">        r1=(<span class="built_in">input</span>[i]^r1)&amp;<span class="number">0xff</span></span><br><span class="line">        <span class="keyword">break</span>  </span><br></pre></td></tr></table></figure><h3 id="è§£å¯†"><a href="#è§£å¯†" class="headerlink" title="è§£å¯†"></a>è§£å¯†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">end=<span class="string">&#x27;3edd7925cd6e04ab44f25bef57bc53bd20b74b8c11f893090fdcdfddad0709100100fe6a9230333234fbae&#x27;</span></span><br><span class="line">r0 = <span class="number">170</span></span><br><span class="line">r1 = <span class="number">85</span></span><br><span class="line">flag=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">19</span>): </span><br><span class="line">    dst=<span class="built_in">int</span>(end[<span class="number">2</span>*i:<span class="number">2</span>*i+<span class="number">2</span>],<span class="number">16</span>)</span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">128</span>):</span><br><span class="line">     acc =ch</span><br><span class="line">     acc+=r0</span><br><span class="line">     acc+=<span class="number">51</span></span><br><span class="line">     acc&amp;=<span class="number">0xff</span></span><br><span class="line">     <span class="keyword">if</span> acc == dst:</span><br><span class="line">        flag+=<span class="built_in">chr</span>(ch)</span><br><span class="line">        r0=acc</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">r1=<span class="number">85</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">19</span>,<span class="number">43</span>): </span><br><span class="line">    dst=<span class="built_in">int</span>(end[<span class="number">2</span>*i:<span class="number">2</span>*i+<span class="number">2</span>],<span class="number">16</span>)</span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">128</span>):</span><br><span class="line">     acc =ch</span><br><span class="line">     acc+=r1</span><br><span class="line">     acc&amp;=<span class="number">0xff</span></span><br><span class="line">     <span class="keyword">if</span> acc == dst:</span><br><span class="line">        flag+=<span class="built_in">chr</span>(ch)</span><br><span class="line">        r1=(acc^r1)&amp;<span class="number">0xff</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(flag)     </span><br><span class="line"><span class="comment">#å¾—åˆ°FLAG:aliyunctf&#123;6a52d70da780cfe7f7218897535a4f61&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¤ç°æœ¬é¢˜ä¸»è¦æ˜¯ä¸ºäº†å­¦ä¹ jså­—èŠ‚ç ï¼Œè‹¥æœ‰ä¸è¶³ä¹‹å¤„ï¼Œè¯·å„ä½å¸ˆå‚…å¤šå¤šæŒ‡å‡º&lt;/p&gt;
&lt;p&gt;V8 æ˜¯ Google å¼€å‘çš„å¼€æº JavaScript å¼•æ“ã€‚ Chromeã€Node.jså’Œè®¸å¤šå…¶ä»–åº”ç”¨ç¨‹åºéƒ½åœ¨ä½¿ç”¨ V8ã€‚&lt;br&gt;å¦‚æœåªå‘å¸ƒV8å¼•æ“ç¼–è¯‘åçš„å­—èŠ‚ç ï¼Œå°±å¯ä»¥ä¿æŠ¤æºç ã€‚&lt;/p</summary>
      
    
    
    
    <category term="jså­—èŠ‚ç " scheme="https://5m10v3.github.io/categories/js%E5%AD%97%E8%8A%82%E7%A0%81/"/>
    
    
    <category term="å­—èŠ‚ç " scheme="https://5m10v3.github.io/tags/%E5%AD%97%E8%8A%82%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Windowså†…æ ¸é©±åŠ¨å­¦ä¹ (å…«)</title>
    <link href="https://5m10v3.github.io/2024/04/14/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%AD%A6%E4%B9%A0(%E5%85%AB)/"/>
    <id>https://5m10v3.github.io/2024/04/14/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%AD%A6%E4%B9%A0(%E5%85%AB)/</id>
    <published>2024-04-13T16:00:00.000Z</published>
    <updated>2024-06-09T09:16:50.236Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€å•é€šä¿¡"><a href="#ç®€å•é€šä¿¡" class="headerlink" title="ç®€å•é€šä¿¡"></a>ç®€å•é€šä¿¡</h2><p>è¿™ç¯‡æ–‡ç« ä¸»è¦å®ç°å†…æ ¸é©±åŠ¨å’Œåº”ç”¨å±‚ä¹‹é—´çš„é€šä¿¡ï¼Œé€šä¿¡æ˜¯é©±åŠ¨å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡é€šä¿¡å¯ä»¥å®ç°é©±åŠ¨å’Œåº”ç”¨å±‚ä¹‹é—´çš„æ•°æ®äº¤æ¢å’Œæ§åˆ¶å‘½ä»¤ä¼ é€’ç­‰åŠŸèƒ½</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ntifs.h&gt;</span></span></span><br><span class="line">NTSTATUS <span class="title function_">DriverUnload</span><span class="params">(PDRIVER_OBJECT pDriverObject)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆ é™¤ç¬¦å·é“¾æ¥</span></span><br><span class="line">UNICODE_STRING uLinkName;</span><br><span class="line">RtlInitUnicodeString(&amp;uLinkName, LINK_NAME);</span><br><span class="line">IoDeleteSymbolicLink(&amp;uLinkName);</span><br><span class="line">IoDeleteDevice(pDriverObject-&gt;DeviceObject);</span><br><span class="line">    DbgPrintEx(<span class="number">77</span>,<span class="number">0</span>,<span class="string">&quot;Unload success!\r\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">NTSTATUS <span class="title function_">DriverEntry</span><span class="params">(PDRIVER_OBJECT pDriverObject,PUNICODE_STRING pReg)</span></span><br><span class="line">&#123;</span><br><span class="line">    pDriverObject-&gt;DriverUnload=DriverUnload;</span><br><span class="line">    <span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªé©±åŠ¨ç¨‹åºæœ€åŸºæœ¬çš„æ¡†æ¶,æ¥ä¸‹æ¥æˆ‘ä»¬è¦é€æ­¥åˆ›å»ºIOé€šä¿¡</p><p>æˆ‘ä»¬è¦å…ˆå®šä¹‰æˆ‘ä»¬çš„é©±åŠ¨åç§°å’Œç¬¦å·é“¾æ¥åç§°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> DEVICE_NAME <span class="string">L&quot;\\device\\My_Driver&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LINK_NAME <span class="string">L&quot;\\dosDevices\\My_Device&quot;</span></span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰é©±åŠ¨åç§°å’Œç¬¦å·é“¾æ¥åç§°</span><br><span class="line">UNICODE_STRING usDriverName=&#123;0&#125;;</span><br><span class="line">UNICODE_STRING usLinkName=&#123;0&#125;;</span><br><span class="line">//å®šä¹‰ä¸€ä¸ªçŠ¶æ€</span><br><span class="line">NTSTATUS ntStatus=0;</span><br><span class="line">//å®šä¹‰è®¾å¤‡åç§°</span><br><span class="line">PDEVICE_OBJECT pDeviceObject =NULL;</span><br><span class="line">//åˆå§‹åŒ–å­—ç¬¦ä¸²</span><br><span class="line">RtlInitUnicodeString(&amp;usDriverName,DEVICE_NAME);</span><br><span class="line">RtlInitUnicodeString(&amp;usLinkName,LINK_NAME);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*IoCreateDevice(</span><br><span class="line">    _In_  PDRIVER_OBJECT DriverObject, //é©±åŠ¨å¯¹è±¡</span><br><span class="line">    _In_  ULONG DeviceExtensionSize,//é»˜è®¤0</span><br><span class="line">    _In_opt_ PUNICODE_STRING DeviceName,  //é©±åŠ¨çš„åç§°</span><br><span class="line">    _In_  DEVICE_TYPE DeviceType,//å¡«FILE_DEVICE_UNKNOWN</span><br><span class="line">    _In_  ULONG DeviceCharacteristics, //å¡«0</span><br><span class="line">    _In_  BOOLEAN Exclusive,//å¡«True</span><br><span class="line">    PDEVICE_OBJECT *DeviceObject //è®¾å¤‡å¯¹è±¡</span><br><span class="line">    );*/</span><br><span class="line">//åˆ›å»ºè®¾å¤‡å¯¹è±¡</span><br><span class="line">ntStatus=IoCreateDevice(pDriverObject,0,&amp;usDriverName,FILE_DEVICE_UNKNOWN,0,TRUE,&amp;pDeviceObject);</span><br><span class="line">if(!NT_SUCCESS(ntStatus))</span><br><span class="line">&#123;</span><br><span class="line">  DbgPrintEx(77,0,&quot;IoCreateDevice Failed:%wZ\r\n&quot;);</span><br><span class="line">  return ntStatus;</span><br><span class="line">&#125;</span><br><span class="line">//è®¾ç½®é€šè®¯æ¨¡å¼</span><br><span class="line">pDeviceObject-&gt;Flags |= DO_BUFFERED_IO ;//è¿™ç§æ¨¡å¼æ˜¯åŸºäºç¼“å†²åŒºçš„</span><br><span class="line">//åˆ›å»ºç¬¦å·é“¾æ¥</span><br><span class="line">ntStatus = IoCreateSymbolicLink(&amp;usLinkName,&amp;usDriverName)</span><br><span class="line">/*</span><br><span class="line">#define DO_VERIFY_VOLUME                    0x00000002      </span><br><span class="line">#define DO_BUFFERED_IO                      0x00000004      </span><br><span class="line">#define DO_EXCLUSIVE                        0x00000008      </span><br><span class="line">#define DO_DIRECT_IO                        0x00000010      </span><br><span class="line">#define DO_MAP_IO_BUFFER                    0x00000020      </span><br><span class="line">#define DO_DEVICE_HAS_NAME                  0x00000040      </span><br><span class="line">#define DO_DEVICE_INITIALIZING              0x00000080      </span><br><span class="line">#define DO_SYSTEM_BOOT_PARTITION            0x00000100      </span><br><span class="line">#define DO_LONG_TERM_REQUESTS               0x00000200      </span><br><span class="line">#define DO_NEVER_LAST_DEVICE                0x00000400      </span><br><span class="line">#define DO_SHUTDOWN_REGISTERED              0x00000800      </span><br><span class="line">#define DO_BUS_ENUMERATED_DEVICE            0x00001000      </span><br><span class="line">#define DO_POWER_PAGABLE                    0x00002000      </span><br><span class="line">#define DO_POWER_INRUSH                     0x00004000      </span><br><span class="line">#define DO_LOW_PRIORITY_FILESYSTEM          0x00010000      </span><br><span class="line">#define DO_SUPPORTS_PERSISTENT_ACLS         0x00020000      </span><br><span class="line">#define DO_SUPPORTS_TRANSACTIONS            0x00040000      </span><br><span class="line">#define DO_FORCE_NEITHER_IO                 0x00080000      </span><br><span class="line">#define DO_VOLUME_DEVICE_OBJECT             0x00100000        </span><br><span class="line">#define DO_SYSTEM_SYSTEM_PARTITION          0x00200000      </span><br><span class="line">#define DO_SYSTEM_CRITICAL_PARTITION        0x00400000      </span><br><span class="line">#define DO_DISALLOW_EXECUTE                 0x00800000      </span><br><span class="line">#define DO_DEVICE_TO_BE_RESET               0x04000000      </span><br><span class="line">#define DO_DEVICE_IRP_REQUIRES_EXTENSION    0x08000000      </span><br><span class="line">#define DO_DAX_VOLUME                       0x10000000      </span><br><span class="line">#define DO_BOOT_CRITICAL                    0x20000000  </span><br><span class="line">*/    </span><br></pre></td></tr></table></figure><p>æ´¾é£å‡½æ•°æ˜¯é©±åŠ¨ç¨‹åºä¸­ç”¨æ¥å¤„ç†<code>I/O</code>è¯·æ±‚çš„æ ¸å¿ƒå‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé©±åŠ¨ç¨‹åºé€šè¿‡å®ç°ä¸€ç»„æ´¾é£å‡½æ•°æ¥å¤„ç†<code>I/O</code>è¯·æ±‚ã€‚è¿™äº›æ´¾é£å‡½æ•°åŒ…æ‹¬ï¼š</p><ul><li>IRP_MJ_CREATEï¼šç”¨äºå¤„ç†åˆ›å»ºè¯·æ±‚ã€‚</li><li>IRP_MJ_READï¼šç”¨äºå¤„ç†è¯»è¯·æ±‚ã€‚</li><li>IRP_MJ_WRITEï¼šç”¨äºå¤„ç†å†™è¯·æ±‚ã€‚</li><li>IRP_MJ_DEVICE_CONTROLï¼šç”¨äºå¤„ç†è®¾å¤‡æ§åˆ¶è¯·æ±‚ç­‰ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pDriverObject-&gt;MajorFunction[IRP_MJ_CREATE]=DispatchCreate;</span><br><span class="line">pDriverObject-&gt;MajorFunction[IRP_MJ_READ]=DispatchRead;</span><br><span class="line">pDriverObject-&gt;MajorFunction[IRP_MJ_WRITE]=DispatchWrite;</span><br><span class="line">pDriverObject-&gt;MajorFunction[IRP_MJ_DEVICE_CONTROL]=DispatchIoctrl;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">NTSTATUS  <span class="title function_">DispatchCommon</span><span class="params">(</span></span><br><span class="line"><span class="params">_In_ <span class="keyword">struct</span> _DEVICE_OBJECT* DeviceObject,</span></span><br><span class="line"><span class="params">_Inout_ <span class="keyword">struct</span> _IRP* Irp</span></span><br><span class="line"><span class="params">)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®Irpå¤„ç†æˆåŠŸ</span></span><br><span class="line">    Irp-&gt;IoStatus.Status =STATUS_SUCCESS;</span><br><span class="line">    <span class="comment">//è®¾ç½®è¿”å›ä¿¡æ¯</span></span><br><span class="line">    Irp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//ç»“æŸIRPå¤„ç†æµç¨‹</span></span><br><span class="line">    IoCompleteRequest(Irp,IO_NO_INCREMENT);</span><br><span class="line">    <span class="comment">//è¿”å›æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªåŸºæœ¬åŠŸèƒ½çš„æ´¾é£å‡½æ•°ï¼Œè€Œread ï¼Œwrite ï¼ŒIoControlå°±æ˜¯æ·»åŠ äº†ä¸åŒçš„åŠŸèƒ½ã€‚</p><h3 id="IRP-MJ-READ"><a href="#IRP-MJ-READ" class="headerlink" title="IRP_MJ_READ"></a>IRP_MJ_READ</h3><h4 id="R0å±‚"><a href="#R0å±‚" class="headerlink" title="R0å±‚"></a>R0å±‚</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">NTSTATUS  <span class="title function_">DispatchRead</span><span class="params">(</span></span><br><span class="line"><span class="params">_In_ <span class="keyword">struct</span> _DEVICE_OBJECT* DeviceObject,</span></span><br><span class="line"><span class="params">_Inout_ <span class="keyword">struct</span> _IRP* Irp</span></span><br><span class="line"><span class="params">)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//è·å–å½“å‰Irpæ ˆ</span></span><br><span class="line">    PIO_STACK_LOCATION pStack =IoGetCurrentIrpStackLocation(Irp);</span><br><span class="line">    <span class="comment">//æ‹¿åˆ°r3ç¼“å†²åŒº</span></span><br><span class="line">    PVOID pReadBuffer = Irp-&gt;AssociatedIrp.SystemBuffer;</span><br><span class="line">    <span class="comment">//è·å¾—è¯»å–é•¿åº¦</span></span><br><span class="line">    ULONG ulReadLength =pStack-&gt;Parameters.Read.Length;</span><br><span class="line">    <span class="comment">//è®¡ç®—è¿”å›æ•°æ®çš„é•¿åº¦</span></span><br><span class="line">    ULONG ulStrLen =(wcslen(<span class="string">L&quot;Hello world funck!&quot;</span>)+<span class="number">1</span>)*<span class="keyword">sizeof</span>(WCHAR);</span><br><span class="line">    <span class="comment">//æœ€å°æ•°æ®é•¿åº¦</span></span><br><span class="line">    ULONG uMin = ulReadLength&gt;ulStrLen ?ulStrLen:ulReadLength;</span><br><span class="line">    RtlCopyMemory(pReadBuffer,<span class="string">L&quot;Hello world funck!&quot;</span>,uMin)</span><br><span class="line">    <span class="comment">//è®¾ç½®Irpå¤„ç†æˆåŠŸ</span></span><br><span class="line">    Irp-&gt;IoStatus.Status =STATUS_SUCCESS;</span><br><span class="line">    <span class="comment">//è®¾ç½®è¿”å›ä¿¡æ¯</span></span><br><span class="line">    Irp-&gt;IoStatus.Information = uMin; <span class="comment">//è¿™é‡Œè¦è®¾ç½®è¿”å›å€¼ä¸ºuMin</span></span><br><span class="line">    <span class="comment">//ç»“æŸIRPå¤„ç†æµç¨‹</span></span><br><span class="line">    IoCompleteRequest(Irp,IO_NO_INCREMENT);</span><br><span class="line">    <span class="comment">//è¿”å›æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="R3å±‚"><a href="#R3å±‚" class="headerlink" title="R3å±‚"></a>R3å±‚</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEVICE_LINKE_NAME <span class="string">L&quot;\\\\.\\My_Device&quot;</span>  <span class="comment">//è¿™é‡Œè¦è·Ÿä½ è®¾ç½®çš„ç¬¦å·é“¾æ¥çš„åç§°ä¸€æ ·</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºå¥æŸ„</span></span><br><span class="line">    HANDLE  hFile = <span class="built_in">CreateFile</span>(DEVICE_LINKE_NAME, GENERIC_ALL, <span class="number">0</span>, <span class="literal">NULL</span>, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span> (hFile == INVALID_HANDLE_VALUE)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;CreateFile Failed%x\r\n&quot;</span>, <span class="built_in">GetLastError</span>());</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    UCHAR Buffer[MAX_PATH];</span><br><span class="line">    ULONG dwRet;</span><br><span class="line">    BOOL bRET =<span class="built_in">ReadFile</span>(hFile,Buffer,MAX_PATH,&amp;dwRet,<span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span>(bRET)</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;read %d bytes\r\n&quot;</span>, dwRet);</span><br><span class="line">       <span class="built_in">wprintf</span>(<span class="string">L&quot;%s\r\n&quot;</span>, Buffer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="IRP-MJ-WRITE"><a href="#IRP-MJ-WRITE" class="headerlink" title="IRP_MJ_WRITE"></a>IRP_MJ_WRITE</h3><h4 id="R0å±‚-1"><a href="#R0å±‚-1" class="headerlink" title="R0å±‚"></a>R0å±‚</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">NTSTATUS  <span class="title function_">DispatchWrite</span><span class="params">(</span></span><br><span class="line"><span class="params">_In_ <span class="keyword">struct</span> _DEVICE_OBJECT* DeviceObject,</span></span><br><span class="line"><span class="params">_Inout_ <span class="keyword">struct</span> _IRP* Irp</span></span><br><span class="line"><span class="params">)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//è·å–å½“å‰Irpæ ˆ</span></span><br><span class="line">    PIO_STACK_LOCATION pStack =IoGetCurrentIrpStackLocation(Irp);</span><br><span class="line">    <span class="comment">//æ‹¿åˆ°r3ç¼“å†²åŒº</span></span><br><span class="line">    PVOID pWriteBuffer = Irp-&gt;AssociatedIrp.SystemBuffer;</span><br><span class="line">    <span class="comment">//è·å¾—è¯»å–é•¿åº¦</span></span><br><span class="line">    ULONG ulWriteLength =pStack-&gt;Parameters.Read.Length;</span><br><span class="line">    UNICODE_STRING usStr=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    RtlInitUnicodeString(&amp;usStr,pWriteBuffer);</span><br><span class="line">    DbgPrint(<span class="string">&quot;%wZ\r\n&quot;</span>, usStr);</span><br><span class="line">DbgPrint(<span class="string">&quot;write success!!!&quot;</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®Irpå¤„ç†æˆåŠŸ</span></span><br><span class="line">    Irp-&gt;IoStatus.Status =STATUS_SUCCESS;</span><br><span class="line">    <span class="comment">//è®¾ç½®è¿”å›ä¿¡æ¯</span></span><br><span class="line">    Irp-&gt;IoStatus.Information = ulWriteLength; <span class="comment">//è¿™é‡Œè¦è®¾ç½®è¿”å›å€¼ä¸ºuMin</span></span><br><span class="line">    <span class="comment">//ç»“æŸIRPå¤„ç†æµç¨‹</span></span><br><span class="line">    IoCompleteRequest(Irp,IO_NO_INCREMENT);</span><br><span class="line">    <span class="comment">//è¿”å›æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="R3å±‚-1"><a href="#R3å±‚-1" class="headerlink" title="R3å±‚"></a>R3å±‚</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEVICE_LINKE_NAME <span class="string">L&quot;\\\\.\\My_Device&quot;</span>  <span class="comment">//è¿™é‡Œè¦è·Ÿä½ è®¾ç½®çš„ç¬¦å·é“¾æ¥çš„åç§°ä¸€æ ·</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºå¥æŸ„</span></span><br><span class="line">    HANDLE  hFile = <span class="built_in">CreateFile</span>(DEVICE_LINKE_NAME, GENERIC_ALL, <span class="number">0</span>, <span class="literal">NULL</span>, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span> (hFile == INVALID_HANDLE_VALUE)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;CreateFile Failed%x\r\n&quot;</span>, <span class="built_in">GetLastError</span>());</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ULONG dwRet; </span><br><span class="line">    DWORD dwWriteLen = (<span class="built_in">wcslen</span>(<span class="string">L&quot;Hello World Fuck!&quot;</span>))*<span class="built_in">sizeof</span>(WCHAR) + <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">WriteFile</span>(hFile, <span class="string">L&quot;Hello World Fuck!&quot;</span>,dwWriteLen,&amp;dwRet,<span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\r\n&quot;</span>, dwRet);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="IOé€šä¿¡"><a href="#IOé€šä¿¡" class="headerlink" title="IOé€šä¿¡"></a>IOé€šä¿¡</h2><h3 id="IRP-MJ-DEVICE-CONTROL"><a href="#IRP-MJ-DEVICE-CONTROL" class="headerlink" title="IRP_MJ_DEVICE_CONTROL"></a>IRP_MJ_DEVICE_CONTROL</h3><p>è¿›è¡ŒIOé€šä¿¡é‡è¦çš„æ˜¯æ§åˆ¶ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#define IRP_IOCTRL_BASE 0x8000</span><br><span class="line">#define IRP_IOCTRL_CODE(i) CTL_CODE(FILE_DEVICE_UNKNOWN,IRP_IOCTRL_BASE + i,METHOD_BUFFERED,FILE_ANY_ACCESS)</span><br><span class="line">#define GET_PROCESS IRP_IOCTRL_CODE(0)</span><br></pre></td></tr></table></figure><h4 id="R0å±‚-2"><a href="#R0å±‚-2" class="headerlink" title="R0å±‚"></a>R0å±‚</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">NTSTATUS  <span class="title function_">DispatchIoCtrl</span><span class="params">(</span></span><br><span class="line"><span class="params">_In_ <span class="keyword">struct</span> _DEVICE_OBJECT* DeviceObject,</span></span><br><span class="line"><span class="params">_Inout_ <span class="keyword">struct</span> _IRP* Irp</span></span><br><span class="line"><span class="params">)</span></span><br><span class="line">&#123;</span><br><span class="line">    PIO_STACK_LOCATION pStack = IoGetCurrentIrpStackLocation(Irp);</span><br><span class="line"><span class="comment">//è·å¾—æ§åˆ¶ç </span></span><br><span class="line">ULONG code = pStack-&gt;Parameters.DeviceIoControl.IoControlCode;</span><br><span class="line"><span class="comment">//è¾“å…¥è¾“å‡ºç¼“å†²åŒº</span></span><br><span class="line">PVOID pReadBuffer = <span class="literal">NULL</span>;</span><br><span class="line">ULONG uReadLength = <span class="number">0</span>;</span><br><span class="line">PVOID pWriteBuffer = <span class="literal">NULL</span>;</span><br><span class="line">ULONG uWriteLength = <span class="number">0</span>;</span><br><span class="line">pReadBuffer = pWriteBuffer = Irp-&gt;AssociatedIrp.SystemBuffer;</span><br><span class="line">uReadLength = uWriteLength = pStack-&gt;Parameters.DeviceIoControl.InputBufferLength;</span><br><span class="line"><span class="keyword">switch</span> (code)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> GET_PROCESS:</span><br><span class="line">DbgPrint(<span class="string">&quot;%s\r\n&quot;</span>, pReadBuffer);</span><br><span class="line">RtlZeroMemory(pWriteBuffer, <span class="number">1024</span>);</span><br><span class="line">ULONG uRetLen = <span class="built_in">strlen</span>(<span class="string">&quot;DispathchCrtl ok\r\n&quot;</span>);</span><br><span class="line">RtlCopyMemory(pWriteBuffer, <span class="string">&quot;DispathchCrtl ok\r\n&quot;</span>, uRetLen);</span><br><span class="line">Irp-&gt;IoStatus.Information = uRetLen;</span><br><span class="line">Irp-&gt;IoStatus.Status = STATUS_SUCCESS;</span><br><span class="line">IoCompleteRequest(Irp, IO_NO_INCREMENT);<span class="comment">//ç»“æŸIRP </span></span><br><span class="line"><span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®Irpå¤„ç†æˆåŠŸ</span></span><br><span class="line">Irp-&gt;IoStatus.Status = STATUS_SUCCESS;</span><br><span class="line"><span class="comment">//è®¾ç½®è¿”å›ä¿¡æ¯</span></span><br><span class="line">Irp-&gt;IoStatus.Information = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//ç»“æŸIRPå¤„ç†æµç¨‹</span></span><br><span class="line">IoCompleteRequest(Irp, IO_NO_INCREMENT);</span><br><span class="line"><span class="comment">//è¿”å›æˆåŠŸ</span></span><br><span class="line"><span class="keyword">return</span> STATUS_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="R3å±‚-2"><a href="#R3å±‚-2" class="headerlink" title="R3å±‚"></a>R3å±‚</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEVICE_LINKE_NAME <span class="string">L&quot;\\\\.\\My_Device&quot;</span>  <span class="comment">//è¿™é‡Œè¦è·Ÿä½ è®¾ç½®çš„ç¬¦å·é“¾æ¥çš„åç§°ä¸€æ ·</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IRP_IOCTRL_BASE 0x8000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IRP_IOCTRL_CODE(i) CTL_CODE(FILE_DEVICE_UNKNOWN,IRP_IOCTRL_BASE + i,METHOD_BUFFERED,FILE_ANY_ACCESS)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GET_PROCESS IRP_IOCTRL_CODE(0)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HANDLE hFile=<span class="built_in">CreateFile</span>(DEVICE_LINKE_NAME, GENERIC_ALL, <span class="number">0</span>, <span class="literal">NULL</span>, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span> (hFile == INVALID_HANDLE_VALUE)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;CreateFile Failed%x\r\n&quot;</span>, <span class="built_in">GetLastError</span>());</span><br><span class="line">        <span class="built_in">system</span>(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) </span><br><span class="line">   &#123;</span><br><span class="line">       <span class="type">char</span> ReadBuf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">       <span class="type">char</span> WriteBuf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">       DWORD dwRet = <span class="number">0</span>;</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;è¾“å…¥å­—ç¬¦ä¸²\r\n&quot;</span>);</span><br><span class="line">       <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,&amp;ReadBuf);</span><br><span class="line">       <span class="built_in">DeviceIoControl</span>(hFile, GET_PROCESS, ReadBuf,<span class="built_in">sizeof</span>(ReadBuf), WriteBuf,<span class="built_in">sizeof</span>(WriteBuf),&amp;dwRet,<span class="number">0</span>);</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;%d %s\r\n&quot;</span>, dwRet, WriteBuf);</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="built_in">CloseHandle</span>(hFile);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;Pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç®€å•é€šä¿¡&quot;&gt;&lt;a href=&quot;#ç®€å•é€šä¿¡&quot; class=&quot;headerlink&quot; title=&quot;ç®€å•é€šä¿¡&quot;&gt;&lt;/a&gt;ç®€å•é€šä¿¡&lt;/h2&gt;&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦å®ç°å†…æ ¸é©±åŠ¨å’Œåº”ç”¨å±‚ä¹‹é—´çš„é€šä¿¡ï¼Œé€šä¿¡æ˜¯é©±åŠ¨å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡é€šä¿¡å¯ä»¥å®ç°é©±åŠ¨å’Œåº”ç”¨å±‚ä¹‹é—´çš„æ•°æ®äº¤æ¢å’Œæ§</summary>
      
    
    
    
    <category term="å†…æ ¸é©±åŠ¨" scheme="https://5m10v3.github.io/categories/%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8/"/>
    
    
    <category term="Windowså†…æ ¸é©±åŠ¨å¼€å‘" scheme="https://5m10v3.github.io/tags/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Windowså†…æ ¸é©±åŠ¨å­¦ä¹ (ä¸ƒ)</title>
    <link href="https://5m10v3.github.io/2024/04/13/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%AD%A6%E4%B9%A0(%E4%B8%83)/"/>
    <id>https://5m10v3.github.io/2024/04/13/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%AD%A6%E4%B9%A0(%E4%B8%83)/</id>
    <published>2024-04-12T16:00:00.000Z</published>
    <updated>2024-06-09T09:07:00.354Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è“å±åˆ†æ"><a href="#è“å±åˆ†æ" class="headerlink" title="è“å±åˆ†æ"></a>è“å±åˆ†æ</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;è“å±åˆ†æ&quot;&gt;&lt;a href=&quot;#è“å±åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;è“å±åˆ†æ&quot;&gt;&lt;/a&gt;è“å±åˆ†æ&lt;/h2&gt;</summary>
      
    
    
    
    <category term="å†…æ ¸é©±åŠ¨" scheme="https://5m10v3.github.io/categories/%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8/"/>
    
    
    <category term="Windowså†…æ ¸é©±åŠ¨å¼€å‘" scheme="https://5m10v3.github.io/tags/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Windowså†…æ ¸é©±åŠ¨å­¦ä¹ (å…­)</title>
    <link href="https://5m10v3.github.io/2024/04/12/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%AD%A6%E4%B9%A0(%E5%85%AD)/"/>
    <id>https://5m10v3.github.io/2024/04/12/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%AD%A6%E4%B9%A0(%E5%85%AD)/</id>
    <published>2024-04-11T16:00:00.000Z</published>
    <updated>2024-06-09T09:06:52.221Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é©±åŠ¨æ–­é“¾"><a href="#é©±åŠ¨æ–­é“¾" class="headerlink" title="é©±åŠ¨æ–­é“¾"></a>é©±åŠ¨æ–­é“¾</h2><p>æœ¬æ–‡å‚è€ƒ<a href="https://www.cnblogs.com/LyShark/p/11652019.html">é©±åŠ¨å¼€å‘ï¼šDKOM å®ç°è¿›ç¨‹éšè—</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é©±åŠ¨æ–­é“¾&quot;&gt;&lt;a href=&quot;#é©±åŠ¨æ–­é“¾&quot; class=&quot;headerlink&quot; title=&quot;é©±åŠ¨æ–­é“¾&quot;&gt;&lt;/a&gt;é©±åŠ¨æ–­é“¾&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡å‚è€ƒ&lt;a href=&quot;https://www.cnblogs.com/LyShark/p/11652019.html&quot;&gt;</summary>
      
    
    
    
    <category term="å†…æ ¸é©±åŠ¨" scheme="https://5m10v3.github.io/categories/%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8/"/>
    
    
    <category term="Windowså†…æ ¸é©±åŠ¨å¼€å‘" scheme="https://5m10v3.github.io/tags/Windows%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
</feed>
